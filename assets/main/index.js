window.__require=function t(e,o,i){function n(s,c){if(!o[s]){if(!e[s]){var a=s.split("/");if(a=a[a.length-1],!e[a]){var l="function"==typeof __require&&__require;if(!c&&l)return l(a,!0);if(r)return r(a,!0);throw new Error("Cannot find module '"+s+"'")}s=a}var u=o[s]={exports:{}};e[s][0].call(u.exports,function(t){return n(e[s][1][t]||t)},u,u.exports,t,e,o,i)}return o[s].exports}for(var r="function"==typeof __require&&__require,s=0;s<i.length;s++)n(i[s]);return n}({AudioMgr:[function(t,e,o){"use strict";cc._RF.push(e,"c4310qOOsJLaZuNAeTaQNgO","AudioMgr");var i,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0});var r=t("../manager/Singleton"),s=t("./Utils"),c=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.bgmVolume=1,e.sfxVolume=1,e.btnClickSound=null,e.bgmAudioID=-1,e.audioId=-1,e.bgm_url="BGM1",e.lastplaysfxtime={},e.sfxcd={zb1:1500,zb2:1500,hit:300,merge_success:100,skill_freeze:300,skill_slow:300},e}return n(e,t),e.prototype.loadSounds=function(){var t=this,e=cc.sys.localStorage.getItem("bgmVolume"),o=cc.sys.localStorage.getItem("sfxVolume");switch(e){case void 0:case null:case"":case 1:case"1":this.bgmVolume=1;break;case 0:case"0":this.bgmVolume=0}switch(o){case void 0:case null:case"":case 1:case"1":this.sfxVolume=1;break;case 0:case"0":this.sfxVolume=0}cc.loader.loadResDir("sounds",function(){t.playBGM("bg")})},e.prototype.getUrl=function(t){return cc.loader.getRes("sounds/"+t)},e.prototype.playBGM=function(t){void 0===t&&(t="bg"),this.bgm_url=t;var e=this.getUrl(t);this.bgmAudioID>=0&&cc.audioEngine.stop(this.bgmAudioID),this.bgmVolume>0&&(this.bgmAudioID=cc.audioEngine.play(e,!0,this.bgmVolume))},e.prototype.stopSFX=function(t){return cc.audioEngine.stop(t)},e.prototype.playSFX=function(t){void 0===t&&(t="click"),this.lastplaysfxtime[t]||(this.lastplaysfxtime[t]=0);var e=this.sfxcd[t]||0;if(!(s.default.getServerTime()-this.lastplaysfxtime[t]<e)){this.lastplaysfxtime[t]=s.default.getServerTime();var o=this.getUrl(t);return this.sfxVolume>0?(this.audioId=cc.audioEngine.play(o,!1,this.sfxVolume),this.audioId):void 0}},e.prototype.pauseBGM=function(){this.bgmAudioID>=0&&cc.audioEngine.pause(this.bgmAudioID)},e.prototype.resumBGM=function(){this.bgmAudioID>=0&&cc.audioEngine.resume(this.bgmAudioID)},e.prototype.setBGMVolume=function(t,e){void 0===e&&(e=!1),(this.bgmVolume!=t||e)&&(cc.sys.localStorage.setItem("bgmVolume",t),this.bgmVolume=t,cc.audioEngine.setVolume(this.bgmAudioID,t)),this.bgmAudioID>=0?t>0?cc.audioEngine.resume(this.bgmAudioID):cc.audioEngine.pause(this.bgmAudioID):this.playBGM(this.bgm_url)},e.prototype.setSFXVolume=function(t,e){void 0===e&&(e=!1),(this.sfxVolume!=t||e)&&(cc.sys.localStorage.setItem("sfxVolume",t),this.sfxVolume=t)},e}(r.default);o.default=c,cc._RF.pop()},{"../manager/Singleton":"Singleton","./Utils":"Utils"}],BaseUI:[function(t,e,o){"use strict";cc._RF.push(e,"42f9dvGvrxMt6F8mhGvx9Ao","BaseUI");var i,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,i){var n,r=arguments.length,s=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,i);else for(var c=t.length-1;c>=0;c--)(n=t[c])&&(s=(r<3?n(s):r>3?n(e,o,s):n(e,o))||s);return r>3&&s&&Object.defineProperty(e,o,s),s},s=this&&this.__awaiter||function(t,e,o,i){return new(o||(o=Promise))(function(n,r){function s(t){try{a(i.next(t))}catch(e){r(e)}}function c(t){try{a(i.throw(t))}catch(e){r(e)}}function a(t){var e;t.done?n(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(s,c)}a((i=i.apply(t,e||[])).next())})},c=this&&this.__generator||function(t,e){var o,i,n,r,s={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return r={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function c(t){return function(e){return a([t,e])}}function a(r){if(o)throw new TypeError("Generator is already executing.");for(;s;)try{if(o=1,i&&(n=2&r[0]?i.return:r[0]?i.throw||((n=i.return)&&n.call(i),0):i.next)&&!(n=n.call(i,r[1])).done)return n;switch(i=0,n&&(r=[2&r[0],n.value]),r[0]){case 0:case 1:n=r;break;case 4:return s.label++,{value:r[1],done:!1};case 5:s.label++,i=r[1],r=[0];continue;case 7:r=s.ops.pop(),s.trys.pop();continue;default:if(!(n=(n=s.trys).length>0&&n[n.length-1])&&(6===r[0]||2===r[0])){s=0;continue}if(3===r[0]&&(!n||r[1]>n[0]&&r[1]<n[3])){s.label=r[1];break}if(6===r[0]&&s.label<n[1]){s.label=n[1],n=r;break}if(n&&s.label<n[2]){s.label=n[2],s.ops.push(r);break}n[2]&&s.ops.pop(),s.trys.pop();continue}r=e.call(t,s)}catch(c){r=[6,c],i=0}finally{o=n=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}},a=this&&this.__spreadArrays||function(){for(var t=0,e=0,o=arguments.length;e<o;e++)t+=arguments[e].length;var i=Array(t),n=0;for(e=0;e<o;e++)for(var r=arguments[e],s=0,c=r.length;s<c;s++,n++)i[n]=r[s];return i};Object.defineProperty(o,"__esModule",{value:!0});var l=t("../event/GameEvent"),u=t("../Utils/Utils"),h=cc._decorator,p=h.ccclass,f=(h.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.events=[],e.m_objects=new Map,e}var o;return n(e,t),o=e,e.prototype.onBtnClicked=function(t){switch(t.target.name){case"btn_close":this.closeUI()}},e.prototype.onLoad=function(){this.events=[],this.node.getComponent(cc.Button)&&u.default.addClickEvent(this.node,this.node,cc.js.getClassName(this),"onBtnClicked",this.node.getComponent(cc.Button).target),this._addClickEvent(this.node)},e.prototype._findInChildren=function(t,e){var o=t.getChildByName(e);if(o)return o;if(0==t.childrenCount)return null;for(var i=0;i<t.childrenCount;++i){var n=this._findInChildren(t.children[i],e);if(n)return n}return null},e.prototype.GetGameObject=function(t,e){if(void 0===e&&(e=!1),!cc.isValid(this.node))return null;if(!e){if(this.m_objects&&this.m_objects.has(t))return this.m_objects[t];if(t==this.node.name)return this.node}var o;return-1!=t.indexOf("/")?((o=cc.find(t,this.node))&&(this.m_objects[t]=o),o):((o=this._findInChildren(this.node,t))&&(this.m_objects[t]=o),o)},e.prototype.GetSkeleton=function(t){if(this.m_objects&&this.m_objects.has(t))return this.m_objects[t].getComponent(sp.Skeleton);var e=this.GetGameObject(t);return e?e.getComponent(sp.Skeleton):null},e.prototype.GetSprite=function(t){if(this.m_objects&&this.m_objects.has(t))return this.m_objects[t].getComponent(cc.Sprite);var e=this.GetGameObject(t);return e?e.getComponent(cc.Sprite):null},e.prototype.SetSprite=function(t,e){return s(this,void 0,void 0,function(){var o=this;return c(this,function(){return[2,new Promise(function(i){var n=o.GetSprite(t);n&&u.default.loadRes(e,cc.SpriteFrame).then(function(t){cc.isValid(o.node)&&(n.spriteFrame=t,i(null))})})]})})},e.prototype.SetUrlSprite=function(t,e){return s(this,void 0,void 0,function(){var o=this;return c(this,function(){return[2,new Promise(function(i){var n=o.GetSprite(t);n&&u.default.load(e).then(function(t){cc.isValid(o.node)&&(n.spriteFrame=t,i(null))})})]})})},e.prototype.GetText=function(t){if(this.m_objects&&this.m_objects.has(t))return this.m_objects[t].getComponent(cc.Label);var e=this.GetGameObject(t);return e?e.getComponent(cc.Label):null},e.prototype.GetRichText=function(t){if(this.m_objects&&this.m_objects.has(t))return this.m_objects[t].getComponent(cc.RichText);var e=this.GetGameObject(t);return e?e.getComponent(cc.RichText):null},e.prototype.GetProgressBar=function(t){if(this.m_objects&&this.m_objects.has(t))return this.m_objects[t].getComponent(cc.ProgressBar);var e=this.GetGameObject(t);return e?e.getComponent(cc.ProgressBar):null},e.prototype.GetButton=function(t){if(this.m_objects&&this.m_objects.has(t))return this.m_objects[t].getComponent(cc.Button);var e=this.GetGameObject(t);return e?e.getComponent(cc.Button):null},e.prototype.GetInputField=function(t){if(this.m_objects&&this.m_objects.has(t))return this.m_objects[t].getComponent(cc.EditBox);var e=this.GetGameObject(t);return e?e.getComponent(cc.EditBox):null},e.prototype.GetSlider=function(t){if(this.m_objects&&this.m_objects.has(t))return this.m_objects[t].getComponent(cc.Slider);var e=this.GetGameObject(t);return e?e.getComponent(cc.Slider):null},e.prototype.ShowLoading=function(){cc.find("Canvas/loading").active=!0},e.prototype.HideLoading=function(){cc.find("Canvas/loading").active=!1},e.prototype.SetText=function(t,e){this.GetText(t)&&(this.GetText(t).string=e)},e.prototype.SetInputText=function(t,e){this.GetInputField(t)&&(this.GetInputField(t).string=e)},e.prototype.SetProgressBar=function(t,e){this.GetProgressBar(t)&&(this.GetProgressBar(t).progress=e)},e.prototype.SliceNickname=function(t,e){return t&&t.length>e?t.slice(0,e)+"...":t},e.prototype._isSkipNode=function(t){return this.node!=t&&null!=t.getComponent(o)},e.prototype._addClickEvent=function(t){if(!this._isSkipNode(t))for(var e=0;e<t.childrenCount;++e){var o=t.children[e];this._isSkipNode(o)||(o.getComponent(cc.Button)&&u.default.addClickEvent(o,this.node,cc.js.getClassName(this),"onBtnClicked",o.getComponent(cc.Button).target),this._addClickEvent(o))}},e.prototype.getChildByName=function(t,e){return cc.find(t,e||this.node)},e.prototype.startAnim=function(){if(this.node){this.node.stopAllActions(),this.node.opacity=0,this.node.active=!0,this.node.setScale(.8,.8);var t=cc.delayTime(.1),e=cc.fadeIn(.1),o=cc.scaleTo(.1,1);this.node.runAction(cc.spawn(t.clone(),e,t.clone(),o))}},e.prototype.shutAnim=function(){var t=this;if(this.node){this.node.stopAllActions(),this.node.setScale(1,1);var e=cc.fadeOut(.1),o=cc.scaleTo(.05,1);this.node.runAction(cc.sequence(cc.spawn(o,e),cc.callFunc(function(){t.node.active=!1})))}},e.prototype.closeUI=function(){this.shutAnim()},e.prototype.onDestroy=function(){for(var t=0;t<this.events.length;++t)l.default.Instance().unregister(this,this.events[t])},e.prototype.rigester=function(t,e){this.events.push(t),l.default.Instance().register(this,t,e)},e.prototype.unregister=function(t){l.default.Instance().unregister(this,t)},e.prototype.dispatch=function(t){for(var e,o=[],i=1;i<arguments.length;i++)o[i-1]=arguments[i];(e=l.default.Instance()).dispatch.apply(e,a([t],o))},e.prototype.playSkAni=function(t,e,o,i,n){return void 0===n&&(n=-1),s(this,void 0,void 0,function(){var r,s,a;return c(this,function(c){switch(c.label){case 0:return(r=new cc.Node).parent=o,r.position=i,s=r.addComponent(sp.Skeleton),[4,u.default.loadRes(t,sp.SkeletonData)];case 1:return a=c.sent(),s.skeletonData=a,s.premultipliedAlpha=!1,s.setAnimation(0,e,!1),-1!=n&&r.runAction(cc.sequence(cc.delayTime(n),cc.callFunc(function(){r.parent=null}))),[2,r]}})})},o=r([p],e)}(cc.Component));o.default=f,cc._RF.pop()},{"../Utils/Utils":"Utils","../event/GameEvent":"GameEvent"}],BigNumber:[function(t,e,o){"use strict";cc._RF.push(e,"29779EDnrJPKp0TmDE+JGoq","BigNumber");var i=this&&this.__decorate||function(t,e,o,i){var n,r=arguments.length,s=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,i);else for(var c=t.length-1;c>=0;c--)(n=t[c])&&(s=(r<3?n(s):r>3?n(e,o,s):n(e,o))||s);return r>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var n=cc._decorator,r=n.ccclass,s=(n.property,function(){function t(){}var e;return e=t,t.getN=function(t){for(var o=0;o<e.aLetters.length;){if(e.aLetters[o]==t)return Math.pow(10,e.aLetters[o+1]);o+=2}return 0},t.getLargeString=function(t,o,i){if(void 0===o&&(o="K"),void 0===i&&(i=!0),0==t)return t+"";for(var n=NaN,r=Math.round(t/Math.abs(t)),s=t=Math.abs(t),c=0,a=0,l=0,u=0;u<e.aLetters.length;){if(e.aLetters[u]==o){a=u;break}u+=2}if(t<Math.pow(10,e.aLetters[a+1]))c=-1;else{for(n=Math.pow(10,e.aLetters[a+1]),c=a/2;s/1e3>=n;)s/=1e3,c++;for(;s/1e3>=1e3;)s/=1e3}return-1==c?e.addSeparators(Math.round((t-.5)*r).toString()):(s/1e3<10?l=2:s/1e3<100&&(l=1),s/=Math.pow(10,3-l),s=parseInt(s),s/=Math.pow(10,l),i?(s*r).toFixed(2)+""+e.aLetters[2*c]:(s*r).toString()+""+e.aLetters[2*c])},t.addSeparators=function(t,e){void 0===e&&(e=",");var o="-"==t.charAt(0);o&&(t=t.substr(1));for(var i="",n=0,r=t.length-1;r>0;)i=t.charAt(r)+i,++n%3==0&&(i=e+i),r-=1;return i=t.charAt(0)+i,o&&(i="-"+i),i},t.convertToLargeString=function(t){return e.getStringOfNumber(t)},t.getStringOfNumber=function(t,e,o,i){void 0===e&&(e=!1),void 0===o&&(o=!1),void 0===i&&(i=!1);var n=1;i&&(n=10);var r=Math.round(t);if(Math.round(t)>=1e6&&r<1e9&&e)return(Math.round(r/1e3/n)/(1e3/n)).toString()+" M";if(r>=1e9&&r<1e12)return(Math.round(r/1e6/n)/(1e3/n)).toString()+" B";if(r>=1e12&&r<1e15)return(Math.round(r/1e9/n)/(1e3/n)).toString()+" T";if(r>=1e15&&r<1e18)return(Math.round(r/1e12/n)/(1e3/n)).toString()+" q";if(r>=1e18&&r<1e21)return(Math.round(r/1e15/n)/(1e3/n)).toString()+" Qq";if(r>=1e21&&r<1e24)return(Math.round(r/1e18/n)/(1e3/n)).toString()+" s";if(r>=1e24&&r<1e27)return(Math.round(r/1e21/n)/(1e3/n)).toString()+" Ss";if(r>=1e27&&r<1e30)return(Math.round(r/1e24/n)/(1e3/n)).toString()+" O";if(r>=1e30&&r<1e33)return(Math.round(r/1e27/n)/(1e3/n)).toString()+" N";if(r>=1e33&&r<1e26)return(Math.round(r/1e30/n)/(1e3/n)).toString()+" d";if(r>=1e26&&r<1e29)return(Math.round(r/1e33/n)/(1e3/n)).toString()+" U";if(r>=1e29&&r<1e32)return(Math.round(r/1e26/n)/(1e3/n)).toString()+" Dd";var s=" ";o&&(s=",");for(var c="",a=String(Math.round(t)),l=String(Math.round(t)).length-1;l>=0;)3==(c=a.charAt(l)+c).length&&0!=l&&(c=s+c),7==c.length&&0!=l&&(c=s+c),l-=1;return c},t.aLetters=["K",3,"M",6,"B",9,"T",12,"aa",15,"bb",18,"cc",21,"dd",24,"ee",27,"ff",30,"gg",33,"hh",36,"ii",39,"jj",42,"kk",45,"ll",48,"mm",51,"nn",54,"oo",57,"pp",60,"qq",63,"rr",66,"ss",69,"tt",72,"uu",75,"vv",78,"ww",81,"xx",84,"yy",87,"zz",90,"aaa",93,"bbb",96,"ccc",99,"ddd",102,"eee",105,"fff",108,"ggg",111,"hhh",114,"iii",117,"jjj",120,"kkk",123,"lll",126,"mmm",129,"nnn",132,"ooo",135,"ppp",138,"qqq",141,"rrr",144,"sss",147,"ttt",150,"uuu",153,"vvv",156,"www",159,"xxx",162,"yyy",165,"zzz"],e=i([r],t)}());o.default=s,cc._RF.pop()},{}],GameConst:[function(t,e,o){"use strict";cc._RF.push(e,"5724dXIcyZJlaeMpHDcMjP+","GameConst"),Object.defineProperty(o,"__esModule",{value:!0}),o.GAME_NAME=void 0;var i=function(){function t(){}return t.local_data_key="PVSZ1001",t.OPEN_WEITUOMAIDAN="OPEN_WEITUOMAIDAN",t.NEW_PLANT="NEW_PLANT",t.BUY_PLANT="BUY_PLANT",t}();o.default=i,o.GAME_NAME="PVSZ",cc._RF.pop()},{}],GameEvent:[function(t,e,o){"use strict";cc._RF.push(e,"c7159/ZI8FDoLZmT4PdLaLG","GameEvent");var i,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0});var r=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.eventHash={},e.ower=null,e.type=null,e.callback=null,e}return n(e,t),e.prototype.register=function(t,e,o){var i={};i.ower=t,i.type=e,i.callback=o,this.eventHash.hasOwnProperty(e)||(this.eventHash[e]=[]),this.eventHash[e].push(i)},e.prototype.unregister=function(t,e){var o=this.eventHash[e];o&&o.length>0&&o.forEach(function(i,n){i.ower===t&&i.type===e&&o.splice(n,1)})},e.prototype.dispatch=function(t){for(var e=[],o=1;o<arguments.length;o++)e[o-1]=arguments[o];var i=this.eventHash[t];if(i&&i.length>0)for(var n in i){var r=i[n];r.callback&&r.callback.apply(r,e)}},e}(t("../manager/Singleton").default);o.default=r,cc._RF.pop()},{"../manager/Singleton":"Singleton"}],HTTP:[function(t,e,o){"use strict";cc._RF.push(e,"67bbbOsI39IGox3ery2aUUG","HTTP"),Object.defineProperty(o,"__esModule",{value:!0});var i=t("../framwork/MsgHints"),n=t("./Utils"),r=cc._decorator,s=(r.ccclass,r.property,function(){function t(){this.isInit=!1,this.socket=null,this.host=null,this.closedByClient=!1,this.inConnecting=!1,this.index=1}return t.sendRequest=function(e,o,r,s,c){void 0===s&&(s=null),void 0===c&&(c=null);var a=new XMLHttpRequest,l="?";for(var u in o)"?"!=l&&(l+="&"),l+=u+"="+o[u];null==s&&(s=t.url);var h=s+e;return o&&(h+=encodeURI(l)),console.log(h),a.open("GET",h,!0),a.timeout=1e4,n.default.ShowLoading(),a.onload=function(){var t=JSON.parse(a.responseText);if(n.default.HideLoading(),a.status>=200&&a.status<300||304==a.status)r&&r(t);else{if(console.log("========>",t),2==t.errcode||1==t.errcode)return cc.sys.localStorage.removeItem("jwt"),void cc.director.loadScene("LoadingScene",function(){i.default.show("\u8d26\u6237\u4fe1\u606f\u8fc7\u671f\uff0c\u8bf7\u91cd\u65b0\u767b\u9646")});a.abort()}},a.ontimeout=function(t){cc.log(t),c&&c()},a.onabort=function(t){cc.log(t),c&&c()},a.onerror=function(t){cc.log(t),c&&c()},a.send(),a},t.httpConnect_post_async=function(e,o,r){var s=this.url+e;n.default.ShowLoading(),t.post(s,o,function(t,e){if(n.default.HideLoading(),"COMPLETE"==t&&4==e.readyState&&e.status>=200&&e.status<400){var o=JSON.parse(e.responseText);1==o.errcode||2==o.errcode||4==o.errcode?(cc.sys.localStorage.removeItem("jwt"),i.default.show("\u8d26\u6237\u4fe1\u606f\u8fc7\u671f\uff0c\u8bf7\u91cd\u65b0\u767b\u9646"),window.location.href="http://dstest.wondersun.com.cn/WechatWeb/"):r&&r(o)}},this)},t.catobj=function(t){var e=[];for(var o in t){var i=o+"="+t[o];e.push(i)}return e.join("&")},t.post=function(t,e,o,i){var n=new XMLHttpRequest;n.onreadystatechange=function(){},n.onerror=function(){o.call(i,"ERROR",n)},n.onprogress=function(){o.call(i,"PROGRESS",n)},n.onloadend=function(){o.call(i,"COMPLETE",n)},n.ontimeout=function(){o.call(i,"TIMEOUT",n)},n.open("POST",t,!0),n.setRequestHeader("Content-Type","application/x-www-form-urlencoded");var r="";Object.keys(e).forEach(function(t){r+=t+"="+encodeURIComponent(e[t])+"&"}),""!==r&&(r=r.substr(0,r.lastIndexOf("&"))),n.send(r)},t.prototype.connect=function(e){var o=this;void 0===e&&(e="");var i=this;if(e=t._url,!i.inConnecting){if(i.inConnecting=!0,i.isInit)return console.log("Network is already inited..."),void i.connect();var n;i.closedByClient=!1,n=e,i.index++,i.host=n,i.socket=new WebSocket(n),i.socket.xxxxx=i.index,console.log("socket1111111"),i.socket.onopen=function(t){t.target.xxxxx==i.socket.xxxxx&&(console.log("Network onopen...",t),i.isInit=!0,cc.director.emit("socketOpen"))},i.socket.onmessage=function(t){if(t.target.xxxxx==i.socket.xxxxx)if(cc.sys.isNative){var e=new Uint8Array(t.data),o=JSON.parse(i.Utf8ArrayToStr(e));i.appandeMsg(o)}else{var n=new FileReader;n.onload=function(){var t=this.result,e=new Uint8Array(t),o=JSON.parse(i.Utf8ArrayToStr(e));i.appandeMsg(o)},n.readAsArrayBuffer(t.data)}},i.socket.onerror=function(t){console.log("onerror",JSON.stringify(t)),t.target&&i.socket&&(console.error("onerror ->","xxxxx:",t.target.xxxxx,", self.index:",i.index),t.target.xxxxx==i.socket.xxxxx?(console.log("Network onerror..."),o.isInit=!1,i.inConnecting=!1,i.socket.close(),i.netErrorDummy(t)):console.error("xxxxxxxxxxxxxxxxxxxx"))},i.socket.onclose=function(t){t.target&&i.socket&&(console.error("onclose ->","xxxxx:",t.target.xxxxx,", self.index:",i.index),console.error("onclose ->",t),t.target.xxxxx==i.socket.xxxxx&&(i.inConnecting=!1,o.isInit=!1,i.socket&&i.socket.close(),o.netCloseDummy(t)))}}},t.prototype.str2UTF8=function(t){var e,o,i=new Array;e=t.length;for(var n=0;n<e;n++)(o=t.charCodeAt(n))>=65536&&o<=1114111?(i.push(o>>18&7|240),i.push(o>>12&63|128),i.push(o>>6&63|128),i.push(63&o|128)):o>=2048&&o<=65535?(i.push(o>>12&15|224),i.push(o>>6&63|128),i.push(63&o|128)):o>=128&&o<=2047?(i.push(o>>6&31|192),i.push(63&o|128)):i.push(255&o);return i},t.prototype.send=function(t,e,o){var i={c:t,m:e,data:o};if(this.isInit){if(this.socket.readyState==WebSocket.OPEN){var n=JSON.stringify(i);"pong"!=i.m?cc.sys.isNative?console.log("\u53d1\u9001---------------------",JSON.stringify(i)):console.log("\u53d1\u9001---------------------",i):console.log("pong---------------------",JSON.stringify(i),new Date),this.socket.send(n)}}else cc.warn("Network is not inited...")},t.prototype.close=function(){console.log("\u4e3b\u52a8\u5173\u95ed socket"),this.socket&&(this.socket.close(),this.socket=null,this.isInit=!1,this.closedByClient=!0,this.inConnecting=!1)},t.prototype.appandeMsg=function(t){"ping"!=t.m&&(cc.sys.isNative?console.log("---------------------\u63a5\u6536",JSON.stringify(t)):console.log("---------------------\u63a5\u6536",t)),t.src="tcp",this.netDataDummy(t)},t.prototype.netDataDummy=function(t){if("ping"==t.m)console.log("pingiiiiiiiii",t,new Date),this.send("game","pong",{});else{if(t.data.errcode)return console.log("socket--\x3e",JSON.stringify(t)),void i.default.show(t.data.errmsg);cc.director.emit(t.c+"_"+t.m,t.data)}},t.prototype.netErrorDummy=function(){},t.prototype.netCloseDummy=function(){var t=this;this.inConnecting||setTimeout(function(){t.connect()},1)},t.prototype.Utf8ArrayToStr=function(t){var e,o,i,n,r,s;for(e="",i=t.length,o=0;o<i;)switch((n=t[o++])>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:e+=String.fromCharCode(n);break;case 12:case 13:r=t[o++],e+=String.fromCharCode((31&n)<<6|63&r);break;case 14:r=t[o++],s=t[o++],e+=String.fromCharCode((15&n)<<12|(63&r)<<6|(63&s)<<0)}return e},t.url="https://app.yanglegetu.com/",t._url="http://app.zdkjlm.com:9080/",t.instance=null,t}());o.default=s,cc._RF.pop()},{"../framwork/MsgHints":"MsgHints","./Utils":"Utils"}],LongTouchComponent:[function(t,e,o){"use strict";cc._RF.push(e,"e00b9OAUdVJhbS0BUI7M5px","LongTouchComponent");var i,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,i){var n,r=arguments.length,s=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,i);else for(var c=t.length-1;c>=0;c--)(n=t[c])&&(s=(r<3?n(s):r>3?n(e,o,s):n(e,o))||s);return r>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var s=cc._decorator,c=s.ccclass,a=s.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.touchInterval=.02,e.enableMultiTouching=!1,e.longTouchEvents=[],e._touchCounter=0,e._isTouching=!1,e}return n(e,t),e.prototype.onEnable=function(){this.node.on(cc.Node.EventType.TOUCH_START,this._onTouchStart,this),this.node.on(cc.Node.EventType.TOUCH_END,this._onTouchEnd,this),this.node.on(cc.Node.EventType.TOUCH_CANCEL,this._onTouchCancel,this)},e.prototype.onDisable=function(){this.node.off(cc.Node.EventType.TOUCH_START,this._onTouchStart,this),this.node.off(cc.Node.EventType.TOUCH_END,this._onTouchEnd,this),this.node.off(cc.Node.EventType.TOUCH_CANCEL,this._onTouchCancel,this),this.unschedule(this._touchCounterCallback)},e.prototype.clear=function(){this._isTouching=!1,this.unschedule(this._touchCounterCallback)},e.prototype._onTouchStart=function(t){var e=this;if(!this.enableMultiTouching){if(this._isTouching)return;this.node.getBoundingBoxToWorld().contains(t.getLocation())?this._isTouching=!0:this._isTouching=!1,this._isTouching&&(this.publishOneTouch(),this.node.runAction(cc.sequence(cc.delayTime(.5),cc.callFunc(function(){e._isTouching&&(e.unschedule(e._touchCounterCallback),e.schedule(e._touchCounterCallback,e.touchInterval))}))))}},e.prototype._onTouchEnd=function(){this._isTouching=!1,this._touchCounter=0,this.unschedule(this._touchCounterCallback)},e.prototype._onTouchCancel=function(){this._isTouching=!1,this._touchCounter=0,this.unschedule(this._touchCounterCallback)},e.prototype._touchCounterCallback=function(){this._isTouching?this.publishOneTouch():this.unschedule(this._touchCounterCallback)},e.prototype.publishOneTouch=function(){var t=this;this._isTouching&&(this.node.runAction(cc.sequence(cc.scaleTo(this.touchInterval/2,1.2),cc.scaleTo(this.touchInterval/2,1))),this._touchCounter++,this.longTouchEvents.forEach(function(e){e.emit([t.node])}))},r([a({tooltip:"\u89e6\u6478\u56de\u8c03\u95f4\u9694\uff08\u79d2\uff09\u3002\u5047\u5982\u4e3a0.1\uff0c\u90a3\u4e481\u79d2\u5185\u4f1a\u56de\u8c0310\u6b21 ${longTouchEvents} \u4e8b\u4ef6\u6570\u7ec4"})],e.prototype,"touchInterval",void 0),r([a({readonly:!0,tooltip:"\u662f\u5426\u652f\u6301\u591a\u70b9\u89e6\u63a7\uff08\u5f53\u524d\u8fd8\u4e0d\u652f\u6301\uff09"})],e.prototype,"enableMultiTouching",void 0),r([a({type:[cc.Component.EventHandler],tooltip:"\u56de\u8c03\u4e8b\u4ef6\u6570\u7ec4\uff0c\u6bcf\u95f4\u9694 ${toucheInterval}s \u56de\u8c03\u4e00\u6b21"})],e.prototype,"longTouchEvents",void 0),r([c],e)}(cc.Component);o.default=l,cc._RF.pop()},{}],MsgHints:[function(t,e,o){"use strict";cc._RF.push(e,"92dbd3SRYhK45DBZfwlXoTf","MsgHints");var i,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,i){var n,r=arguments.length,s=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,i);else for(var c=t.length-1;c>=0;c--)(n=t[c])&&(s=(r<3?n(s):r>3?n(e,o,s):n(e,o))||s);return r>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var s=t("../manager/PoolMgr"),c=cc._decorator,a=c.ccclass,l=(c.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}var o;return n(e,t),o=e,e.show=function(t){if(""!=t)if(null!=o._prefab){if(0!=s.default.Instance().pools.msg_hints.size()){var e=s.default.Instance().get("msg_hints");e.scaleY=0,e.parent=cc.find("Canvas"),e.zIndex=999,e.getChildByName("label").getComponent(cc.Label).string=t,e.getComponent(cc.Animation).play("msghints",0),e.getComponent(cc.Animation).on("finished",function(){s.default.Instance().put("msg_hints",e)})}}else cc.loader.loadRes("prefab/common/msg_hints",function(e,i){e||(o._prefab=i,s.default.Instance().initPool("msg_hints",o._prefab,20),o.show(t))})},e._prefab=null,o=r([a],e)}(cc.Component));o.default=l,cc._RF.pop()},{"../manager/PoolMgr":"PoolMgr"}],NumberRoll:[function(t,e,o){"use strict";cc._RF.push(e,"7afd2vdphtCjKWi+cfBvmoW","NumberRoll");var i,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,i){var n,r=arguments.length,s=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,i);else for(var c=t.length-1;c>=0;c--)(n=t[c])&&(s=(r<3?n(s):r>3?n(e,o,s):n(e,o))||s);return r>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var s=t("../framwork/BaseUI"),c=cc._decorator,a=c.ccclass,l=(c.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._cur=0,e._target=0,e._offset=0,e}return n(e,t),e.prototype.start=function(){this.label=this.node.getComponent(cc.Label)},Object.defineProperty(e.prototype,"vaule",{set:function(t){this._target=t,this._offset=Math.floor((this._target-this._cur)/Math.min(30,Math.abs(this._target-this._cur)))},enumerable:!1,configurable:!0}),e.prototype.update=function(t){1/t<cc.game.getFrameRate()/2?this.label.string=this._target+"":(this._cur!=this._target&&(this._cur+=this._offset,this._offset>0&&this._cur>this._target&&(this._cur=this._target),this._offset<0&&this._cur<this._target&&(this._cur=this._target)),this.label.string=this._cur+"")},r([a],e)}(s.default));o.default=l,cc._RF.pop()},{"../framwork/BaseUI":"BaseUI"}],PoolMgr:[function(t,e,o){"use strict";cc._RF.push(e,"47121gOvhBACYUKpowrObp+","PoolMgr");var i=this&&this.__decorate||function(t,e,o,i){var n,r=arguments.length,s=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,i);else for(var c=t.length-1;c>=0;c--)(n=t[c])&&(s=(r<3?n(s):r>3?n(e,o,s):n(e,o))||s);return r>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var n=cc._decorator,r=n.ccclass,s=(n.property,function(){function t(){this.pools={},this.prefabs={},this.pre_bullets=[]}var e;return e=t,t.Instance=function(){return null==e._instance&&(e._instance=new e),e._instance},t.prototype.loadPrefabs=function(){},t.prototype.initPool=function(t,e,o){this.prefabs[t]=e,this.pools[t]=new cc.NodePool;for(var i=0;i<o;++i)this.pools[t].put(cc.instantiate(e))},t.prototype.get=function(t){if(null==this.pools[t])return cc.error("\u6ca1\u6709"+t),null;if(this.pools[t].size()>0){var e=this.pools[t].get(),o=e.getChildByName("spine");return o&&(o.getComponent(sp.Skeleton).paused=!1),e}return cc.instantiate(this.prefabs[t])},t.prototype.put=function(t,e){this.pools[t].put(e)},t._instance=null,e=i([r],t)}());o.default=s,cc._RF.pop()},{}],Pop_fail:[function(t,e,o){"use strict";cc._RF.push(e,"4dbe5ZHU+BCFrMwaIcFSIzS","Pop_fail");var i,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,i){var n,r=arguments.length,s=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,i);else for(var c=t.length-1;c>=0;c--)(n=t[c])&&(s=(r<3?n(s):r>3?n(e,o,s):n(e,o))||s);return r>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var s=t("../framwork/BaseUI"),c=cc._decorator,a=c.ccclass,l=(c.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.prototype.show=function(t){this.GetText("lab_xing").string="\u661f\u7ea7\uff1a"+t.gameGrade,this.GetText("lab_score").string="\u5206\u6570\uff1a"+t.gameScore},e.prototype.onRepeat=function(){cc.director.loadScene("gameScene")},r([a],e)}(s.default));o.default=l,cc._RF.pop()},{"../framwork/BaseUI":"BaseUI"}],Pop_level:[function(t,e,o){"use strict";cc._RF.push(e,"9c4e0ozPx9OCI8LEQPmc1Jd","Pop_level");var i,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,i){var n,r=arguments.length,s=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,i);else for(var c=t.length-1;c>=0;c--)(n=t[c])&&(s=(r<3?n(s):r>3?n(e,o,s):n(e,o))||s);return r>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var s=t("../framwork/BaseUI"),c=t("../Utils/Utils"),a=cc._decorator,l=a.ccclass,u=(a.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.pathNode=[],e.lujing=[],e}return n(e,t),e.prototype.onLoad=function(){this.setNodeSprite(),this.getPathNode(),this.getLuXian()},e.prototype.setBlood=function(t){this.GetText("lab_homeblood").string=t},e.prototype.setNodeSprite=function(){for(var t=0;t<this.node.children.length;t++)"ground"==this.node.children[t].name&&c.default.setSpriteAssets(this.node.children[t].getComponent(cc.Sprite),"ground");c.default.setSpriteAssets(this.GetSprite("start"),"monsterstart"),c.default.setSpriteAssets(this.GetSprite("over"),"mushroom"),c.default.setSpriteAssets(this.GetSprite("baohuzhao"),"baohuzhao"),c.default.setSpriteAssets(this.GetSprite("ic_xin1"),"xin"),c.default.setSpriteAssets(this.GetSprite("ic_xin2"),"xin"),c.default.setSpriteAssets(this.GetSprite("ic_xin3"),"xin"),c.default.setSpriteAssets(this.GetSprite("mushroomhealth"),"mushroomhealth")},e.prototype.getPathNode=function(){for(var t=0;t<this.node.children.length;t++)"ground"==this.node.children[t].name&&this.pathNode.push(this.node.children[t])},e.prototype.getLuXian=function(){for(var t=0;t<this.node.children.length;t++)-1!=this.node.children[t].name.indexOf("path")&&this.lujing.push(this.node.children[t].position)},e.prototype.getOrientation=function(t){return 1==t?["right","right","right","right","right","right","right"]:2==t?["right","right","right","right","right","right","right","right"]:3==t?["right","left","left","right","right","right"]:4==t?["left","left","right","right","left","left","right","right","left","left","right","right","left","left","left","left"]:5==t||6==t?["right","left","left","left","left","right","right","right","right","right","right","left","left","right","right","right"]:7==t?["right","right","left","left","right","right","left","left","right","right","left","left","left","left"]:8==t?["right","right","left","left","right","right","left","left","left","left","left","left","right","right","left","left","right","right","right","right"]:9==t?["right","right","left","left","right","right","left","left","right","right","right"]:void 0},r([l],e)}(s.default));o.default=u,cc._RF.pop()},{"../Utils/Utils":"Utils","../framwork/BaseUI":"BaseUI"}],Pop_shop:[function(t,e,o){"use strict";cc._RF.push(e,"66bceToXSZCv45Ap6JeNw77","Pop_shop");var i,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,i){var n,r=arguments.length,s=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,i);else for(var c=t.length-1;c>=0;c--)(n=t[c])&&(s=(r<3?n(s):r>3?n(e,o,s):n(e,o))||s);return r>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var s=t("../framwork/BaseUI"),c=t("../Utils/Utils"),a=cc._decorator,l=a.ccclass,u=(a.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.pos=null,e}return n(e,t),e.prototype.onLoad=function(){this.setImg(),this.turret_price()},e.prototype.init=function(t){this.pos=t,this.node.position=t;var e=this.GetGameObject("shopbg").width/2;t.x+e>=cc.winSize.width/2?this.GetGameObject("shopbg").x=cc.winSize.width/2-(t.x+e):t.x+-e<=-cc.winSize.width/2?this.GetGameObject("shopbg").x=-cc.winSize.width/2-(t.x+-e):this.GetGameObject("shopbg").x=0},e.prototype.setImg=function(){c.default.setSpriteAssets(this.GetSprite("img1"),"turret/turret-sun"),c.default.setSpriteAssets(this.GetSprite("img2"),"turret/turret-bottle"),c.default.setSpriteAssets(this.GetSprite("img3"),"turret/turret-ice"),c.default.setSpriteAssets(this.GetSprite("img4"),"turret/turret-magicball"),c.default.setSpriteAssets(this.GetSprite("img5"),"turret/turret-leaf"),c.default.setSpriteAssets(this.GetSprite("shopbg"),"turret/shopbg"),c.default.setSpriteAssets(this.node.getComponent(cc.Sprite),"+");for(var t=1;t<=5;t++)c.default.setSpriteAssets(this.GetSprite("price"+t),"turret/price")},e.prototype.show=function(){this.node.stopAllActions(),this.node.opacity=0,this.node.active=!0,this.node.setScale(.8,.8);var t=cc.delayTime(.1),e=cc.fadeIn(.1),o=cc.scaleTo(.1,1);this.node.runAction(cc.spawn(t.clone(),e,t.clone(),o))},e.prototype.close=function(){var t=this;this.node.stopAllActions(),this.node.setScale(1,1);var e=cc.fadeOut(.1),o=cc.scaleTo(.05,1);this.node.runAction(cc.sequence(cc.spawn(o,e),cc.callFunc(function(){t.node.active=!1})))},e.prototype.click=function(t,e){switch(Number(e)){case 1:var o={src:"turret/turret-sun",pos:this.pos,price:180,id:1};cc.director.emit("putTurret",o);break;case 2:o={src:"turret/turret-bottle",pos:this.pos,price:100,id:2},cc.director.emit("putTurret",o);break;case 3:o={src:"turret/turret-ice",pos:this.pos,price:160,id:3},cc.director.emit("putTurret",o);break;case 4:o={src:"turret/turret-magicball",pos:this.pos,price:180,id:4},cc.director.emit("putTurret",o);break;case 5:o={src:"turret/turret-leaf",pos:this.pos,price:260,id:5},cc.director.emit("putTurret",o)}},e.prototype.turret_price=function(){this.GetText("coin1").string="180",this.GetText("coin2").string="100",this.GetText("coin3").string="160",this.GetText("coin4").string="180",this.GetText("coin5").string="260"},r([l],e)}(s.default));o.default=u,cc._RF.pop()},{"../Utils/Utils":"Utils","../framwork/BaseUI":"BaseUI"}],Pop_success:[function(t,e,o){"use strict";cc._RF.push(e,"00edbFTbMtNdJ7TAAfGAMsm","Pop_success");var i,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,i){var n,r=arguments.length,s=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,i);else for(var c=t.length-1;c>=0;c--)(n=t[c])&&(s=(r<3?n(s):r>3?n(e,o,s):n(e,o))||s);return r>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var s=t("../framwork/BaseUI"),c=cc._decorator,a=c.ccclass,l=(c.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.prototype.show=function(t){this.GetText("lab_xing").string="\u661f\u7ea7\uff1a"+t.gameGrade,this.GetText("lab_score").string="\u5206\u6570\uff1a"+t.gameScore},e.prototype.onRepeat=function(){cc.director.loadScene("gameScene")},r([a],e)}(s.default));o.default=l,cc._RF.pop()},{"../framwork/BaseUI":"BaseUI"}],Shake:[function(t,e,o){"use strict";cc._RF.push(e,"776856yN0hDUJ9tpRE0AmLJ","Shake");var i,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,i){var n,r=arguments.length,s=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,i);else for(var c=t.length-1;c>=0;c--)(n=t[c])&&(s=(r<3?n(s):r>3?n(e,o,s):n(e,o))||s);return r>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0}),o.Shake=void 0;var s=cc._decorator,c=s.ccclass,a=(s.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._initial_x=0,e._initial_y=0,e._strength_x=0,e._strength_y=0,e}var o;return n(e,t),o=e,e.create=function(t,e,i){var n=new o;return n.initWithDuration(t,e,i),n},e.prototype.initWithDuration=function(t,e,o){return cc.ActionInterval.prototype.initWithDuration.apply(this,arguments),this._strength_x=e,this._strength_y=o,!0},e.prototype.fgRangeRand=function(t,e){return Math.random()*(e-t)+t},e.prototype.update=function(){var t=this.fgRangeRand(-this._strength_x,this._strength_x),e=this.fgRangeRand(-this._strength_y,this._strength_y);this.getTarget().setPosition(t+this._initial_x,e+this._initial_y)},e.prototype.startWithTarget=function(t){cc.ActionInterval.prototype.startWithTarget.apply(this,arguments),this._initial_x=t.x,this._initial_y=t.y},e.prototype.stop=function(){this.getTarget().setPosition(new cc.Vec2(this._initial_x,this._initial_y)),cc.ActionInterval.prototype.stop.apply(this)},o=r([c],e)}(cc.ActionInterval));o.Shake=a,cc._RF.pop()},{}],Singleton:[function(t,e,o){"use strict";cc._RF.push(e,"6ab77tNm3tNhp5gNq5QAZBD","Singleton"),Object.defineProperty(o,"__esModule",{value:!0});var i=function(){function t(){}return t.Instance=function(){return this.instance||(this.instance=new this),this.instance},t}();o.default=i,cc._RF.pop()},{}],UserMsg:[function(t,e,o){"use strict";cc._RF.push(e,"19d10qVZLZMboDLwRs2Iqrv","UserMsg");var i=this&&this.__decorate||function(t,e,o,i){var n,r=arguments.length,s=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,i);else for(var c=t.length-1;c>=0;c--)(n=t[c])&&(s=(r<3?n(s):r>3?n(e,o,s):n(e,o))||s);return r>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0}),o.UserMsg=void 0;var n=t("./User"),r=cc._decorator,s=r.ccclass,c=(r.property,function(){function t(){}return t.setLoadHall=function(t){t.user?this.user.initData(t.user):this.user=null},t.user=new n.User,t.jwt="eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJ1aWQiOjYyMTA4MCwidG9rZW4iOiIzNjJkOGU3MTA0ZGEwNThmNzU5NmJmMWQ2ZDJiMjlkYjFmODcyOTQ4In0.hTnus5F_ycqTriBDlhIJB_YIFmCsQcXo1P5ceh5ERdE",i([s],t)}());o.UserMsg=c,cc._RF.pop()},{"./User":"User"}],User:[function(t,e,o){"use strict";cc._RF.push(e,"6ab51mxonFC263ftDu+uJDh","User"),Object.defineProperty(o,"__esModule",{value:!0}),o.User=void 0;var i=function(){function t(){this.id=0}return t.prototype.initData=function(t){this.id=t.id},t}();o.User=i,cc._RF.pop()},{}],Utils:[function(t,e,o){"use strict";cc._RF.push(e,"ff748PS7+hEIIiRCFvCwbSy","Utils"),Object.defineProperty(o,"__esModule",{value:!0}),o.EFLY_TYPE=void 0;var i=t("./Shake"),n=t("../framwork/BaseUI"),r=t("./BigNumber"),s=t("./AudioMgr");(function(t){t[t["\u91d1\u5e01"]=0]="\u91d1\u5e01",t[t["\u4f53\u529b"]=1]="\u4f53\u529b",t[t["\u94bb\u77f3"]=2]="\u94bb\u77f3"})(o.EFLY_TYPE||(o.EFLY_TYPE={}));var c=function(){function t(){}return t.createUI=function(t,e,o){return void 0===e&&(e=null),void 0===o&&(o=null),new Promise(function(i,n){cc.loader.loadRes(t,cc.Prefab,function(r,s){if(r)return console.error(r),void n();null==e&&(e=cc.find("Canvas"));var c=t.lastIndexOf("/"),a=t.substr(c+1,t.length-c);if(e.getComponentInChildren(a))console.log("\u91cd\u590dUI\u8df3\u8fc7");else{var l=cc.instantiate(s);l.opacity=0,l.runAction(cc.sequence(cc.delayTime(.01),cc.callFunc(function(){l.opacity=255}))),l.parent=e,o&&o(l),i(l)}})})},t.createPrefab=function(t,e,o,i){return void 0===e&&(e=null),void 0===o&&(o=null),void 0===i&&(i=null),new Promise(function(n,r){cc.loader.loadRes(t,cc.Prefab,function(t,s){if(t)return console.error(t),void r();null==e&&(e=cc.find("Canvas"));var c=cc.instantiate(s);c.opacity=0,c.runAction(cc.sequence(cc.delayTime(.01),cc.callFunc(function(){c.opacity=255}))),c.parent=e,i&&(c.position=i),o&&o(c),n(c)})})},t.ShowLoading=function(){cc.find("loadingLayer").active=!0},t.HideLoading=function(){cc.find("loadingLayer").active=!1},t.closeAllUI=function(){for(var t=cc.find("Canvas"),e=0;e<t.childrenCount;++e){var o=t.children[e].getComponent(n.default);o&&o.closeUI()}},t.getRndInteger=function(t,e){return Math.floor(Math.random()*(e-t+1))+t},t.formatNumber=function(t,e){return void 0===e&&(e=1),t=Math.floor(t),r.default.getLargeString(t)},t.getPowNum=function(t){return Math.pow(10,t)},t.setServerTime=function(e){t.timeOffset=e-(new Date).getTime(),cc.log("timeOffset:",t.timeOffset)},t.getServerTime=function(){return(new Date).getTime()+t.timeOffset},t.getTime=function(){return Math.round(parseInt(new Date+"")/1e3)},t.Shake=function(t,e,o){var n=cc.find("Canvas/Main Camera");n.x=0,n.y=0,n.stopAllActions(),n.runAction(i.Shake.create(t,e,o))},t.addClickEvent=function(t,e,o,i,n){var r=new cc.Component.EventHandler;r.target=e,r.component=o,r.handler=i,n&&(r.customEventData=n);var s=t.getComponent(cc.Button).clickEvents;s.length>0?cc.warn("\u6309\u94ae\u5df2\u7ecf\u5b58\u5728\u7ed1\u5b9a\uff0c\u8df3\u8fc7\u81ea\u52a8\u7ed1\u5b9a",t.name):(console.log(t.name,e.name,o),s.push(r))},t.getQueryString=function(t){var e=new RegExp("(^|&)"+t+"=([^&]*)(&|$)","i"),o=window.location.search.substr(1).match(e);return null!=o?unescape(o[2]):null},t.getTimeStrByS=function(t){(t=Math.floor(t))<0&&(t=0);var e=Math.floor(t/3600/24);t-=86400*e;var o=Math.floor(t/3600);t-=3600*o;var i,n=Math.floor(t/60);i=n>9?""+n:"0"+n;var r;return r=(t-=60*n)>9?""+t:"0"+t,e>0?e+"\u5929"+o+"\u65f6"+n+"\u5206":o>0?(o>9?""+o:"0"+o)+":"+i:i+":"+r},t.formatCoin=function(t){return t=Math.floor(t),r.default.getLargeString(t)},t.loadRes=function(t,e){return new Promise(function(o,i){cc.loader.loadRes(t,e,function(e,n){e?(cc.error(t,e),i(null)):o(n)})})},t.load=function(t){return new Promise(function(e,o){cc.loader.load({url:t,type:"png"},function(i,n){if(i)cc.error(t,i),o(null);else{var r=new cc.SpriteFrame(n);e(r)}})})},t.weight=function(t){for(var e=0,o=0;o<t.length;++o)e+=t[o];if(e<=0)return-1;var i=Math.round(Math.random()*Number.MAX_VALUE)%e;for(o=0;o<t.length;++o){if(i<t[o])return o;i-=t[o]}return-1},t.fixFloat=function(t,e){void 0===e&&(e=2);var o=100*e;return Math.floor(t*o)/o},t.worldConvertLocalPointAR=function(t,e){return t?t.convertToNodeSpaceAR(e):null},t.worldConvertLocalPoint=function(t,e){return t?t.convertToNodeSpace(e):null},t.localConvertWorldPointAR=function(t){return t?t.convertToWorldSpaceAR(cc.v2(0,0)):null},t.localConvertWorldPoint=function(t){return t?t.convertToWorldSpace(cc.v2(0,0)):null},t.convetOtherNodeSpace=function(t,e){if(!t||!e)return null;var o=this.localConvertWorldPoint(t);return this.worldConvertLocalPoint(e,o)},t.convetOtherNodeSpaceAR=function(t,e){if(!t||!e)return null;var o=this.localConvertWorldPointAR(t);return this.worldConvertLocalPointAR(e,o)},t.setSpriteAssets=function(t,e){window.platform.getRes(e).then(function(e){t.node&&t.node.isValid&&(t.spriteFrame=new cc.SpriteFrame(e),t.node.getComponent(cc.Widget)&&t.node.getComponent(cc.Widget).updateAlignment())})},t.getSpriteFrame=function(t,e){window.platform.getRes(t).then(function(t){var o=new cc.SpriteFrame(t);e&&e(o)})},t.showSuccess=function(t){cc.loader.loadRes("prefab/pop/Pop_success",cc.Prefab,function(e,o){if(e)return cc.log("success\u52a0\u8f7d\u5931\u8d25");var i=cc.instantiate(o);i.getComponent("Pop_success").show(t),i.parent=cc.find("Canvas"),i.zIndex=19999})},t.showFail=function(t){cc.loader.loadRes("prefab/pop/Pop_fail",cc.Prefab,function(e,o){if(e)return cc.log("fail\u52a0\u8f7d\u5931\u8d25");var i=cc.instantiate(o);i.getComponent("Pop_fail").show(t),i.parent=cc.find("Canvas"),i.zIndex=19999})},t.SetButtonSound=function(){cc.Button.prototype.touchBeganClone||(cc.Button.prototype.touchBeganClone=cc.Button.prototype._onTouchEnded,cc.Button.prototype._onTouchEnded=function(t){this.interactable&&this.enabledInHierarchy&&cc.audioEngine.playEffect(s.default.Instance().btnClickSound,!1),this.touchBeganClone(t)})},t.AddFont=function(){cc.Label.prototype.onLoadClone||(cc.Label.prototype.onLoadClone=cc.Label.prototype.onLoad,cc.Label.prototype.onLoad=function(){var t=this;this.font||cc.assetManager.resources.load("Fonts/font",cc.Font,function(e,o){t.node&&(t.font=o,t._forceUpdateRenderData(!0))}),this.onLoadClone()})},t.timeOffset=0,t}();o.default=c,cc._RF.pop()},{"../framwork/BaseUI":"BaseUI","./AudioMgr":"AudioMgr","./BigNumber":"BigNumber","./Shake":"Shake"}],bullet:[function(t,e,o){"use strict";cc._RF.push(e,"05fa0VT3XVAz7UDDE1e5TA+","bullet");var i,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,i){var n,r=arguments.length,s=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,i);else for(var c=t.length-1;c>=0;c--)(n=t[c])&&(s=(r<3?n(s):r>3?n(e,o,s):n(e,o))||s);return r>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var s=t("../framwork/BaseUI"),c=t("../Utils/Utils"),a=t("./item_monster"),l=cc._decorator,u=l.ccclass,h=(l.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.target=null,e.sped=700,e.plantlv=0,e.paoInfo=null,e.power=0,e.parentId=0,e}return n(e,t),e.prototype.start=function(){},e.prototype.update=function(t){if(this.target&&this.target.isValid){var e=this.target.position.add(cc.v3(0,2,0)).sub(this.node.position);if(e.mag()<this.sped*t*2)return this.target.getComponent(a.default).hit({power:this.power,id:this.parentId}),this.node.destroy(),void this.node.removeFromParent(!0);var o=e.normalize().mul(this.sped*t);this.node.position=this.node.position.add(o)}else this.node.removeFromParent(!0)},e.prototype.setInfo=function(t,e,o){this.power=e,this.target=t,this.parentId=o,this.setImg(o)},e.prototype.setImg=function(t){switch(t){case 1:c.default.setSpriteAssets(this.node.getComponent(cc.Sprite),"turret/turret-sun-bullet");break;case 2:c.default.setSpriteAssets(this.node.getComponent(cc.Sprite),"turret/turret-bottle-bullet");break;case 3:c.default.setSpriteAssets(this.node.getComponent(cc.Sprite),"turret/turret-ice-bullet");break;case 4:c.default.setSpriteAssets(this.node.getComponent(cc.Sprite),"turret/turret-magicball-bullet");break;case 5:c.default.setSpriteAssets(this.node.getComponent(cc.Sprite),"turret/turret-leaf-bullet")}},r([u],e)}(s.default));o.default=h,cc._RF.pop()},{"../Utils/Utils":"Utils","../framwork/BaseUI":"BaseUI","./item_monster":"item_monster"}],coin:[function(t,e,o){"use strict";cc._RF.push(e,"a4e80TxJM5DSLxodc2QcLDc","coin");var i,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,i){var n,r=arguments.length,s=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,i);else for(var c=t.length-1;c>=0;c--)(n=t[c])&&(s=(r<3?n(s):r>3?n(e,o,s):n(e,o))||s);return r>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var s=t("../framwork/BaseUI"),c=t("../Utils/Utils"),a=cc._decorator,l=a.ccclass,u=(a.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.prototype.init=function(t){c.default.setSpriteAssets(this.GetSprite("img"),"coin"),this.anim(t)},e.prototype.anim=function(t){var e=this;cc.tween(this.node).delay(1).to(.4,{position:t},{easing:"quadInOut"}).to(.2,{opacity:0},{easing:"sineIn"}).call(function(){e.node.removeFromParent(!0),e.node.destroy()}).start()},r([l],e)}(s.default));o.default=u,cc._RF.pop()},{"../Utils/Utils":"Utils","../framwork/BaseUI":"BaseUI"}],gameScene:[function(t,e,o){"use strict";cc._RF.push(e,"1444f0ljMdF8Yx8zNoevZgm","gameScene");var i,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,i){var n,r=arguments.length,s=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,i);else for(var c=t.length-1;c>=0;c--)(n=t[c])&&(s=(r<3?n(s):r>3?n(e,o,s):n(e,o))||s);return r>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var s=t("../framwork/BaseUI"),c=t("../framwork/MsgHints"),a=t("../item/coin"),l=t("../item/item_monster"),u=t("../item/item_turret"),h=t("../item/obstacle"),p=t("../item/prop"),f=t("../pop/Pop_level"),d=t("../pop/Pop_shop"),m=t("../Utils/Utils"),_=cc._decorator,g=_.ccclass,v=(_.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.levelScript=null,e.mapWidth=77,e.mapHeight=77,e.monsterPool=null,e.monsterPrefab=null,e.turretPrefab=null,e.bulletPrefab=null,e.obstaclePrefab=null,e.propPrefab=null,e.coinPrefab=null,e.level1Prefab=null,e.level2Prefab=null,e.level3Prefab=null,e.level4Prefab=null,e.level5Prefab=null,e.level6Prefab=null,e.level7Prefab=null,e.level8Prefab=null,e.level9Prefab=null,e.turretList=[],e.enemylist=[],e.obstacle=2,e.obstaclelist=[],e.homeBlood=10,e.coin=100,e.level=1,e.rank=0,e.max_wave=6,e.current_wave=1,e.enemyCount=0,e.skill_frozen=0,e.skill_shield=0,e.skill_addblood=0,e.isFrozen=!1,e.isShield=!1,e.dropPropOdds=100,e.levelCoinfig=null,e.mapId=0,e.clearanceRate=0,e.bossCount=0,e.wave_monster_count=0,e.monster_data_list=[],e.mapIndex=0,e.mustDie=!1,e}return n(e,t),e.prototype.onLoad=function(){var t=this;this.initGameData(),this.initLevelData(),cc.loader.loadRes("prefab/item/item_monster",cc.Prefab,function(e,o){e||(t.monsterPrefab=o,cc.loader.loadRes("prefab/item/item_turret",cc.Prefab,function(e,o){e||(t.turretPrefab=o,cc.loader.loadRes("prefab/item/bullet",cc.Prefab,function(e,o){e||(t.bulletPrefab=o,cc.loader.loadRes("prefab/item/obstacle",cc.Prefab,function(e,o){e||(t.obstaclePrefab=o,cc.loader.loadRes("prefab/item/prop",cc.Prefab,function(e,o){e||(t.propPrefab=o,cc.loader.loadRes("prefab/item/coin",cc.Prefab,function(e,o){if(!e){t.coinPrefab=o;for(var i=9,n=function(e){cc.loader.loadRes("prefab/pop/pop_level"+e,cc.Prefab,function(o,n){o||(i--,t["level"+e+"Prefab"]=n,i<1&&(t.eventOn(),t.setMap(),t.createwave(),t.setObstacle(),t.setGiveTurret(),cc.director.emit("selectUp",t.coin)))})},r=1;r<=9;r++)n(r)}}))}))}))}))}))}),this.initSceneData()},e.prototype.setMap=function(){var t=this.levelData(),e=m.default.getRndInteger(t.mapMinId,t.mapMaxId);this.mapIndex=e;var o=cc.instantiate(this["level"+e+"Prefab"]);o.getComponent(f.default).setBlood(this.homeBlood),o.parent=this.GetGameObject("levelNode"),this.levelScript=o.getComponent(f.default)},e.prototype.initGameData=function(){var t=cc.sys.localStorage.getItem("gameData");console.log("gameData====>",t),this.level=window.platform.getGameLevel()},e.prototype.initLevelData=function(){var t=this.levelData();this.max_wave=t.waveCount,this.wave_monster_count=t.monsterCount,this.mapId=m.default.getRndInteger(t.mapMinId,t.mapMaxId),this.clearanceRate=t.clearanceRate,this.bossCount=t.bossCount,console.log("\u602a\u7269\u6570\u91cf===>",this.bossCount);for(var e=Math.floor(this.wave_monster_count/this.max_wave),o=this.wave_monster_count%(this.max_wave*e),i=[],n=0;n<this.max_wave;n++){for(var r=[],s=0;s<e;s++)r.push({id:m.default.getRndInteger(1,6),isBoss:!1,bisi:!1});i.push(r)}var c=m.default.getRndInteger(0,i.length-1);for(s=0;s<o;s++)i[c].push({id:m.default.getRndInteger(1,6),isBoss:!1,bisi:!1});for(var a=this.getRandomNum(0,i.length-1,this.bossCount),l=0;l<a.length;l++){var u=m.default.getRndInteger(0,i[a[l]].length-1);i[a[l]][u].isBoss=!0}if(100-t.clearanceRate>0){var h=100-t.clearanceRate;if(m.default.getRndInteger(1,100)<=h){var p=m.default.getRndInteger(0,i.length-1);l=m.default.getRndInteger(0,i[p].length-1),i[p][l].bisi=!0}}this.monster_data_list=i,console.log("\u602a\u517d\u53c2\u6570===>",i)},e.prototype.initSceneData=function(){this.GetGameObject("tools-ice").getComponent(cc.Widget).updateAlignment(),this.GetGameObject("tools-shield").getComponent(cc.Widget).updateAlignment(),this.GetGameObject("tools-medicine").getComponent(cc.Widget).updateAlignment(),this.GetGameObject("tools-ice").active=!1,this.GetGameObject("tools-shield").active=!1,this.GetGameObject("tools-medicine").active=!1,this.GetText("lab_level").string="\u7b2c"+this.level+"\u5173",this.GetText("lab_rank").string=this.rank+"",this.GetText("lab_num").string=this.current_wave+":"+this.max_wave,this.initCoin()},e.prototype.createwave=function(){var t,e,o=this;e=(t=this.monster_data_list[this.current_wave-1]).length,this.enemyCount=e,console.log("guaiwulist===>",t);for(var i=function(e){var i=t[e].id,r=t[e].isBoss;n.node.runAction(cc.sequence(cc.delayTime(1*e),cc.callFunc(function(){var n=cc.instantiate(o.monsterPrefab);n.parent=o.GetGameObject("monsterNode");var s={path:o.levelScript.lujing,id:i,isBoss:r,bisi:t[e].bisi},c=o.levelScript.getOrientation(o.mapIndex);n.getComponent(l.default).init(s,c),o.enemylist.push(n)})))},n=this,r=0;r<t.length;++r)i(r)},e.prototype.setSceneNodeImg=function(){m.default.setSpriteAssets(this.GetSprite("tools-ice"),"tools-ice"),m.default.setSpriteAssets(this.GetSprite("tools-shield"),"tools-shield"),m.default.setSpriteAssets(this.GetSprite("tools-medicine"),"tools-medicine"),m.default.setSpriteAssets(this.GetSprite("spr_level"),"top/level"),m.default.setSpriteAssets(this.GetSprite("wave-bg"),"top/wave-bg"),m.default.setSpriteAssets(this.GetSprite("coin_bg"),"top/coin_bg"),m.default.setSpriteAssets(this.GetSprite("score_bg"),"top/score_bg"),m.default.setSpriteAssets(this.GetSprite("background"),"bg"),m.default.setSpriteAssets(this.GetSprite("start"),"monsterstart"),m.default.setSpriteAssets(this.GetSprite("over"),"mushroom"),m.default.setSpriteAssets(this.GetSprite("mushroomhealth"),"mushroomhealth")},e.prototype.eventOn=function(){this.node.on(cc.Node.EventType.TOUCH_START,this.touch_start,this),cc.director.on("putTurret",this.put_turret,this),cc.director.on("uplevel",this.uplevel,this),cc.director.on("reduce_blood",this.reduce_blood,this),cc.director.on("guaiDie",this.guaiDie,this),cc.director.on("getProp",this.getProp,this)},e.prototype.getProp=function(t){var e,o=t.id;1==o?(this.skill_frozen++,e=this.GetGameObject("tools-ice").position,this.GetGameObject("tools-ice").active=!0,this.scheduleOnce(this.call_sched_ice,5)):2==o?(this.skill_shield++,e=this.GetGameObject("tools-shield").position,this.GetGameObject("tools-shield").active=!0,this.scheduleOnce(this.call_sched_shield,5)):3==o&&(this.skill_addblood++,e=this.GetGameObject("tools-medicine").position,this.GetGameObject("tools-medicine").active=!0,this.scheduleOnce(this.call_sched_medicine,5)),t.node.getComponent(p.default).move(e)},e.prototype.call_sched_ice=function(){this.GetGameObject("tools-ice").active=!1,this.skill_frozen=0},e.prototype.call_sched_shield=function(){this.GetGameObject("tools-shield").active=!1,this.skill_shield=0},e.prototype.call_sched_medicine=function(){this.GetGameObject("tools-medicine").active=!1,this.skill_addblood=0},e.prototype.reduce_blood=function(t){var e=this;if(this.isShield)return this.isShield=!1,this.GetGameObject("baohuzhao").active=!1,void console.log("\u62a4\u76fe\u62b5\u6d88\u653b\u51fb");for(var o=0;o<this.enemylist.length;o++)if(this.enemylist[o]==t.node){this.enemylist.splice(o,1);break}if(this.homeBlood-t.reduce_blood<=0)return this.homeBlood=0,this.GetText("lab_homeblood").string="0",console.log("\u8840\u91cf\u4e0d\u8db3\uff0c\u6e38\u620f\u5931\u8d25"),this.node.stopAllActions(),void this.showFail();this.homeBlood-=t.reduce_blood,this.GetText("lab_homeblood").string=this.homeBlood+"",this.enemylist.length<1&&this.scheduleOnce(function(){e.current_wave<e.max_wave?(e.current_wave++,e.GetText("lab_num").string=e.current_wave+":"+e.max_wave,e.createwave()):c.default.show("\u901a\u5173\u5931\u8d25")},1)},e.prototype.uplevel=function(t){this.coin-=t,this.setCoinLabel(),cc.director.emit("selectUp",this.coin)},e.prototype.put_turret=function(t){if(this.coin<t.price)return c.default.show("\u91d1\u5e01\u4e0d\u8db3");this.coin-=t.price,this.setCoinLabel(),this.GetGameObject("Pop_shop").getComponent(d.default).close();var e=cc.instantiate(this.turretPrefab);e.getComponent(u.default).init(t.src,this.enemylist,this.bulletPrefab,t.id),e.position=t.pos,e.parent=this.GetGameObject("turretNode"),this.turretList.push(e),cc.director.emit("selectUp",this.coin)},e.prototype.setCoinLabel=function(){this.GetText("lab_coin").string=this.coin+""},e.prototype.setScoreLabel=function(){this.GetText("lab_rank").string=this.rank+""},e.prototype.touch_start=function(t){var e=t.getLocation(),o=this.node.convertToNodeSpaceAR(e),i=this.select_pos_in_path(o);i.active?(this.GetGameObject("Pop_shop").getComponent(d.default).init(i.position),this.GetGameObject("Pop_shop").getComponent(d.default).show()):(this.GetGameObject("Pop_shop").getComponent(d.default).close(),i.type),console.log("\u8fd4\u56de\u53c2\u6570==>",i)},e.prototype.select_pos_in_path=function(t){if(t.x>cc.winSize.width/2-this.mapWidth||t.x<-cc.winSize.width/2+this.mapWidth)return console.log("\u5c4f\u5e55\u5de6\u53f3\u8fb9\u754c"),{active:!1,type:3};for(var e=0;e<this.turretList.length;e++){var o=this.turretList[e],i=this.mapWidth/2,n=this.mapHeight/2;if(t.x<=o.x+i&&t.x>=o.x-i&&t.y<=o.y+n&&t.y>=o.y-n)return console.log("\u8be5\u4f4d\u7f6e\u5df2\u6709\u70ae\u5854"),{active:!1,type:4}}for(var r=0;r<this.levelScript.pathNode.length;r++)if(o=this.levelScript.pathNode[r],i=this.mapWidth/2,n=this.mapHeight/2,t.x<=o.x+i&&t.x>=o.x-i&&t.y<=o.y+n&&t.y>=o.y-n)return console.log("\u5728\u8def\u5f84\u4e0a"),{active:!1,type:2};for(r=0;r<this.obstaclelist.length;r++)if(o=this.obstaclelist[r],i=this.mapWidth/2,n=this.mapHeight/2,t.x<=o.x+i&&t.x>=o.x-i&&t.y<=o.y+n&&t.y>=o.y-n)return console.log("\u6709\u969c\u788d\u7269"),{active:!1,type:2};for(r=0;r<this.levelScript.pathNode.length;r++){if(o=this.levelScript.pathNode[r],i=this.mapWidth/2,n=this.mapHeight/2,t.x<=o.x+i&&t.x>=o.x-i)if(t.y>o.y){if(t.y<=o.y+this.mapHeight/2*3&&t.y>=o.y+this.mapHeight/2&&r>0)return console.log("\u653e\u7f6e\u70ae\u5854\u533a\u57df\u5185--\u4e0a"),{active:!0,position:cc.v3(o.x,o.y+this.mapHeight)}}else if(t.y<o.y&&t.y>=o.y-this.mapHeight/2*3&&t.y<=o.y-this.mapHeight/2)return console.log("\u653e\u7f6e\u70ae\u5854\u533a\u57df\u5185--\u4e0b"),{active:!0,position:cc.v3(o.x,o.y-this.mapHeight)};if(t.y<=o.y+n&&t.y>=o.y-n)if(t.x>o.x){if(t.x<=o.x+this.mapWidth/2*3&&t.x>=o.x+this.mapWidth/2)return console.log("\u653e\u7f6e\u70ae\u5854\u533a\u57df\u5185--\u53f3"),{active:!0,position:cc.v3(o.x+this.mapWidth,o.y)}}else if(t.x<o.x&&t.x>=o.x-this.mapWidth/2*3&&t.x<=o.x-this.mapWidth/2)return console.log("\u653e\u7f6e\u70ae\u5854\u533a\u57df\u5185--\u5de6"),{active:!0,position:cc.v3(o.x-this.mapWidth,o.y)};if(r==this.levelScript.pathNode.length-1)return console.log("\u7a7a\u5730\uff0c\u4e0d\u53ef\u653e\u7f6e\u70ae\u53f0"),{active:!1,type:1}}},e.prototype.guaiDie=function(t){var e=this;this.propOdds(t.node.position);for(var o=this.enemylist.length-1;o>=0;--o)if(t.node==this.enemylist[o]){this.enemylist.splice(o,1);break}this.coin_prefab_anim(t.node.position),this.enemyCount--,this.coin+=t.money,this.rank+=t.score,this.setCoinLabel(),this.setScoreLabel(),this.enemyCount<1&&this.scheduleOnce(function(){e.current_wave<e.max_wave?(e.current_wave++,e.GetText("lab_num").string=e.current_wave+":"+e.max_wave,e.createwave()):(c.default.show("\u901a\u5173\u6210\u529f"),e.showSuccess())},1),cc.director.emit("selectUp",this.coin)},e.prototype.showSuccess=function(){cc.sys.localStorage.setItem("gameData",JSON.stringify({level:this.level+1}));var t={gameScore:this.rank,gameWin:1,gameGrade:this.select_blood()};window.platform.submitGameScore(t)},e.prototype.showFail=function(){var t={gameScore:this.rank,gameWin:0,gameGrade:this.select_blood()};window.platform.submitGameScore(t)},e.prototype.select_blood=function(){return this.homeBlood>=9?3:this.homeBlood>=6?2:this.homeBlood>=3?1:0},e.prototype.coin_prefab_anim=function(t){var e=cc.instantiate(this.coinPrefab),o=cc.v2(this.GetGameObject("coin_bg").getPosition().x-47,this.GetGameObject("coin_bg").getPosition().y);e.getComponent(a.default).init(o),e.position=t,e.parent=this.GetGameObject("node_prop")},e.prototype.propOdds=function(t){var e=m.default.getRndInteger(1,3);if(1==e){if(this.skill_frozen>0)return;this.skill_frozen++}else if(2==e){if(this.skill_shield>0)return;this.skill_shield++}else if(3==e){if(this.skill_addblood>0)return;this.skill_addblood++}if(m.default.getRndInteger(0,100)<=this.dropPropOdds){var o=cc.instantiate(this.propPrefab);o.getComponent(p.default).init(e),o.position=t,o.parent=this.GetGameObject("node_prop")}},e.prototype.setObstacle=function(){for(var t=[],e=0;e<this.levelScript.pathNode.length-1;e++)for(var o=this.levelScript.pathNode[e].position,i=[new cc.Vec2(o.x,o.y+this.mapHeight),new cc.Vec2(o.x,o.y-this.mapHeight),new cc.Vec2(o.x-this.mapWidth,o.y),new cc.Vec2(o.x+this.mapWidth,o.y)],n=0;n<i.length;n++){var r=this.select_pos_in_path(i[n]);if(r.active){if(this.excludeLastPos(r.position))continue;t.push(r.position)}}var s=this.getRandomNum(0,t.length-1,this.obstacle);for(e=0;e<s.length;e++){var c=cc.instantiate(this.obstaclePrefab);c.getComponent(h.default).init(),c.parent=this.GetGameObject("node_obstacle"),c.position=t[s[e]],this.obstaclelist.push(c)}},e.prototype.excludeLastPos=function(t){if(1!=this.mapIndex){var e=this.levelScript.pathNode[this.levelScript.pathNode.length-1].position,o=cc.v3(e.x,e.y+this.mapHeight,0);return t.equals(o)}},e.prototype.setGiveTurret=function(){for(var t=[],e=0;e<this.levelScript.pathNode.length;e++)for(var o=this.levelScript.pathNode[e].position,i=[new cc.Vec2(o.x,o.y+this.mapHeight),new cc.Vec2(o.x,o.y-this.mapHeight),new cc.Vec2(o.x-this.mapWidth,o.y),new cc.Vec2(o.x+this.mapWidth,o.y)],n=0;n<i.length;n++){var r=this.select_pos_in_path(i[n]);if(r.active){if(this.excludeLastPos(r.position))continue;t.push(r.position)}}var s=this.initGiveTurret(),c=m.default.getRndInteger(s.min,s.max);for(console.log("\u8d60\u9001\u70ae\u53f0\u4e2a\u6570:",c),e=0;e<c;e++){var a=m.default.getRndInteger(1,5),l=(o=m.default.getRndInteger(0,t.length-1),cc.instantiate(this.turretPrefab));l.getComponent(u.default).init(this.random_turret_name(a),this.enemylist,this.bulletPrefab,a),l.parent=this.GetGameObject("turretNode"),l.position=t[o],this.turretList.push(l)}},e.prototype.random_turret_name=function(t){switch(t){case 1:return"turret/turret-sun";case 2:return"turret/turret-bottle";case 3:return"turret/turret-ice";case 4:return"turret/turret-magicball";case 5:return"turret/turret-leaf"}},e.prototype.getRandomNum=function(t,e,o){var i=[];if(0==o)return[];for(;;){for(var n=!1,r=m.default.getRndInteger(t,e),s=0;s<i.length;s++)if(r===i[s]){n=!0;break}if(n||i.push(r),i.length>=o)return i}},e.prototype.frozen=function(){var t=this;if(!this.isFrozen){if(this.skill_frozen<1)return c.default.show("\u65e0\u6280\u80fd\u6b21\u6570");this.isFrozen=!0,this.skill_frozen=0,this.node.pauseAllActions(),this.GetGameObject("tools-ice").active=!1,this.unschedule(this.call_sched_ice);for(var e=0;e<this.enemylist.length;e++)this.enemylist[e].getComponent(l.default).skill_frozen();this.scheduleOnce(function(){t.node.resumeAllActions(),t.isFrozen=!1},3)}},e.prototype.shield=function(){if(this.skill_shield<1)return c.default.show("\u65e0\u6280\u80fd\u6b21\u6570");this.GetGameObject("baohuzhao").active=!0,this.unschedule(this.call_sched_shield),this.GetGameObject("tools-shield").active=!1,this.skill_shield=0,this.isShield=!0},e.prototype.addblood=function(){if(this.skill_addblood<1)return c.default.show("\u65e0\u6280\u80fd\u6b21\u6570");this.GetGameObject("addblood").active=!0,this.GetGameObject("addblood").getComponent(cc.Animation).play(),this.unschedule(this.call_sched_medicine),this.GetGameObject("tools-medicine").active=!1,this.skill_addblood=0,this.homeBlood++,this.GetText("lab_homeblood").string=this.homeBlood+""},e.prototype.initCoin=function(){this.level>=1&&this.level<=5?this.coin=1e3:this.level>=6&&this.level<=40?this.coin=800:this.level>=41&&this.level<=99&&(this.coin=500),this.setCoinLabel()},e.prototype.initGiveTurret=function(){return this.level>=1&&this.level<=5?{max:0,min:0}:this.level>=6&&this.level<=20?{max:2,min:1}:this.level>=21&&this.level<=50?{max:2,min:0}:this.level>=51&&this.level<=80?{max:3,min:1}:this.level>=81&&this.level<=99?{max:3,min:2}:void 0},e.prototype.levelData=function(){return 1==this.level?{monsterCount:10,waveCount:3,bossCount:0,mapMaxId:1,mapMinId:1,clearanceRate:100}:2==this.level?{monsterCount:10,waveCount:3,bossCount:0,mapMaxId:2,mapMinId:2,clearanceRate:100}:this.level>=3&&this.level<=5?{monsterCount:20,waveCount:4,bossCount:1,mapMaxId:3,mapMinId:1,clearanceRate:100}:this.level>=6&&this.level<=10?{monsterCount:30,waveCount:5,bossCount:1,mapMaxId:5,mapMinId:1,clearanceRate:90}:this.level>=11&&this.level<=20?{monsterCount:40,waveCount:6,bossCount:2,mapMaxId:6,mapMinId:3,clearanceRate:80}:this.level>=21&&this.level<=30?{monsterCount:50,waveCount:6,bossCount:2,mapMaxId:7,mapMinId:3,clearanceRate:70}:this.level>=31&&this.level<=40?{monsterCount:50,waveCount:7,bossCount:3,mapMaxId:8,mapMinId:4,clearanceRate:60}:this.level>=41&&this.level<=50?{monsterCount:60,waveCount:7,bossCount:3,mapMaxId:9,mapMinId:1,clearanceRate:50}:this.level>=51&&this.level<=60?{monsterCount:60,waveCount:8,bossCount:4,mapMaxId:9,mapMinId:1,clearanceRate:40}:this.level>=61&&this.level<=70?{monsterCount:70,waveCount:8,bossCount:4,mapMaxId:9,mapMinId:1,clearanceRate:30}:this.level>=71&&this.level<=80?{monsterCount:70,waveCount:9,bossCount:5,mapMaxId:9,mapMinId:1,clearanceRate:20}:this.level>=81&&this.level<=90?{monsterCount:80,waveCount:9,bossCount:5,mapMaxId:9,mapMinId:1,clearanceRate:10}:this.level>=91&&this.level<=99?{monsterCount:80,waveCount:9,bossCount:6,mapMaxId:9,mapMinId:1,clearanceRate:5}:void 0},r([g],e)}(s.default));o.default=v,cc._RF.pop()},{"../Utils/Utils":"Utils","../framwork/BaseUI":"BaseUI","../framwork/MsgHints":"MsgHints","../item/coin":"coin","../item/item_monster":"item_monster","../item/item_turret":"item_turret","../item/obstacle":"obstacle","../item/prop":"prop","../pop/Pop_level":"Pop_level","../pop/Pop_shop":"Pop_shop"}],item_monster:[function(t,e,o){"use strict";cc._RF.push(e,"269ffJzIz1HG4gFwP17uA7B","item_monster");var i,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,i){var n,r=arguments.length,s=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,i);else for(var c=t.length-1;c>=0;c--)(n=t[c])&&(s=(r<3?n(s):r>3?n(e,o,s):n(e,o))||s);return r>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var s=t("../framwork/BaseUI"),c=t("../Utils/Utils"),a=cc._decorator,l=a.ccclass,u=(a.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.pathindex=1,e.path=[],e.ismove=!0,e.isBoss=!1,e.sped=0,e.maxhp=0,e.hp=0,e.money=0,e.id=0,e.power=0,e.rank=0,e.maxsped=0,e.tweenTime=[],e.score=0,e.rotList=[],e}return n(e,t),e.prototype.init=function(t,e){this.rotList=e,this.path=t.path,this.node.position=this.path[0],this.id=t.id,this.isBoss=t.isBoss,this.setImg(t.id),this.setHp(t.id),this.setMoney(t.id),this.setRank(t.id),this.setPower(),this.GetGameObject("bing").active=!1,t.bisi&&(this.hp=1e9,this.maxhp=1e9),this.GetGameObject("monsterhealth").getComponent(cc.Sprite).fillRange=Number(this.hp/this.maxhp),this.isBoss?this.GetGameObject("img").scale=1.2:this.GetGameObject("img").scale=1,1==t.id||2==t.id?this.onGuaiAnim_type1():this.onGuaiAnim_type2(),this.node.scaleX="left"==this.rotList[this.pathindex-1]?-1:1},e.prototype.setHp=function(t){1===t||2===t?this.isBoss?(this.hp=40,this.maxhp=40,this.sped=110,this.maxsped=110):(this.hp=5,this.maxhp=5,this.sped=160,this.maxsped=160):3===t||4===t?this.isBoss?(this.hp=50,this.maxhp=50,this.sped=180,this.maxsped=180):(this.hp=5,this.maxhp=5,this.sped=200,this.maxsped=200):5!==t&&6!==t||(this.isBoss?(this.hp=30,this.maxhp=30,this.sped=240,this.maxsped=240):(this.hp=3,this.maxhp=3,this.sped=280,this.maxsped=280))},e.prototype.setPower=function(){this.isBoss?this.power=2:this.power=1},e.prototype.setMoney=function(t){1===t||2===t?this.isBoss?(this.money=200,this.score=40):(this.money=80,this.score=15):3===t||4===t?this.isBoss?(this.money=300,this.score=50):(this.money=100,this.score=20):5!==t&&6!==t||(this.isBoss?(this.money=150,this.score=30):(this.money=50,this.score=10))},e.prototype.setRank=function(t){1===t||2===t?this.isBoss?this.rank=40:this.rank=5:3===t||4===t?this.isBoss?this.rank=50:this.rank=5:5!==t&&6!==t||(this.isBoss?this.rank=30:this.rank=3)},e.prototype.onGuaiAnim_type1=function(){this.tweenTime=[.6,.6,.3],cc.tween(this.GetGameObject("img")).repeatForever(cc.tween().by(this.tweenTime[0],{scaleX:.1,scaleY:-.1}).by(this.tweenTime[1],{scaleX:-.2,scaleY:.2}).by(this.tweenTime[2],{scaleX:.1,scaleY:-.1})).start()},e.prototype.onGuaiAnim_type2=function(){this.tweenTime=[.3,.2,.2,.3,.1,.2],cc.tween(this.GetGameObject("img")).repeatForever(cc.tween().delay(.5).by(this.tweenTime[0],{scaleY:-.1,scaleX:.1}).by(this.tweenTime[1],{position:cc.v2(this.GetGameObject("img").x,20),scaleY:.2,scaleX:-.2}).by(this.tweenTime[2],{position:cc.v2(this.GetGameObject("img").x,20),scaleY:-.1,scaleX:.1}).by(this.tweenTime[3],{position:cc.v2(this.GetGameObject("img").x,-40),scaleY:.1,scaleX:-.1}).by(this.tweenTime[4],{scaleY:-.2,scaleX:.2}).by(this.tweenTime[5],{scaleY:.1,scaleX:-.1})).start()},e.prototype.update=function(t){if(this.ismove&&this.path[this.pathindex]){var e=this.path[this.pathindex].sub(this.node.position);if(e.mag()<this.sped*t)this.node.position=this.path[this.pathindex],this.pathindex++,this.node.scaleX="left"==this.rotList[this.pathindex-1]?-1:1,this.pathindex>=this.path.length&&(console.log("\u9003\u8fc7"),cc.director.emit("reduce_blood",{reduce_blood:this.power,node:this.node}),this.node.removeFromParent(!0),this.node.destroy());else{var o=e.normalize().mul(this.sped/3*t);this.node.position=this.node.position.add(o)}}},e.prototype.setImg=function(t){switch(c.default.setSpriteAssets(this.GetSprite("monsterhealth_bg"),"monster/monsterhealth_bg"),c.default.setSpriteAssets(this.GetSprite("monsterhealth"),"monster/monsterhealth"),c.default.setSpriteAssets(this.GetSprite("bing"),"turret/turret-ice-attackeffect"),t){case 1:c.default.setSpriteAssets(this.GetSprite("img"),"monster/monster1");break;case 2:c.default.setSpriteAssets(this.GetSprite("img"),"monster/monster2");break;case 3:c.default.setSpriteAssets(this.GetSprite("img"),"monster/monster3");break;case 4:c.default.setSpriteAssets(this.GetSprite("img"),"monster/monster4");break;case 5:c.default.setSpriteAssets(this.GetSprite("img"),"monster/monster5");break;case 6:c.default.setSpriteAssets(this.GetSprite("img"),"monster/monster6")}},e.prototype.hit=function(t){this.hp<=0||(this.hp-=t.power,this.hp=Math.max(this.hp,0),3==t.id&&this.skill_jiansu(),this.GetGameObject("monsterhealth").getComponent(cc.Sprite).fillRange=Number(this.hp/this.maxhp),this.hp<=0&&(cc.director.emit("guaiDie",{node:this.node,money:this.money,score:this.score}),this.node.removeFromParent(!0)))},e.prototype.skill_frozen=function(){this.ismove=!1,this.unschedule(this.skill_frozen_scha_Call),this.GetGameObject("img").pauseAllActions(),this.GetGameObject("img").color=cc.color(84,128,255,255),this.GetGameObject("bing").active=!0,this.scheduleOnce(this.skill_frozen_scha_Call,3)},e.prototype.skill_frozen_scha_Call=function(){this.GetGameObject("img").resumeAllActions(),this.GetGameObject("img").color=cc.color(255,255,255,255),this.GetGameObject("bing").active=!1,this.ismove=!0},e.prototype.skill_jiansu=function(){this.unschedule(this.skill_jiansu_scha_Call),this.sped=this.maxsped/2,this.GetGameObject("img").color=cc.color(84,128,255,255),this.GetGameObject("bing").active=!0,this.scheduleOnce(this.skill_jiansu_scha_Call,3)},e.prototype.skill_jiansu_scha_Call=function(){this.sped=this.maxsped,this.GetGameObject("img").color=cc.color(255,255,255,255),this.GetGameObject("bing").active=!1},r([l],e)}(s.default));o.default=u,cc._RF.pop()},{"../Utils/Utils":"Utils","../framwork/BaseUI":"BaseUI"}],item_turret:[function(t,e,o){"use strict";cc._RF.push(e,"0bcb81Dq1pC6KwKXFaE3oyZ","item_turret");var i,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,i){var n,r=arguments.length,s=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,i);else for(var c=t.length-1;c>=0;c--)(n=t[c])&&(s=(r<3?n(s):r>3?n(e,o,s):n(e,o))||s);return r>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var s=t("../framwork/BaseUI"),c=t("../Utils/Utils"),a=t("./bullet"),l=cc._decorator,u=l.ccclass,h=(l.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.level=1,e.id=0,e.power=0,e.cd=1,e.lastfire=0,e}return n(e,t),e.prototype.init=function(t,e,o,i){this.id=i,this.enemylist=e,this.bullet_pre=o,this.cd=2==i?1:2,c.default.setSpriteAssets(this.GetGameObject("icon").getComponent(cc.Sprite),t),this.level_node_size(),this.set_level_power()},e.prototype.level_node_size=function(){switch(this.level){case 1:this.node.scale=.8;break;case 2:this.node.scale=1;break;case 3:this.node.scale=1.2}},e.prototype.set_level_power=function(){switch(this.id){case 1:switch(this.level){case 1:this.power=3;break;case 2:this.power=5;break;case 3:this.power=7}break;case 2:switch(this.level){case 1:this.power=1;break;case 2:this.power=3;break;case 3:this.power=4}break;case 3:switch(this.level){case 1:this.power=2;break;case 2:this.power=4;break;case 3:this.power=5}break;case 4:switch(this.level){case 1:this.power=3;break;case 2:this.power=5;break;case 3:this.power=7}break;case 5:switch(this.level){case 1:this.power=3;break;case 2:this.power=6;break;case 3:this.power=9}}},e.prototype.getTarget=function(){for(var t=this.enemylist,e=null,o=231,i=[],n=0;n<t.length;++n)if(!(t[n].x<-cc.winSize.width/2)){var r=t[n].position.sub(this.node.position).mag();r<o&&(e=t[n],o=r,i.push(t[n]))}return{node:e,list:i}},e.prototype.update=function(t){var e=this;if(this.lastfire+=t,this.lastfire>=this.cd/1){this.lastfire=0;var o=this.getTarget();o.node&&this.node.runAction(cc.sequence(cc.delayTime(.5),cc.callFunc(function(){if(4==e.id)for(var t=0;t<e.level;t++)e.init_bullet(o.list[t]);else e.init_bullet(o.node)})))}},e.prototype.init_bullet=function(t){var e=cc.instantiate(this.bullet_pre);e.position=this.node.position,e.parent=cc.find("Canvas/node_bullet"),e&&e.isValid&&e.getComponent(a.default).setInfo(t,this.power,this.id)},e.prototype.price_turret=function(){switch(this.level){case 1:if(1==this.id)return 180;if(2==this.id)return 100;if(3==this.id)return 160;if(4==this.id)return 180;if(5==this.id)return 260;break;case 2:if(1==this.id)return 260;if(2==this.id)return 180;if(3==this.id)return 260;if(4==this.id)return 260;if(5==this.id)return 320;break;case 3:if(1==this.id)return 320;if(2==this.id)return 260;if(3==this.id)return 320;if(4==this.id)return 320;if(5==this.id)return 380}},e.prototype.onLoad=function(){cc.director.on("selectUp",this.selectUp,this)},e.prototype.selectUp=function(t){this.level>=3||(t>=this.price_turret()?this.GetGameObject("upgrade").active=!0:this.GetGameObject("upgrade").active=!1)},e.prototype.onClickUpLevel=function(){this.level++,this.level_node_size(),this.set_level_power(),this.GetGameObject("upgrade").active=!1,cc.director.emit("uplevel",this.price_turret())},r([u],e)}(s.default));o.default=h,cc._RF.pop()},{"../Utils/Utils":"Utils","../framwork/BaseUI":"BaseUI","./bullet":"bullet"}],list_optimize:[function(t,e,o){"use strict";cc._RF.push(e,"c63f5QgCgBF34Akkc7OPVmZ","list_optimize");var i,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,i){var n,r=arguments.length,s=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,i);else for(var c=t.length-1;c>=0;c--)(n=t[c])&&(s=(r<3?n(s):r>3?n(e,o,s):n(e,o))||s);return r>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var s=cc._decorator,c=s.ccclass,a=(s.property,s.menu),l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.maxoffset=0,e}return n(e,t),e.prototype.event_load=function(){this.node.getComponent(cc.ScrollView)?(this.node.on("scrolling",this._event_update_opacity,this),this.node.getComponent(cc.ScrollView).content.on(cc.Node.EventType.CHILD_REMOVED,this._event_update_opacity,this),this.node.getComponent(cc.ScrollView).content.on(cc.Node.EventType.CHILD_REORDER,this._event_update_opacity,this)):cc.error("\u4e0d\u5b58\u5728ScrollView\u7ec4\u4ef6\uff01")},e.prototype.offFunc=function(){this.node.off("scrolling",this._event_update_opacity,this),this.node.getComponent(cc.ScrollView).content.off(cc.Node.EventType.CHILD_REMOVED,this._event_update_opacity,this),this.node.getComponent(cc.ScrollView).content.off(cc.Node.EventType.CHILD_REORDER,this._event_update_opacity,this)},e.prototype.updateMaxOffset=function(){this.maxoffset=this.node.getComponent(cc.ScrollView).getMaxScrollOffset().y},e.prototype._get_bounding_box_to_world=function(t){var e=t._contentSize.width,o=t._contentSize.height,i=cc.rect(-t._anchorPoint.x*e,-t._anchorPoint.y*o,e,o);return t._calculWorldMatrix(),i.transformMat4(i,t._worldMatrix),i},e.prototype._check_collision=function(t){var e=this._get_bounding_box_to_world(this.node.getComponent(cc.ScrollView).content.parent),o=this._get_bounding_box_to_world(t);return e.intersects(o)},e.prototype._event_update_opacity=function(){var t=this;this.node.getComponent(cc.ScrollView).content.children[1].children.forEach(function(e){e.opacity=t._check_collision(e)?255:0})},r([c,a("tool/list_optimize")],e)}(cc.Component);o.default=l,cc._RF.pop()},{}],obstacle:[function(t,e,o){"use strict";cc._RF.push(e,"90977yvuIpHkIWzxNJTHchF","obstacle");var i,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,i){var n,r=arguments.length,s=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,i);else for(var c=t.length-1;c>=0;c--)(n=t[c])&&(s=(r<3?n(s):r>3?n(e,o,s):n(e,o))||s);return r>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var s=t("../framwork/BaseUI"),c=t("../Utils/Utils"),a=cc._decorator,l=a.ccclass,u=(a.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.prototype.init=function(){c.default.getRndInteger(1,100)<50?c.default.setSpriteAssets(this.node.getComponent(cc.Sprite),"stuff1"):c.default.setSpriteAssets(this.node.getComponent(cc.Sprite),"stuff2")},r([l],e)}(s.default));o.default=u,cc._RF.pop()},{"../Utils/Utils":"Utils","../framwork/BaseUI":"BaseUI"}],prop:[function(t,e,o){"use strict";cc._RF.push(e,"74de0tPUCdC6qYyfTRmJQ/c","prop");var i,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,i){var n,r=arguments.length,s=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,i);else for(var c=t.length-1;c>=0;c--)(n=t[c])&&(s=(r<3?n(s):r>3?n(e,o,s):n(e,o))||s);return r>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var s=t("../framwork/BaseUI"),c=t("../Utils/Utils"),a=cc._decorator,l=a.ccclass,u=(a.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.id=0,e}return n(e,t),e.prototype.init=function(t){var e,o=this,i=t;this.id=i,1==i?e="tools-ice":2==i?e="tools-shield":3==i&&(e="tools-medicine"),c.default.getSpriteFrame(e,function(t){o.GetSprite("img").spriteFrame=t,cc.tween(o.node).by(.16,{y:-40},{easing:"sineIn"}).by(.04,{scaleY:-.1,scaleX:.1,y:-10},{easing:"sineIn"}).by(.04,{scaleY:.1,scaleX:-.1,y:10},{easing:"sineIn"}).by(.11,{x:10,y:20,scaleY:.05},{easing:"sineIn"}).by(.15,{x:10,y:-25},{easing:"sineIn"}).delay(1).call(function(){o.click()}).start()})},e.prototype.click=function(){cc.director.emit("getProp",{id:this.id,node:this.node})},e.prototype.move=function(t){var e=this;this.node.removeComponent(cc.Button),cc.tween(this.node).to(.4,{position:t},{easing:"sineOut"}).start(),cc.tween(this.GetGameObject("img")).to(.4,{scale:1}).call(function(){e.clone()}).start()},e.prototype.clone=function(){var t=this;this.node.removeComponent(cc.Button),cc.tween(this.node).to(.2,{opacity:0},{easing:"sineIn"}).call(function(){t.node.removeFromParent(!0),t.node.destroy()}).start()},r([l],e)}(s.default));o.default=u,cc._RF.pop()},{"../Utils/Utils":"Utils","../framwork/BaseUI":"BaseUI"}]},{},["AudioMgr","BigNumber","HTTP","LongTouchComponent","NumberRoll","Shake","Utils","list_optimize","GameConst","GameEvent","BaseUI","MsgHints","User","UserMsg","bullet","coin","item_monster","item_turret","obstacle","prop","PoolMgr","Singleton","Pop_fail","Pop_level","Pop_shop","Pop_success","gameScene"]);