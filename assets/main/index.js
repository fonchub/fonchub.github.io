window.__require=function t(e,o,n){function i(r,a){if(!o[r]){if(!e[r]){var c=r.split("/");if(c=c[c.length-1],!e[c]){var h="function"==typeof __require&&__require;if(!a&&h)return h(c,!0);if(s)return s(c,!0);throw new Error("Cannot find module '"+r+"'")}r=c}var l=o[r]={exports:{}};e[r][0].call(l.exports,function(t){return i(e[r][1][t]||t)},l,l.exports,t,e,o,n)}return o[r].exports}for(var s="function"==typeof __require&&__require,r=0;r<n.length;r++)i(n[r]);return i}({AnalyticsUtilities:[function(t,e,o){"use strict";cc._RF.push(e,"d8ad26YR+9EN54JGjjiiOQb","AnalyticsUtilities");var n=this&&this.__awaiter||function(t,e,o,n){return new(o||(o=Promise))(function(i,s){function r(t){try{c(n.next(t))}catch(e){s(e)}}function a(t){try{c(n.throw(t))}catch(e){s(e)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(r,a)}c((n=n.apply(t,e||[])).next())})},i=this&&this.__generator||function(t,e){var o,n,i,s,r={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(t){return function(e){return c([t,e])}}function c(s){if(o)throw new TypeError("Generator is already executing.");for(;r;)try{if(o=1,n&&(i=2&s[0]?n.return:s[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,s[1])).done)return i;switch(n=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return r.label++,{value:s[1],done:!1};case 5:r.label++,n=s[1],s=[0];continue;case 7:s=r.ops.pop(),r.trys.pop();continue;default:if(!(i=(i=r.trys).length>0&&i[i.length-1])&&(6===s[0]||2===s[0])){r=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){r.label=s[1];break}if(6===s[0]&&r.label<i[1]){r.label=i[1],i=s;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(s);break}i[2]&&r.ops.pop(),r.trys.pop();continue}s=e.call(t,r)}catch(a){s=[6,a],n=0}finally{o=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var s=function(){function t(){}return t.logEvent=function(t,e){return void 0===e&&(e=null),n(this,void 0,void 0,function(){var o;return i(this,function(){return o=null,"undefined"!=typeof gmbox&&gmbox.logEvent&&(null!=e?e.event=t:e={event:t},gmbox.logEvent(e),o="gmbox"),"undefined"!=typeof FBInstant&&FBInstant.logEvent&&(FBInstant.logEvent(t,1,e),o="FB"),"undefined"!=typeof wx&&wx.aldSendEvent&&(wx.aldSendEvent(t,e),o="wx"),console.info("\u6253\u70b9"+o+": event = "+t+", bundle = "+JSON.stringify(e)),[2]})})},t}();o.default=s,cc._RF.pop()},{}],AudioMgr:[function(t,e,o){"use strict";cc._RF.push(e,"c4310qOOsJLaZuNAeTaQNgO","AudioMgr");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0});var s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.bgmVolume=1,e.sfxVolume=1,e.bgmAudioID=-1,e.audioId=-1,e.bgmAudio=null,e.lastplaysfxtime={},e.sfxcd={zb1:1500,zb2:1500,hit:300,merge_success:100,skill_freeze:300,skill_slow:300},e}return i(e,t),e.prototype.loadSounds=function(){var t=cc.sys.localStorage.getItem("bgmVolume"),e=cc.sys.localStorage.getItem("sfxVolume");this.bgmVolume=0==t?1:Number(t),this.sfxVolume=0==e?1:Number(e)},e.prototype.getUrl=function(t){return cc.loader.getRes("sounds/"+t)},e.prototype.playBGM=function(t){t&&(this.bgmAudio=t,this.bgmAudioID>=0&&cc.audioEngine.stop(this.bgmAudioID),this.bgmVolume>0&&(this.bgmAudioID=cc.audioEngine.play(t,!0,this.bgmVolume)))},e.prototype.stopSFX=function(t){return cc.audioEngine.stop(t)},e.prototype.playSFX=function(t){if(this.sfxVolume>0)return this.audioId=cc.audioEngine.play(t,!1,this.sfxVolume),this.audioId},e.prototype.playdubbing=function(t){var e=cc.loader.getRes("dubbing/"+t);if(this.sfxVolume>0)return this.audioId=cc.audioEngine.play(e,!1,this.sfxVolume),this.audioId},e.prototype.pauseBGM=function(){this.bgmAudioID>=0&&cc.audioEngine.pause(this.bgmAudioID)},e.prototype.resumBGM=function(){this.bgmAudioID>=0&&cc.audioEngine.resume(this.bgmAudioID)},e.prototype.setBGMVolume=function(t,e){void 0===e&&(e=!1),(this.bgmVolume!=t||e)&&(cc.sys.localStorage.setItem("bgmVolume",t),this.bgmVolume=t,cc.audioEngine.setVolume(this.bgmAudioID,t)),this.bgmAudioID>=0?t>0?cc.audioEngine.resume(this.bgmAudioID):cc.audioEngine.pause(this.bgmAudioID):this.playBGM(this.bgmAudio)},e.prototype.setSFXVolume=function(t,e){void 0===e&&(e=!1),(this.sfxVolume!=t||e)&&(cc.sys.localStorage.setItem("sfxVolume",t),this.sfxVolume=t)},e}(t("../manager/Singleton").default);o.default=s,cc._RF.pop()},{"../manager/Singleton":"Singleton"}],BaseUI:[function(t,e,o){"use strict";cc._RF.push(e,"42f9dvGvrxMt6F8mhGvx9Ao","BaseUI");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=this&&this.__decorate||function(t,e,o,n){var i,s=arguments.length,r=s<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(r=(s<3?i(r):s>3?i(e,o,r):i(e,o))||r);return s>3&&r&&Object.defineProperty(e,o,r),r},r=this&&this.__awaiter||function(t,e,o,n){return new(o||(o=Promise))(function(i,s){function r(t){try{c(n.next(t))}catch(e){s(e)}}function a(t){try{c(n.throw(t))}catch(e){s(e)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(r,a)}c((n=n.apply(t,e||[])).next())})},a=this&&this.__generator||function(t,e){var o,n,i,s,r={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(t){return function(e){return c([t,e])}}function c(s){if(o)throw new TypeError("Generator is already executing.");for(;r;)try{if(o=1,n&&(i=2&s[0]?n.return:s[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,s[1])).done)return i;switch(n=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return r.label++,{value:s[1],done:!1};case 5:r.label++,n=s[1],s=[0];continue;case 7:s=r.ops.pop(),r.trys.pop();continue;default:if(!(i=(i=r.trys).length>0&&i[i.length-1])&&(6===s[0]||2===s[0])){r=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){r.label=s[1];break}if(6===s[0]&&r.label<i[1]){r.label=i[1],i=s;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(s);break}i[2]&&r.ops.pop(),r.trys.pop();continue}s=e.call(t,r)}catch(a){s=[6,a],n=0}finally{o=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}},c=this&&this.__spreadArrays||function(){for(var t=0,e=0,o=arguments.length;e<o;e++)t+=arguments[e].length;var n=Array(t),i=0;for(e=0;e<o;e++)for(var s=arguments[e],r=0,a=s.length;r<a;r++,i++)n[i]=s[r];return n};Object.defineProperty(o,"__esModule",{value:!0});var h=t("../event/GameEvent"),l=t("../utils/Utils"),u=cc._decorator,d=u.ccclass,p=(u.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.events=[],e.m_objects=new Map,e}var o;return i(e,t),o=e,e.prototype.onBtnClicked=function(t){switch(t.target.name){case"btn_close":this.closeUI()}},e.prototype.onLoad=function(){this.events=[]},e.prototype._findInChildren=function(t,e){var o=t.getChildByName(e);if(o)return o;if(0==t.childrenCount)return null;for(var n=0;n<t.childrenCount;++n){var i=this._findInChildren(t.children[n],e);if(i)return i}return null},e.prototype.GetGameObject=function(t,e){if(void 0===e&&(e=!1),!cc.isValid(this.node))return null;if(!e){if(this.m_objects&&this.m_objects.has(t))return this.m_objects[t];if(t==this.node.name)return this.node}var o;return-1!=t.indexOf("/")?((o=cc.find(t,this.node))&&(this.m_objects[t]=o),o):((o=this._findInChildren(this.node,t))&&(this.m_objects[t]=o),o)},e.prototype.GetSkeleton=function(t){if(this.m_objects&&this.m_objects.has(t))return this.m_objects[t].getComponent(sp.Skeleton);var e=this.GetGameObject(t);return e?e.getComponent(sp.Skeleton):null},e.prototype.GetSprite=function(t){if(this.m_objects&&this.m_objects.has(t))return this.m_objects[t].getComponent(cc.Sprite);var e=this.GetGameObject(t);return e?e.getComponent(cc.Sprite):null},e.prototype.SetSprite=function(t,e){return r(this,void 0,void 0,function(){var o=this;return a(this,function(){return[2,new Promise(function(n){var i=o.GetSprite(t);i&&l.default.loadRes(e,cc.SpriteFrame).then(function(t){cc.isValid(o.node)&&(i.spriteFrame=t,n(null))})})]})})},e.prototype.SetUrlSprite=function(t,e){return r(this,void 0,void 0,function(){var o=this;return a(this,function(){return[2,new Promise(function(n){var i=o.GetSprite(t);i&&l.default.load(e).then(function(t){cc.isValid(o.node)&&(i.spriteFrame=t,n(null))})})]})})},e.prototype.GetUrlSprite=function(t){return r(this,void 0,void 0,function(){var e=this;return a(this,function(){return[2,new Promise(function(o){l.default.load(t).then(function(t){cc.isValid(e.node)&&o(t)})})]})})},e.prototype.GetPrefab=function(t){return r(this,void 0,void 0,function(){var e=this;return a(this,function(){return[2,new Promise(function(o){l.default.loadRes(t,cc.Prefab).then(function(t){cc.isValid(e.node)&&o(t)})})]})})},e.prototype.GetJson=function(t){return r(this,void 0,void 0,function(){var e=this;return a(this,function(){return[2,new Promise(function(o){l.default.loadRes(t,cc.JsonAsset).then(function(t){cc.isValid(e.node)&&o(t)})})]})})},e.prototype.GetText=function(t){if(this.m_objects&&this.m_objects.has(t))return this.m_objects[t].getComponent(cc.Label);var e=this.GetGameObject(t);return e?e.getComponent(cc.Label):null},e.prototype.GetRichText=function(t){if(this.m_objects&&this.m_objects.has(t))return this.m_objects[t].getComponent(cc.RichText);var e=this.GetGameObject(t);return e?e.getComponent(cc.RichText):null},e.prototype.GetProgressBar=function(t){if(this.m_objects&&this.m_objects.has(t))return this.m_objects[t].getComponent(cc.ProgressBar);var e=this.GetGameObject(t);return e?e.getComponent(cc.ProgressBar):null},e.prototype.GetButton=function(t){if(this.m_objects&&this.m_objects.has(t))return this.m_objects[t].getComponent(cc.Button);var e=this.GetGameObject(t);return e?e.getComponent(cc.Button):null},e.prototype.GetInputField=function(t){if(this.m_objects&&this.m_objects.has(t))return this.m_objects[t].getComponent(cc.EditBox);var e=this.GetGameObject(t);return e?e.getComponent(cc.EditBox):null},e.prototype.GetSlider=function(t){if(this.m_objects&&this.m_objects.has(t))return this.m_objects[t].getComponent(cc.Slider);var e=this.GetGameObject(t);return e?e.getComponent(cc.Slider):null},e.prototype.ShowLoading=function(){cc.find("loadingLayer").active=!0},e.prototype.HideLoading=function(){cc.find("loadingLayer").active=!1},e.prototype.SetText=function(t,e){this.GetText(t)&&(this.GetText(t).string=e)},e.prototype.SetInputText=function(t,e){this.GetInputField(t)&&(this.GetInputField(t).string=e)},e.prototype.SetProgressBar=function(t,e){this.GetProgressBar(t)&&(this.GetProgressBar(t).progress=e)},e.prototype.SliceNickname=function(t,e){return t&&t.length>e?t.slice(0,e)+"...":t},e.prototype._isSkipNode=function(t){return this.node!=t&&null!=t.getComponent(o)},e.prototype.getChildByName=function(t,e){return cc.find(t,e||this.node)},e.prototype.startAnim=function(){if(this.node){this.node.opacity=0,this.node.active=!0,this.node.setScale(.8,.8);var t=cc.delayTime(.1),e=cc.fadeIn(.1),o=cc.scaleTo(.1,1);this.node.runAction(cc.spawn(t.clone(),e,t.clone(),o))}},e.prototype.shutAnim=function(){this.node&&(this.node.active=!1,this.node.parent=null,this.node.destroy())},e.prototype.closeUI=function(){this.shutAnim()},e.prototype.onDestroy=function(){for(var t=0;t<this.events.length;++t)h.default.Instance().unregister(this,this.events[t])},e.prototype.rigester=function(t,e){this.events.push(t),h.default.Instance().register(this,t,e)},e.prototype.unregister=function(t){h.default.Instance().unregister(this,t)},e.prototype.dispatch=function(t){for(var e,o=[],n=1;n<arguments.length;n++)o[n-1]=arguments[n];(e=h.default.Instance()).dispatch.apply(e,c([t],o))},e.prototype.playSkAni=function(t,e,o,n,i){return void 0===i&&(i=-1),r(this,void 0,void 0,function(){var s,r,c;return a(this,function(a){switch(a.label){case 0:return(s=new cc.Node).parent=o,s.position=n,r=s.addComponent(sp.Skeleton),[4,l.default.loadRes(t,sp.SkeletonData)];case 1:return c=a.sent(),r.skeletonData=c,r.premultipliedAlpha=!1,r.setAnimation(0,e,!1),-1!=i&&s.runAction(cc.sequence(cc.delayTime(i),cc.callFunc(function(){s.parent=null}))),[2,s]}})})},e.prototype.localConvertWorldPointAR=function(t){return t?t.convertToWorldSpaceAR(cc.v2(0,0)):null},e.prototype.localConvertWorldPoint=function(t){return t?t.convertToWorldSpace(cc.v2(0,0)):null},e.prototype.worldConvertLocalPointAR=function(t,e){return t?t.convertToNodeSpaceAR(e):null},e.prototype.worldConvertLocalPoint=function(t,e){return t?t.convertToNodeSpace(e):null},e.prototype.convetOtherNodeSpace=function(t,e){if(!t||!e)return null;var o=this.localConvertWorldPoint(t);return this.worldConvertLocalPoint(e,o)},e.prototype.convetOtherNodeSpaceAR=function(t,e){if(!t||!e)return null;var o=this.localConvertWorldPointAR(t);return this.worldConvertLocalPointAR(e,o)},o=s([d],e)}(cc.Component));o.default=p,cc._RF.pop()},{"../event/GameEvent":"GameEvent","../utils/Utils":"Utils"}],BigNumber:[function(t,e,o){"use strict";cc._RF.push(e,"29779EDnrJPKp0TmDE+JGoq","BigNumber");var n=this&&this.__decorate||function(t,e,o,n){var i,s=arguments.length,r=s<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(r=(s<3?i(r):s>3?i(e,o,r):i(e,o))||r);return s>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var i=cc._decorator,s=i.ccclass,r=(i.property,function(){function t(){}var e;return e=t,t.getN=function(t){for(var o=0;o<e.aLetters.length;){if(e.aLetters[o]==t)return Math.pow(10,e.aLetters[o+1]);o+=2}return 0},t.getLargeString=function(t,o,n){if(void 0===o&&(o="K"),void 0===n&&(n=!0),0==t)return t+"";for(var i=NaN,s=Math.round(t/Math.abs(t)),r=t=Math.abs(t),a=0,c=0,h=0,l=0;l<e.aLetters.length;){if(e.aLetters[l]==o){c=l;break}l+=2}if(t<Math.pow(10,e.aLetters[c+1]))a=-1;else{for(i=Math.pow(10,e.aLetters[c+1]),a=c/2;r/1e3>=i;)r/=1e3,a++;for(;r/1e3>=1e3;)r/=1e3}return-1==a?e.addSeparators(Math.round((t-.5)*s).toString()):(r/1e3<10?h=2:r/1e3<100&&(h=1),r/=Math.pow(10,3-h),r=parseInt(r),r/=Math.pow(10,h),n?(r*s).toFixed(2)+""+e.aLetters[2*a]:(r*s).toString()+""+e.aLetters[2*a])},t.addSeparators=function(t,e){void 0===e&&(e=",");var o="-"==t.charAt(0);o&&(t=t.substr(1));for(var n="",i=0,s=t.length-1;s>0;)n=t.charAt(s)+n,++i%3==0&&(n=e+n),s-=1;return n=t.charAt(0)+n,o&&(n="-"+n),n},t.convertToLargeString=function(t){return e.getStringOfNumber(t)},t.getStringOfNumber=function(t,e,o,n){void 0===e&&(e=!1),void 0===o&&(o=!1),void 0===n&&(n=!1);var i=1;n&&(i=10);var s=Math.round(t);if(Math.round(t)>=1e6&&s<1e9&&e)return(Math.round(s/1e3/i)/(1e3/i)).toString()+" M";if(s>=1e9&&s<1e12)return(Math.round(s/1e6/i)/(1e3/i)).toString()+" B";if(s>=1e12&&s<1e15)return(Math.round(s/1e9/i)/(1e3/i)).toString()+" T";if(s>=1e15&&s<1e18)return(Math.round(s/1e12/i)/(1e3/i)).toString()+" q";if(s>=1e18&&s<1e21)return(Math.round(s/1e15/i)/(1e3/i)).toString()+" Qq";if(s>=1e21&&s<1e24)return(Math.round(s/1e18/i)/(1e3/i)).toString()+" s";if(s>=1e24&&s<1e27)return(Math.round(s/1e21/i)/(1e3/i)).toString()+" Ss";if(s>=1e27&&s<1e30)return(Math.round(s/1e24/i)/(1e3/i)).toString()+" O";if(s>=1e30&&s<1e33)return(Math.round(s/1e27/i)/(1e3/i)).toString()+" N";if(s>=1e33&&s<1e26)return(Math.round(s/1e30/i)/(1e3/i)).toString()+" d";if(s>=1e26&&s<1e29)return(Math.round(s/1e33/i)/(1e3/i)).toString()+" U";if(s>=1e29&&s<1e32)return(Math.round(s/1e26/i)/(1e3/i)).toString()+" Dd";var r=" ";o&&(r=",");for(var a="",c=String(Math.round(t)),h=String(Math.round(t)).length-1;h>=0;)3==(a=c.charAt(h)+a).length&&0!=h&&(a=r+a),7==a.length&&0!=h&&(a=r+a),h-=1;return a},t.aLetters=["K",3,"M",6,"B",9,"T",12,"aa",15,"bb",18,"cc",21,"dd",24,"ee",27,"ff",30,"gg",33,"hh",36,"ii",39,"jj",42,"kk",45,"ll",48,"mm",51,"nn",54,"oo",57,"pp",60,"qq",63,"rr",66,"ss",69,"tt",72,"uu",75,"vv",78,"ww",81,"xx",84,"yy",87,"zz",90,"aaa",93,"bbb",96,"ccc",99,"ddd",102,"eee",105,"fff",108,"ggg",111,"hhh",114,"iii",117,"jjj",120,"kkk",123,"lll",126,"mmm",129,"nnn",132,"ooo",135,"ppp",138,"qqq",141,"rrr",144,"sss",147,"ttt",150,"uuu",153,"vvv",156,"www",159,"xxx",162,"yyy",165,"zzz"],e=n([s],t)}());o.default=r,cc._RF.pop()},{}],Bird:[function(t,e,o){"use strict";cc._RF.push(e,"e0563LqWcVKuqhnH3im6+AG","Bird");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=this&&this.__decorate||function(t,e,o,n){var i,s=arguments.length,r=s<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(r=(s<3?i(r):s>3?i(e,o,r):i(e,o))||r);return s>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=t("../framwork/BaseUI"),a=t("../utils/Utils"),c=cc._decorator,h=c.ccclass,l=(c.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.speed=0,e.trailing=null,e.birdIcon=null,e.progress=null,e._type=0,e._isAlive=!1,e._invincible=!1,e._invincibleTime=0,e}return i(e,t),e.prototype.onLoad=function(){this.trailing=this.GetGameObject("trailing"),this.birdIcon=this.GetSprite("icon"),this.progress=this.GetProgressBar("progress"),cc.systemEvent.on("UPDATE_SELECT_SKIN",this.changeNormalIcon,this),this._type=cc.find("Canvas").getComponent("GameModel")._birdType,this._isAlive=!0,this._invincible=!1,this._invincibleTime=0,this.node.getComponent(cc.RigidBody).linearVelocity=new cc.Vec2(this.speed,0)},e.prototype.start=function(){},e.prototype.onEndContact=function(t,e,o){"grass"==o.node.group&&(e.node.getChildByName("bird_huichen").active=!1)},e.prototype.onPreSolve=function(t,e,o){if(this._isAlive&&"thorn"==o.node.group)return console.log("ppppppppppp"),cc.systemEvent.emit("GAME_OVER");(this._isAlive&&"grass"==o.node.group||"ground"==o.node.group)&&(t.getWorldManifold(),this._isAlive&&e.node.x<o.node.x&&Math.abs(this.node.y-o.node.y)<this.node.height/2&&(this._invincible?o.node.y<=-cc.winSize.height/2+50*cc.find("Canvas").getComponent("GameModel")._underLineNumber+this.node.width/2||o.node.destroy():(console.log("invincible"),cc.systemEvent.emit("GAME_OVER"))))},e.prototype.update=function(){this._isAlive&&this.changeNormalIcon()},e.prototype.showDeadAnim=function(){var t=this;a.default.GetPrefab("prefab/item/dead",function(e){var o=cc.instantiate(e);o.active=!0,t.node.addChild(o)},this)},e.prototype.onBeginContact=function(t,e,o){if(cc.find("Canvas").getComponent("GameModel").isGameStart){if(this._isAlive&&"thorn"==o.node.group)return console.log("invincible"),cc.systemEvent.emit("GAME_OVER");"grass"==o.node.group&&this._isAlive,(this._isAlive&&"grass"==o.node.group||"ground"==o.node.group)&&(t.getWorldManifold(),this._isAlive&&e.node.x<o.node.x&&Math.abs(this.node.y-o.node.y)<this.node.height/2&&this._invincible&&(o.node.y<=-cc.winSize.height/2+50*cc.find("Canvas").getComponent("GameModel")._underLineNumber+this.node.width/2||o.node.destroy(),cc.systemEvent.emit("GAME_OVER"),this.showDeadAnim()))}},e.prototype.showTrailing=function(){var t=this;this.GetGameObject("trailing").active=!0,this.scheduleOnce(function(){t.GetGameObject("trailing").getComponent(cc.MotionStreak).color=cc.color(0,0,0,57)},.5)},e.prototype.hideTrailing=function(){this.GetGameObject("trailing").getComponent(cc.MotionStreak).color=cc.color(0,0,0,0),this.GetGameObject("trailing").getComponent(cc.MotionStreak).reset(),this.GetGameObject("trailing").active=!1},e.prototype.setSpeed=function(t){this.speed=t,this.node.getComponent(cc.RigidBody).linearVelocity=new cc.Vec2(this.speed,0)},e.prototype.setBang=function(){this._isAlive=!1,this.node.angle=45,this.node.getComponent(cc.RigidBody).gravityScale=0,this.changeBangIcon()},e.prototype.changeNormalIcon=function(){this._type=cc.find("Canvas").getComponent("GameModel")._birdType,a.default.setSpriteAssets(this.birdIcon,"bird")},e.prototype.changeBangIcon=function(){this._isAlive=!1,a.default.setSpriteAssets(this.birdIcon,"bird")},s([h],e)}(r.default));o.default=l,cc._RF.pop()},{"../framwork/BaseUI":"BaseUI","../utils/Utils":"Utils"}],Bullet:[function(t,e,o){"use strict";cc._RF.push(e,"29cc5sSXy1MDLDYycl+T+s1","Bullet");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=this&&this.__decorate||function(t,e,o,n){var i,s=arguments.length,r=s<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(r=(s<3?i(r):s>3?i(e,o,r):i(e,o))||r);return s>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=t("../framwork/BaseUI"),a=cc._decorator,c=a.ccclass,h=(a.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._bird=null,e._pool=null,e}return i(e,t),e.prototype.onLoad=function(){},e.prototype.onBeginContact=function(t,e,o){"grass"!=o.node.group&&"ground"!=o.node.group&&"thorn"!=o.node.group||this._pool},e.prototype.setPool=function(t){this._pool=t},e.prototype.setBird=function(t){this._bird=t},e.prototype.update=function(){this._bird&&Math.abs(this.node.x-this._bird.x)>cc.winSize.width/2+200?this._pool?this._pool.put(this.node):this.node.destroy():this.node.x+=35},e.prototype.start=function(){setTimeout(function(){this.node&&(this._pool?this._pool.put(this.node):this.node.destroy())}.bind(this),3e3)},s([c],e)}(r.default));o.default=h,cc._RF.pop()},{"../framwork/BaseUI":"BaseUI"}],CollectAnimation:[function(t,e,o){"use strict";cc._RF.push(e,"b99b16EtIlNPIt/oWO3inpG","CollectAnimation"),Object.defineProperty(o,"__esModule",{value:!0});var n=function(){function t(){this.mCloneNode=null;var t=new cc.Node;this.mCloneNode=t,this.mNodePool=new cc.NodePool;for(var e=0;e<10;e++){var o=cc.instantiate(this.mCloneNode);this.mNodePool.put(o)}}return t.prototype.getNode=function(){return this.mNodePool.size()>0?this.mNodePool.get():cc.instantiate(this.mCloneNode)},t.prototype.playAnimation=function(t,e,o,n,i,s,r){void 0===n&&(n=null);var a=[];t.scale=0;var c=cc.spawn(cc.scaleTo(i,1).easing(cc.easeOut(3)),cc.moveTo(i,o).easing(cc.easeOut(3))),h=r*(1+Math.random())/2;a.push(c),a.push(cc.delayTime(s)),a.push(cc.moveTo(h,e).easing(cc.easeIn(3))),a.push(cc.callFunc(function(){n&&n(),this.mNodePool.put(t)},this)),t.stopAllActions(),t.runAction(cc.sequence(a))},t.prototype.play=function(t,e,o,n,i,s,r,a){void 0===i&&(i=null),void 0===s&&(s=.6),void 0===r&&(r=0),void 0===a&&(a=.8);for(var c=0;c<o;c++){var h=360/o*c,l=t.x+(n-.2*n*Math.random())*Math.cos(h*Math.PI/180),u=t.y+(n-.2*n*Math.random())*Math.sin(h*Math.PI/180),d=cc.v2(l,u),p=this.getNode();p.parent=cc.find("Canvas"),p.position=t,p.zIndex=cc.macro.MAX_ZINDEX,p.active=!0,this.playAnimation(p,e,d,i,s,r,a)}},t}();o.default=n,cc._RF.pop()},{}],Config:[function(t,e,o){"use strict";cc._RF.push(e,"10236Lr7+FIlrtppKmkFdJy","Config"),Object.defineProperty(o,"__esModule",{value:!0}),o.diciConfig=void 0,o.diciConfig={1:[cc.color(228,228,228),cc.color(0,104,185,.6)],2:[cc.color(250,190,0),cc.color(241,171,25,.6)],3:[cc.color(255,174,174),cc.color(209,110,110,.6)],4:[cc.color(4,236,4),cc.color(23,192,0,.6)],5:[cc.color(24,24,29),cc.color(0,0,0,.6)],6:[cc.color(7,146,255),cc.color(0,104,185,.6)]},cc._RF.pop()},{}],Egg:[function(t,e,o){"use strict";cc._RF.push(e,"1f96f1TUwNJK4S1ByV02hdb","Egg");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=this&&this.__decorate||function(t,e,o,n){var i,s=arguments.length,r=s<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(r=(s<3?i(r):s>3?i(e,o,r):i(e,o))||r);return s>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=t("../Config"),a=t("../framwork/BaseUI"),c=cc._decorator,h=c.ccclass,l=(c.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.speed=0,e._type=null,e._enable=!0,e._isStop=!1,e.dici=null,e}return i(e,t),e.prototype.onEndContact=function(t,e,o){"grass"==o.node.group&&(e.node.getChildByName("bird_huichen").active=!1)},e.prototype.onBeginContact=function(t,e,o){if(this._enable){if("bird"!=o.node.group||o.node.getComponent("Bird")._isAlive||(t.disabled=!0),"thorn"==o.node.group&&(this.GetGameObject("icon").active=!1,this._enable=!1,this.dici)){var n=cc.instantiate(this.dici);n.active=!0,this.node.addChild(n);var i=cc.find("Canvas").getComponent("GameModel")._birdType||"1",s=n.getComponent(cc.ParticleSystem);s&&(s.startColor=r.diciConfig[i][0],s.endColor=r.diciConfig[i][1]),this.node.removeComponent(cc.RigidBody),setTimeout(function(){e.node&&e.node.isValid&&e.node.destroy()},500)}"grass"!=o.node.group&&"ground"!=o.node.group||Math.abs(e.node.y-o.node.y)<76&&(e.node._isStop=!0,this.setSpeed(-300)),o.node.group}},e.prototype.setSpriteFrmeFir=function(t){this.GetSprite("icon").spriteFrame=new cc.SpriteFrame(t)},e.prototype.setDiCi=function(t){this.dici=t},e.prototype.changeNormal=function(){this._isStop=!1,this.node._isStop=!1,this._type=cc.find("Canvas").getComponent("GameModel")._birdType,this.setSpeed(0)},e.prototype.start=function(){this._type=cc.find("Canvas").getComponent("GameModel")._birdType},e.prototype.setSpeed=function(t){this.speed=t,this.node.getComponent(cc.RigidBody).linearVelocity=new cc.Vec2(this.speed,0)},e.prototype.onLoad=function(){cc.systemEvent.on("UPDATE_SELECT_SKIN",this.changeNormal,this),this._type=cc.find("Canvas").getComponent("GameModel")._birdType,this._enable=!0,this.node.getComponent(cc.RigidBody).linearVelocity=new cc.Vec2(this.speed,0)},s([h],e)}(a.default));o.default=l,cc._RF.pop()},{"../Config":"Config","../framwork/BaseUI":"BaseUI"}],EventEmit:[function(t,e,o){"use strict";cc._RF.push(e,"27b55N1typINLkjMrprME6G","EventEmit");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=this&&this.__decorate||function(t,e,o,n){var i,s=arguments.length,r=s<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(r=(s<3?i(r):s>3?i(e,o,r):i(e,o))||r);return s>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=t("./framwork/BaseUI"),a=t("./utils/AnalyticsUtilities"),c=cc._decorator,h=c.ccclass,l=(c.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.camera=null,e.topNode=null,e.progress=null,e.midLabel=null,e.goldPanel=null,e.level=null,e.scoreboard=null,e.miLabel=null,e._perfectIconArr=[],e._showPerfectCount=0,e.scorePos=null,e.progressAnalytics=0,e}return i(e,t),e.prototype.onLoad=function(){this.camera=this.GetGameObject("Main Camera"),this.progress=this.GetSprite("progressbar"),this.topNode=this.GetGameObject("ui_level"),this.scoreboard=this.GetGameObject("scoreboard"),this.level=this.GetText("lab_level"),this.miLabel=this.GetText("lab_mi"),cc.systemEvent.on("CLEAR_PERFECT_ICON",this.clearPrefectIcon,this),cc.systemEvent.on("CHANGE_CASH",this.changeCash,this),cc.systemEvent.on("PLAY_GOLD_ANIMATION",this.playGoldCollectAnimation,this),this.node.on(cc.Node.EventType.TOUCH_START,this.onTouchStart,this),this.node.on(cc.Node.EventType.TOUCH_MOVE,this.onTouchMove,this),this.node.on(cc.Node.EventType.TOUCH_END,this.onTouchEnd,this),this._perfectIconArr=[],this._showPerfectCount=0,this.scorePos=this.GetGameObject("scoreboard").position},e.prototype.onReadyGameState=function(){this.clearPrefectIcon(),this.hideTopNode(),this.scoreboard.active=!1,this.resetProgress(),console.log("onReadyGameState"),this.GetGameObject("addSpeed").active=!1,this.miLabel.string="0"},e.prototype.onStartGameState=function(){this.scoreboard.active=!0,cc.find("Canvas").getComponent("GameModel").isEndless?(this.hideTopNode(),this.scoreboard.x=0):(this.showTopNode(),this.scoreboard.x=this.scorePos.x),this.GetGameObject("addSpeed").active=!1,this.miLabel.string="0",console.log("onStartGameState"),this.GetGameObject("startBtn").active=!1,this.GetGameObject("lessBtn").active=!1},e.prototype.getProgress=function(){return this.progress.fillRange},e.prototype.changeScoreLabel=function(){},e.prototype.resetProgress=function(){this.progress.fillRange=0;for(var t=1;t<=3;t++)this.GetGameObject("star"+t).active=!1;this.miLabel.string="0"},e.prototype.changeProgress=function(t,e,o){this.progress.fillRange=t,e&&this.updateScore(e,o),this.reportProgress()},e.prototype.updateXing=function(t){t<1||this.GetGameObject("star"+t).active||(this.GetGameObject("star"+t).scale=0,this.GetGameObject("star"+t).active=!0,cc.tween(this.GetGameObject("star"+t)).to(.2,{scale:1.2},{easing:"sineOut"}).to(.15,{scale:1},{easing:"sineIn"}).start())},e.prototype.updateScore=function(t,e){this.miLabel.string=t+e+""},e.prototype.reportProgress=function(){1==cc.find("Canvas").getComponent("GameModel")._level&&(this.progressAnalytics||(this.progressAnalytics=10),100*this.progress.fillRange>=this.progressAnalytics&&(a.default.logEvent("game_progress",{gameLevel:cc.find("Canvas").getComponent("GameModel")._level,progress:this.progressAnalytics+"%"}),10===this.progressAnalytics?this.progressAnalytics=30:30===this.progressAnalytics?this.progressAnalytics=50:50===this.progressAnalytics?this.progressAnalytics=70:70===this.progressAnalytics&&(this.progressAnalytics=200)))},e.prototype.start=function(){this.changeCash()},e.prototype.changeCash=function(){},e.prototype.clearPrefectIcon=function(){for(var t=0;t<this._perfectIconArr.length;t++)this._perfectIconArr[t].destroy();this._perfectIconArr=[],this._showPerfectCount=0},e.prototype.playGoldCollectAnimation=function(){window.goldCollectAnimation.play(cc.v2(this.camera.x,0),cc.v2(this.goldPanel.x+this.camera.x,this.goldPanel.y),5,200)},e.prototype.onTouchStart=function(){cc.systemEvent.emit("TOUCH_START")},e.prototype.onTouchMove=function(){cc.systemEvent.emit("TOUCH_MOVE")},e.prototype.onTouchEnd=function(){cc.systemEvent.emit("TOUCH_END")},e.prototype.showTopNode=function(){cc.find("Canvas").getComponent("GameModel").isEndless||(this.topNode.active=!0,this.changeLv()),a.default.logEvent("game_start",{gameLevel:cc.find("Canvas").getComponent("GameModel")._level})},e.prototype.hideTopNode=function(){this.topNode.active=!1},e.prototype.changeLv=function(){this.level.string=cc.find("Canvas").getComponent("GameModel")._level},s([h],e)}(r.default));o.default=l,cc._RF.pop()},{"./framwork/BaseUI":"BaseUI","./utils/AnalyticsUtilities":"AnalyticsUtilities"}],GameConst:[function(t,e,o){"use strict";cc._RF.push(e,"5724dXIcyZJlaeMpHDcMjP+","GameConst"),Object.defineProperty(o,"__esModule",{value:!0}),o.GAME_NAME=void 0;var n=function(){function t(){}return t.local_data_key="PVSZ1001",t.OPEN_WEITUOMAIDAN="OPEN_WEITUOMAIDAN",t.NEW_PLANT="NEW_PLANT",t.BUY_PLANT="BUY_PLANT",t}();o.default=n,o.GAME_NAME="PVSZ",cc._RF.pop()},{}],GameEvent:[function(t,e,o){"use strict";cc._RF.push(e,"c7159/ZI8FDoLZmT4PdLaLG","GameEvent");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0});var s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.eventHash={},e.ower=null,e.type=null,e}return i(e,t),e.prototype.register=function(t,e,o){var n={};n.ower=t,n.type=e,n.callback=o,this.eventHash.hasOwnProperty(e)||(this.eventHash[e]=[]),this.eventHash[e].push(n)},e.prototype.unregister=function(t,e){var o=this.eventHash[e];o&&o.length>0&&o.forEach(function(n,i){n.ower===t&&n.type===e&&o.splice(i,1)})},e.prototype.dispatch=function(t){for(var e=[],o=1;o<arguments.length;o++)e[o-1]=arguments[o];var n=this.eventHash[t];if(n&&n.length>0)for(var i in n){var s=n[i];s.callback&&s.callback.apply(s,e)}},e}(t("../manager/Singleton").default);o.default=s,cc._RF.pop()},{"../manager/Singleton":"Singleton"}],GameInfo:[function(t,e,o){"use strict";cc._RF.push(e,"70a1eHDbtpKbo3Dkie25kO/","GameInfo"),Object.defineProperty(o,"__esModule",{value:!0});var n=t("../framwork/UserMsg");o.default=new function(){n.UserMsg.gameType=window.platform.getGameMode(),n.UserMsg.gameLevel=window.platform.getGameLevel(),n.UserMsg.gameLevelTotal=window.platform.getGameLevelTotal()},cc._RF.pop()},{"../framwork/UserMsg":"UserMsg"}],GameModel:[function(t,e){"use strict";function o(t,e){var o="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(o)return(o=o.call(t)).next.bind(o);if(Array.isArray(t)||(o=n(t))||e&&t&&"number"==typeof t.length){o&&(t=o);var i=0;return function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function n(t,e){if(t){if("string"==typeof t)return i(t,e);var o=Object.prototype.toString.call(t).slice(8,-1);return"Object"===o&&t.constructor&&(o=t.constructor.name),"Map"===o||"Set"===o?Array.from(t):"Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?i(t,e):void 0}}function i(t,e){(null==e||e>t.length)&&(e=t.length);for(var o=0,n=new Array(e);o<e;o++)n[o]=t[o];return n}cc._RF.push(e,"f81bc4/1kpL7Id7zXhsz6yk","GameModel");var s=t("../Script/event/ModuleEventEnum"),r=t("../Script/utils/Utils");cc.Class({extends:cc.Component,properties:{},onWxShow:function(){},onWxHide:function(){},gainEnergy:function(){new Date,this.energy++,this.energyLostTime=this.getLocalTime(),this.energy>=this.maxEnergy&&(this.energy=this.maxEnergy,this.energyLostTime=0),cc.systemEvent.emit("CHANGE_ENERGY"),this.saveData()},isRewardEnergyLimited:function(){return this.rewardEnergyCount>=6},rewardEnergy:function(t){new Date,this.lastRewardEnergyTime=this.getLocalTime(),this.rewardEnergyCount++,this.energy+=t,this.energy>=this.maxEnergy&&(this.energyLostTime=0),this.saveData(),cc.systemEvent.emit("CHANGE_ENERGY")},setLastMapConfig:function(t){this._lastMapConfig=t,this.saveData()},isHaveBirdById:function(t){for(var e,n=o(this._haveBird);!(e=n()).done;)if(e.value==Number(t))return!0;return!1},isHaveSceneById:function(t){for(var e,n=o(this._haveScene);!(e=n()).done;)if(e.value==Number(t))return!0;return!1},addBirdByLv:function(){for(var t in this._birdConfig){var e=this._birdConfig[t];5==Number(e.type)&&this._level>Number(e.payMoney)&&this.increaseBird(e.id)}this.saveData(!0)},addScene:function(t){console.log(this._haveScene,"_haveScene");for(var e,n=o(this._haveScene);!(e=n()).done;)if(e.value==Number(t))return;this._haveScene.push(Number(t)),this.saveData(!0),console.log(this._haveScene,"_haveScene")},increaseBird:function(t){for(var e,n=o(this._haveBird);!(e=n()).done;)if(e.value==Number(t))return;this._haveBird.push(Number(t))},applySignReward:function(t,e){console.log("SignIn reward: ",e);var o=this.getLocalTime();this.lastFetchSignInTime=o,this.fetchDays++,String(e.rewardsMoney).indexOf("b")>-1?(this.increaseBird(String(e.rewardsMoney).split("-")[1]),this.saveData()):this.addCash(t?Number(e.rewardsMoney)+Number(e.extreRewards):Number(e.rewardsMoney)),this.saveData(!0),cc.systemEvent.emit("SIGN_IN_STATE"),popUpMgr.getComponent("Pop").removeTop()},addCash:function(t){this.cash+=Number(t),this.saveData(),cc.systemEvent.emit("CHANGE_CASH")},updateBestScore:function(){Number(this._nowScore)<Number(this._bestScore)||(this._bestScore=Number(this._nowScore),this.saveData(),cc.systemEvent.emit("CHANGE_BEST_SCORE"))},getFullTime:function(){var t=this.getNextEnergyTime(),e=this.energy+1;return t+(this.maxEnergy-e)*this.energyCD},getNextEnergyTime:function(){return this.energyLostTime+this.energyCD},deleteEnercy:function(){this.energy--,this.energyLostTime=this.getLocalTime(),this.saveData()},isEnergyFull:function(){return this.energy>=this.maxEnergy},saveData:function(){var t={};t.cash=this.cash,t.energy=1e6,t.energyLostTime=this.energyLostTime,t.lastRewardEnergyTime=this.lastRewardEnergyTime,t.rewardEnergyCount=this.rewardEnergyCount,t.characterVideoCounts=this.characterVideoCounts,t.getGoldTime=this.getGoldTime,t.getGoldCount=this.getGoldCount,t.resultCount=this.resultCount,t.resultTodaySharedTime=this.resultTodaySharedTime,t.fetchDays=this.fetchDays,t.gotNextReward=this.gotNextReward,t.gotAdvanceReward=this.gotAdvanceReward,t.gotNewerReward=this.gotNewerReward,t.lastFetchSignInTime=this.lastFetchSignInTime,t.fetchDays=this.fetchDays,t.gotHoverWinReward=this.gotHoverWinReward,t.gotCollectReward=this.gotCollectReward,t._birdType=this._birdType,t._eggType=this._eggType,t._showGuide=this._showGuide,t._lastMapConfig=this._lastMapConfig,t._lastTopObConfig=this._lastTopObConfig,t._lastBangX=this._lastBangX,t._lastBangY=this._lastBangY,t._level=this._level,t._bestScore=this._bestScore,t._sceneType=this._sceneType,t._haveScene=this._haveScene,t._nowScore=this._nowScore,t._haveBird=this._haveBird,cc.sys.localStorage.setItem("Bird",JSON.stringify(t))},clearData:function(){cc.sys.localStorage.setItem("Bird",JSON.stringify(obj))},readDataFromLocal:function(){var t=cc.sys.localStorage.getItem("Bird");t?(this.localCash=JSON.parse(t),this.formDatas(),this._loadInfo=!0):(this.cash=0,this.energy=10,this.energyLostTime=0,this.characterVideoCounts={},this._loadInfo=!0)},delayInitData:function(){this.gotGameRecord||this.formDatas()},update:function(){this.energy<this.maxEnergy&&(new Date,this.getLocalTime()>=this.energyLostTime+this.energyCD&&this.gainEnergy())},checkNewerShowCondtition:function(){return this.passLevelCount++,this.newerRewardCancelCount>=2&&this.passLevelCount<3?0:this.gotNewerReward?this.gotAdvanceReward?0:"Advance":"Newer"},onLoad:function(){this.isNeedEnergy=!1,this.newcomerConfig=[],this.oldConfig=[],this.cash=0,this.energy=1e3,this.gotNextReward=0,this.gotNewerReward=0,this.gotAdvanceReward=0,this.energyLostTime=0,this.lastRewardEnergyTime=0,this.rewardEnergyCount=0,this.getGoldTime=0,this.getGoldCount=0,this.resultCount=0,this.resultTodaySharedTime=0,this.maxEnergy=1e3,this.energyCD=2e4,this.newerRewardCancelCount=0,this.passLevelCount=0,this.characterVideoCounts={},this.gotHoverWinReward=0,this.gotCollectReward=0,this._haveBird=[1],this._birdType=1,this._eggType=1,this._lastMapConfig=[],this._lastTopObConfig={},this._lastBangX=null,this._lastBangY=null,this._level=1,this._bestScore=0,this._nowScore=0,this._sceneType=1,this._haveScene=[1],this._underLineNumber=5,this._showLuckyCount=1,this._passLv=0,this.localCash={},this.readDataFromLocal(),cc.systemEvent.on(s.GOT_HTTP_RES,this.httpResDeal.bind(this)),this.readDataFromLocal()},checkEnergy:function(){return this.energy>0},getRewardConfig:function(){var t=this.fetchDays;return null==t&&(t=0),t<=7?this.newcomerConfig:this.oldConfig},checkInConfig:function(t,e){if(t)console.error(t);else{var o=e.json;for(var n in o)1==o[n].type?this.newcomerConfig.push(o[n]):2==o[n].type&&this.oldConfig.push(o[n]);this.configLoadAdd()}},initConfig:function(){this.configCount=0,cc.systemEvent.on(s.WX_SHOW,this.onWxShow.bind(this)),cc.systemEvent.on(s.WX_HIDE,this.onWxHide.bind(this)),cc.loader.loadRes("config/GlobalDB",cc.JsonAsset,this.iniGlobalConfig.bind(this)),cc.loader.loadRes("config/ObstacleDB",cc.JsonAsset,this.initObstacleConfig.bind(this)),cc.loader.loadRes("config/BirdDB",cc.JsonAsset,this.initBirdConfig.bind(this)),cc.loader.loadRes("config/SceneDB",cc.JsonAsset,this.initSceneConfig.bind(this)),cc.loader.loadRes("config/CheckinDB",cc.JsonAsset,this.checkInConfig.bind(this))},configLoadAdd:function(){this.configCount++,this.configCount>=5&&cc.systemEvent.emit("CONFIG_LOAD_SUCCESS")},initBirdConfig:function(t,e){for(var o in this._birdConfig={},console.log(e,"bird"),e.json)this._birdConfig[o]=e.json[o];this.configLoadAdd()},initSceneConfig:function(t,e){for(var o in this._sceneConfig={},console.log(e,"scene"),e.json)this._sceneConfig[o]=e.json[o];this.configLoadAdd()},iniGlobalConfig:function(t,e){for(var o in this._globalConfig={},console.log(e,"golbal"),e.json)this._globalConfig[o]=e.json[o];this.cash||(this.cash=Number(this._globalConfig[10001].value)),this.configLoadAdd()},initObstacleConfig:function(t,e){for(var o in this._obstacleConfig=[],e.json)Number(o)>=0&&this._obstacleConfig.push(e.json[o]);this.configLoadAdd()},offlineEnergy:function(t){console.log("offlineEnergy:",t),this._offLineEnergy=t,this.saveData()},addEnergy:function(t){this.energy+=Number(t),cc.systemEvent.emit("CHANGE_ENERGY"),this.saveData()},getTodayGoldCount:function(){return this.getGoldCount&&r.isTimeInToday(this.getGoldTime)?this.getGoldCount:0},getTodayGoldResidueCount:function(){var t=5-this.getTodayGoldCount();return t<0&&(t=0),t},addTodayGoldCount:function(){var t=this.getTodayGoldCount();t++,this.getGoldTime=(new Date).getTime(),this.getGoldCount=t,this.saveData(),cc.systemEvent.emit("CHANGE_GET_GOLD")},getResultCount:function(){return this.resultCount?this.resultCount:0},addResultCount:function(){this.resultCount++,this.saveData()},isResultTodayShared:function(){return this.resultTodaySharedTime&&r.isTimeInToday(this.resultTodaySharedTime)},setResultTodayShared:function(){this.resultTodaySharedTime=(new Date).getTime(),this.saveData()},formDatas:function(t){this.isEndless=!1,this.cash=Number(this.localCash.cash),this.energy=Number(this.localCash.energy),this.energyLostTime=Number(this.localCash.energyLostTime),this.characterVideoCounts=this.localCash.characterVideoCounts,this.lastRewardEnergyTime=Number(this.localCash.lastRewardEnergyTime),this.rewardEnergyCount=Number(this.localCash.rewardEnergyCount),this.getGoldTime=Number(this.localCash.getGoldTime),this.getGoldCount=Number(this.localCash.getGoldCount),this.resultCount=Number(this.localCash.resultCount),this.resultTodaySharedTime=Number(this.localCash.resultTodaySharedTime),this.fetchDays=Number(this.localCash.fetchDays),this.gotNextReward=Number(this.localCash.gotNextReward),this.gotNewerReward=Number(this.localCash.gotNewerReward),this.gotAdvanceReward=Number(this.localCash.gotAdvanceReward),this.lastFetchSignInTime=Number(this.localCash.lastFetchSignInTime),this.fetchDays=Number(this.localCash.fetchDays),this.gotHoverWinReward=Number(this.localCash.gotHoverWinReward),this.gotCollectReward=Number(this.localCash.gotCollectReward),this._showGuide=this.localCash._showGuide,this._birdType=Number(this.localCash._birdType),this._eggType=Number(this.localCash._eggType),this._lastMapConfig=[],console.log("this.localCash._lastMapConfig",this.localCash._lastMapConfig),this._lastTopObConfig=this.localCash._lastTopObConfig,this._lastBangX=this.localCash._lastBangX,this._lastBangY=this.localCash._lastBangY,this._level=window.platform.getGameLevel(),1==window.platform.getGameMode()?this.isEndless=!0:this.isEndless=!1,this._bestScore=this.localCash._bestScore,this._sceneType=this.localCash._sceneType,this._haveScene=this.localCash._haveScene,this._nowScore=this.localCash._nowScore,this._haveBird=this.localCash._haveBird,this._showGuide||(this._showGuide=0),this.gotHoverWinReward||(this.gotHoverWinReward=0),this.gotCollectReward||(this.gotCollectReward=0),this._haveBird||(this._haveBird=[1]),this._haveScene||(this._haveScene=[1]),this._nowScore||(this._nowScore=0),this._sceneType||(this._sceneType=1),this._level||(this._level=1),this._bestScore||(this._bestScore=0),this._birdType||(this._birdType=1),this._eggType||(this._eggType=1),this._lastMapConfig||(this._lastMapConfig=[]),this._lastTopObConfig||(this._lastTopObConfig=[]),this.cash||(this.cash=0),this.lastFetchSignInTime||(this.lastFetchSignInTime=0),this.fetchDays||(this.fetchDays=0),this.rewardEnergyCount||(this.rewardEnergyCount=0),this.gotNextReward||(this.gotNextReward=0),this.gotAdvanceReward||(this.gotAdvanceReward=0),this.characterVideoCounts||(this.characterVideoCounts={}),this._lastMapConfig||(this._lastMapConfig=[]),this.energyLostTime||(this.energyLostTime=0,(!this.energy||this.energy<this.maxEnergy)&&(this.energy=this.maxEnergy));var e=Math.floor(this.getLocalTime()/86400/1e3);if(this.lastRewardEnergyTime){var o=Math.floor(this.lastRewardEnergyTime/86400/1e3),n=new Date(864e5*o),i=new Date(864e5*e);console.log("lastRewardDate:",i.toString()),console.log("todayDate:",n.toString()),o<e&&(this.rewardEnergyCount=0,this.lastRewardEnergyTime=this.getLocalTime())}else this.lastRewardEnergyTime=0;if(new Date,this.energy<this.maxEnergy&&this.energyLostTime){var r=this.getLocalTime()-this.energyLostTime,a=Math.floor(r/(2*this.energyCD));a+this.energy>this.maxEnergy&&(a=this.maxEnergy-this.energy),this.energy+=a,this.energyLostTime+=a*this.energyCD*2,this.energy>=this.maxEnergy&&(this.energyLostTime=0),this.offlineEnergy(a)}this.fetchDays||(this.fetchDays=0),t||(this.saveData(),cc.systemEvent.emit(s.INIT_ROLEINFO_COMPLETED))},httpResDeal:function(){},getLocalTime:function(){var t=new Date;return t.getTime()-6e4*t.getTimezoneOffset()}}),cc._RF.pop()},{"../Script/event/ModuleEventEnum":"ModuleEventEnum","../Script/utils/Utils":"Utils"}],GameSystem:[function(t,e,o){"use strict";cc._RF.push(e,"344faJncW9B5rEk2MB8H+2i","GameSystem");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=this&&this.__decorate||function(t,e,o,n){var i,s=arguments.length,r=s<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(r=(s<3?i(r):s>3?i(e,o,r):i(e,o))||r);return s>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=cc._decorator,a=r.ccclass,c=r.property,h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.label=null,e.text="hello",e}return i(e,t),e.prototype.start=function(){},s([c(cc.Label)],e.prototype,"label",void 0),s([c],e.prototype,"text",void 0),s([a],e)}(cc.Component);o.default=h,cc._RF.pop()},{}],Grass:[function(t,e,o){"use strict";cc._RF.push(e,"b41412nELhCDpjsRjR5mRVL","Grass");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=this&&this.__decorate||function(t,e,o,n){var i,s=arguments.length,r=s<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(r=(s<3?i(r):s>3?i(e,o,r):i(e,o))||r);return s>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=t("../framwork/BaseUI"),a=t("../utils/Utils"),c=cc._decorator,h=c.ccclass,l=(c.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.icon=null,e._enable=!1,e._isPerfect=!1,e._type=-1,e._actType=-1,e._actDis=-1,e._runing=!1,e}return i(e,t),e.prototype.onBeginContact=function(t,e,o){var n=this;this._enable&&("bullet"==o.node.group&&(cc.systemEvent.emit("ADD_ATK_NUMBER"),this.icon.node.active=!1,a.default.GetPrefab("prefab/item/bird_qiangbao",function(t){var e=cc.instantiate(t);e.active=!0,n.node.addChild(e),console.log("\u64ad\u653e\u5c04\u51fb\u649e\u5230\u8349\u5730\u7684\u6548\u679c"),n._enable=!1}),this.node.removeComponent(cc.PhysicsBoxCollider),setTimeout(function(){n.node&&n.node.isValid&&n.node.destroy()},1e3)),8==this._actType&&this.node.stopAllActions(),"bird"==o.node.group&&o.node.getComponent("Bird")._isAlive&&this._isPerfect&&Math.abs(this.node.x-o.node.x)<this.node.width/2+5&&(o.node.y,this.node.y,o.node.height,e.node.height))},e.prototype.onLoad=function(){this.icon=this.GetSprite("icon"),cc.systemEvent.on("DOACT",this.doAct,this),cc.systemEvent.on("UPDATE_SELECT_SCENE",this.changeNormalIcon,this),this._type=-1,this._actType=-1,this._actDis=-1,this._runing=!1,this._isPerfect=!1,this._enable=!0},e.prototype.start=function(){a.default.setSpriteAssets(this.icon,"blockgreen")},e.prototype.initType=function(t){this._type=t},e.prototype.addPerfect=function(){this._isPerfect=!0},e.prototype.doAct=function(t){if(this._type==t&&!this._runing)switch(this._runing=!0,this._actType){case 1:console.log(this._actDis);var e=cc.moveTo(.1,this.node.x,this.node.y+this._actDis);this.node.runAction(e)}},e.prototype.changeNormalIcon=function(){a.default.setSpriteAssets(this.icon,"blockgreen")},e.prototype.addAct=function(t,e,o){this._runing=!1,this._type=t,this._actType=e,this._actDis=o+20},e.prototype.repeatAct=function(t,e){this._runing=!1,this._actType=t,this._actDis=e+20,cc.tween(this.node).repeatForever(cc.tween().to(4,{y:3*this.node.height}).to(4,{y:-3*this.node.height})).start()},e.prototype.stopAct=function(){this.node.stopAllActions()},e.prototype.onEndContact=function(){},s([h],e)}(r.default));o.default=l,cc._RF.pop()},{"../framwork/BaseUI":"BaseUI","../utils/Utils":"Utils"}],Ground:[function(t,e,o){"use strict";cc._RF.push(e,"50a96laZstHd6me2FBwgnZ/","Ground");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=this&&this.__decorate||function(t,e,o,n){var i,s=arguments.length,r=s<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(r=(s<3?i(r):s>3?i(e,o,r):i(e,o))||r);return s>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=t("../framwork/BaseUI"),a=t("../utils/Utils"),c=cc._decorator,h=c.ccclass,l=(c.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.icon=null,e._enable=!1,e._isPerfect=!1,e._runing=!1,e._type=null,e._actType=null,e._actDis=null,e}return i(e,t),e.prototype.onBeginContact=function(t,e,o){var n=this;this._enable&&("bullet"==o.node.group&&(cc.systemEvent.emit("ADD_ATK_NUMBER"),this.icon.node.active=!1,a.default.GetPrefab("prefab/item/bird_qiangbao",function(t){var e=cc.instantiate(t);e.active=!0,n.node.addChild(e),n._enable=!1}),this.node.removeComponent(cc.PhysicsBoxCollider),setTimeout(function(){n.node&&n.node.isValid&&n.node.destroy()},2e3)),"bird"==o.node.group&&o.node.getComponent("Bird")._isAlive&&this._isPerfect&&Math.abs(this.node.x-o.node.x)<this.node.width/2&&(Math.abs(o.node.y-this.node.y),o.node.height))},e.prototype.onLoad=function(){this.icon=this.GetSprite("icon"),cc.systemEvent.on("DOACT",this.doAct,this),cc.systemEvent.on("UPDATE_SELECT_SCENE",this.changeNormalIcon,this),this._type=-1,this._actType=-1,this._actDis=-1,this._runing=!1,this._isPerfect=!1,this._enable=!0},e.prototype.doAct=function(t){if(this._type==t&&!this._runing)switch(this._runing=!0,this._actType){case 1:console.log(this._actDis);var e=cc.moveTo(.1,this.node.x,this.node.y+this._actDis);this.node.runAction(e)}},e.prototype.start=function(){a.default.setSpriteAssets(this.icon,"block")},e.prototype.addPerfect=function(){this._isPerfect=!0},e.prototype.initType=function(t){this._type=t},e.prototype.addAct=function(t,e,o){this._runing=!1,this._type=t,this._actType=e,this._actDis=o+20},e.prototype.changeNormalIcon=function(){a.default.setSpriteAssets(this.icon,"block")},e.prototype.onEndContact=function(){},s([h],e)}(r.default));o.default=l,cc._RF.pop()},{"../framwork/BaseUI":"BaseUI","../utils/Utils":"Utils"}],HTTP:[function(t,e,o){"use strict";cc._RF.push(e,"67bbbOsI39IGox3ery2aUUG","HTTP"),Object.defineProperty(o,"__esModule",{value:!0});var n=t("../framwork/MsgHints"),i=t("../framwork/UserMsg"),s=t("./Utils"),r=cc._decorator,a=(r.ccclass,r.property,function(){function t(){}return t.sendRequest=function(e,o,i,r,a){void 0===r&&(r=null),void 0===a&&(a=null);var c=new XMLHttpRequest,h="?";for(var l in o)"?"!=h&&(h+="&"),h+=l+"="+o[l];null==r&&(r=t.url);var u=r+e;return o&&(u+=encodeURI(h)),s.default.ShowLoading(),c.open("GET",u,!0),c.timeout=1e4,c.onload=function(){var t=JSON.parse(c.responseText);if(s.default.HideLoading(),c.status>=200&&c.status<300||304==c.status)i&&i(t);else{if(2==t.errcode||1==t.errcode)return cc.sys.localStorage.removeItem("jwt"),void cc.director.loadScene("loading",function(){n.default.show("\u8d26\u6237\u4fe1\u606f\u8fc7\u671f\uff0c\u8bf7\u91cd\u65b0\u767b\u9646")});c.abort()}},c.ontimeout=function(t){cc.log(t),s.default.HideLoading(),a&&a()},c.onabort=function(t){cc.log(t),s.default.HideLoading(),a&&a()},c.onerror=function(t){cc.log(t),s.default.HideLoading(),a&&a()},c.send(),c},t.httpConnect_post_async=function(e,o,i){var r=this.url+e;s.default.ShowLoading(),t.post(r,o,function(t,e){if(s.default.HideLoading(),"COMPLETE"==t&&4==e.readyState&&e.status>=200&&e.status<400){var o=JSON.parse(e.responseText);1==o.errcode||2==o.errcode||4==o.errcode?(cc.sys.localStorage.removeItem("jwt"),n.default.show("\u8d26\u6237\u4fe1\u606f\u8fc7\u671f\uff0c\u8bf7\u91cd\u65b0\u767b\u9646"),window.location.href="http://dstest.wondersun.com.cn/WechatWeb/"):i&&i(o)}},this)},t.catobj=function(t){var e=[];for(var o in t){var n=o+"="+t[o];e.push(n)}return e.join("&")},t.post=function(t,e,o,n){var i=new XMLHttpRequest;i.onreadystatechange=function(){},i.onerror=function(){o.call(n,"ERROR",i)},i.onprogress=function(){o.call(n,"PROGRESS",i)},i.onloadend=function(){o.call(n,"COMPLETE",i)},i.ontimeout=function(){o.call(n,"TIMEOUT",i)},i.open("POST",t,!0),i.setRequestHeader("Content-Type","application/x-www-form-urlencoded");var s="";Object.keys(e).forEach(function(t){s+=t+"="+encodeURIComponent(e[t])+"&"}),""!==s&&(s=s.substr(0,s.lastIndexOf("&"))),i.send(s)},t.connect=function(t){void 0===t&&(t=""),cc.sys.platform==cc.sys.WECHAT_GAME?this.wxCommect(t):this.webCommect(t)},t.webCommect=function(e){var o=this;void 0===e&&(e="");var n=this;if(e=t._url,!n.inConnecting){if(n.inConnecting=!0,n.isInit)return console.log("Network is already inited..."),void n.connect();var s;n.closedByClient=!1,s=e,n.index++,n.host=s,n.socket=new WebSocket(s),n.socket.xxxxx=n.index,console.log("socket1111111"),n.socket.onopen=function(t){clearTimeout(o._heartBeatTimer),o._heartBeatTimer=setTimeout(function(){n.send("room","ping",{})},5e3),console.log("Network onopen...",t),n.isInit=!0,o.send("room","login",{jwt:i.UserMsg.jwt})},n.socket.onmessage=function(t){var e=new FileReader;e.onload=function(){var t=this.result,e=new Uint8Array(t),o=JSON.parse(n.Utf8ArrayToStr(e));n.appandeMsg(o)},e.readAsArrayBuffer(t.data)},n.socket.onerror=function(t){console.log("onerror",JSON.stringify(t)),n.socket&&(console.log("Network onerror..."),o.isInit=!1,n.socketLock=!1,n.sendList=[],n.inConnecting=!1,n.socket.close(),n.netErrorDummy(t))},n.socket.onclose=function(t){n.socket&&(cc.log("Network onclose...1",t),t.closeByClient=n.closedByClient,n.inConnecting=!1,o.isInit=!1,n.socketLock=!1,n.sendList=[],n.socket&&n.socket.close(),o.netCloseDummy(t))}}},t.wxCommect=function(t){var e=this;void 0===t&&(t="");var o=this;if(!o.inConnecting){o.inConnecting=!0;var s=this.wxsocket=wx.connectSocket({url:o._url,success:function(){console.log("connect socket success.")},fail:function(){console.log("connect socket fail.")}});s.onOpen(function(t){console.log("Network onopen...",t),clearTimeout(e._heartBeatTimer),e._heartBeatTimer=setTimeout(function(){o.send("room","ping",{})},5e3),o.isInit=!0,e.send("room","login",{jwt:i.UserMsg.jwt})}),s.onMessage(function(t){console.log("evt===>",t);var e=new Uint8Array(t.data),n=JSON.parse(o.Utf8ArrayToStr(e));o.appandeMsg(n)}),s.onError(function(t){console.log("Network error..."),console.log("error==>",JSON.stringify(t)),n.default.show("\u7f51\u7edc\u5f02\u5e38\uff0c\u8bf7\u91cd\u65b0\u8fdb\u5165\u6e38\u620f"),o.inConnecting=!1}),s.onClose(function(t){console.log("Network close..."),o.wxsocket&&(o.inConnecting=!1,e.isInit=!1,o.wxsocket&&o.wxsocket.close(),e.netCloseDummy(t))})}},t.send=function(t,e,o){cc.sys.platform==cc.sys.WECHAT_GAME?this.wxsend(t,e,o):this.websend(t,e,o)},t.websend=function(t,e,o){var n={c:t,m:e,data:o};if(this.isInit){if(this.socket.readyState==WebSocket.OPEN){var i=JSON.stringify(n);"ping"!=n.m&&cc.sys.isNative&&console.log("\u53d1\u9001---------------------",JSON.stringify(n)),this.socket.send(i)}}else cc.warn("Network is not inited...")},t.wxsend=function(t,e,o){var n={c:t,m:e,data:o};if(this.isInit){if(this.wxsocket.readyState==WebSocket.OPEN){var i=JSON.stringify(n);"ping"!=n.m&&cc.sys.isNative&&console.log("\u53d1\u9001---------------------",JSON.stringify(n)),this.wxsocket.send({data:i})}}else cc.warn("Network is not inited...")},t.close=function(){console.log("\u4e3b\u52a8\u5173\u95ed socket"),cc.sys.platform==cc.sys.WECHAT_GAME?this.wxclose():this.webclose()},t.webclose=function(){console.log("\u4e3b\u52a8\u5173\u95ed socket"),this.socket&&(this.socket.close(),this.socket=null,this.isInit=!1,this.closedByClient=!0,this.inConnecting=!1)},t.wxclose=function(){console.log("\u4e3b\u52a8\u5173\u95ed socket"),this.socket&&(this.wxsocket.close(),this.wxsocket=null,this.isInit=!1)},t.netDataDummy=function(t){cc.sys.platform==cc.sys.WECHAT_GAME?this.wxNetDataDummy(t):this.webNetDataDummy(t)},t.webNetDataDummy=function(t){var e=this;if("pong"==t.m)clearTimeout(this._heartBeatTimer),this._heartBeatTimer=setTimeout(function(){e.send("room","ping",{})},5e3);else{if(t.data.errcode)return console.log("socket--\x3e",JSON.stringify(t)),void n.default.show(t.data.errmsg);cc.director.emit(t.c+"_"+t.m,t.data)}},t.wxNetDataDummy=function(t){var e=this;if("pong"==t.m)clearTimeout(this._heartBeatTimer),this._heartBeatTimer=setTimeout(function(){e.send("room","ping",{})},5e3);else{if(t.data.errcode)return console.log("socket--\x3e",JSON.stringify(t)),void n.default.show(t.data.errmsg);cc.director.emit(t.c+"_"+t.m,t.data)}},t.netCloseDummy=function(){this.inConnecting||(i.UserMsg.initData(),cc.director.loadScene("loginScene"))},t.appandeMsg=function(t){"pong"!=t.m&&cc.sys.isNative&&console.log("---------------------\u63a5\u6536",JSON.stringify(t)),t.src="tcp",this.netDataDummy(t)},t.Utf8ArrayToStr=function(t){var e,o,n,i,s,r;for(e="",n=t.length,o=0;o<n;)switch((i=t[o++])>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:e+=String.fromCharCode(i);break;case 12:case 13:s=t[o++],e+=String.fromCharCode((31&i)<<6|63&s);break;case 14:s=t[o++],r=t[o++],e+=String.fromCharCode((15&i)<<12|(63&s)<<6|(63&r)<<0)}return e},t.str2UTF8=function(t){var e,o,n=new Array;e=t.length;for(var i=0;i<e;i++)(o=t.charCodeAt(i))>=65536&&o<=1114111?(n.push(o>>18&7|240),n.push(o>>12&63|128),n.push(o>>6&63|128),n.push(63&o|128)):o>=2048&&o<=65535?(n.push(o>>12&15|224),n.push(o>>6&63|128),n.push(63&o|128)):o>=128&&o<=2047?(n.push(o>>6&31|192),n.push(63&o|128)):n.push(255&o);return n},t.netErrorDummy=function(){},t.url="https://xm.tyhuoshi.cn/",t._url="wss://wss.tyhuoshi.cn:9501/websocket/",t.isInit=!1,t.socket=null,t.host=null,t.instance=null,t.closedByClient=!1,t.inConnecting=!1,t.index=1,t.sendList=[],t.socketLock=!1,t}());o.default=a,cc._RF.pop()},{"../framwork/MsgHints":"MsgHints","../framwork/UserMsg":"UserMsg","./Utils":"Utils"}],MConfig:[function(t,e){"use strict";cc._RF.push(e,"1e631syKcJPSqPPgV6w0co7","MConfig"),e.exports={Game:{key:"Game",open:!0}},cc._RF.pop()},{}],ModuleEventEnum:[function(t,e){"use strict";cc._RF.push(e,"ddc5dLtk2pBrax6brh/TG/b","ModuleEventEnum"),e.exports={INIT_ROLEINFO_COMPLETED:"INIT_ROLEINFO_COMPLETED",WX_REGISTERED:"WX_REGISTERED",POP_REMOVED:"POP_REMOVED",POP_ADDED:"POP_ADDED",GOT_HTTP_RES:"GOT_HTTP_RES",WX_HIDE:"WX_HIDE",WX_SHOW:"WX_SHOW",GO_GAME:"GO_GAME",GO_LOADING:"GO_LOADING"},cc._RF.pop()},{}],MsgHints:[function(t,e,o){"use strict";cc._RF.push(e,"92dbd3SRYhK45DBZfwlXoTf","MsgHints");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=this&&this.__decorate||function(t,e,o,n){var i,s=arguments.length,r=s<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(r=(s<3?i(r):s>3?i(e,o,r):i(e,o))||r);return s>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=t("../manager/PoolMgr"),a=cc._decorator,c=a.ccclass,h=(a.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}var o;return i(e,t),o=e,e.show=function(t){if(""!=t)if(null!=o._prefab){if(0!=r.default.Instance().pools.msg_hints.size()){var e=r.default.Instance().get("msg_hints");e.scaleY=0,e.parent=cc.find("Canvas"),e.zIndex=999,e.getChildByName("label").getComponent(cc.Label).string=t,e.getComponent(cc.Animation).play("msghints",0),e.getComponent(cc.Animation).on("finished",function(){r.default.Instance().put("msg_hints",e)})}}else cc.loader.loadRes("prefab/common/msg_hints",function(e,n){e||(o._prefab=n,r.default.Instance().initPool("msg_hints",o._prefab,20),o.show(t))})},e._prefab=null,o=s([c],e)}(cc.Component));o.default=h,cc._RF.pop()},{"../manager/PoolMgr":"PoolMgr"}],NumberRoll:[function(t,e,o){"use strict";cc._RF.push(e,"7afd2vdphtCjKWi+cfBvmoW","NumberRoll");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=this&&this.__decorate||function(t,e,o,n){var i,s=arguments.length,r=s<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(r=(s<3?i(r):s>3?i(e,o,r):i(e,o))||r);return s>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=t("../framwork/BaseUI"),a=cc._decorator,c=a.ccclass,h=(a.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._cur=0,e._target=0,e._offset=0,e}return i(e,t),e.prototype.start=function(){this.label=this.node.getComponent(cc.Label)},Object.defineProperty(e.prototype,"vaule",{set:function(t){this._target=t,this._offset=Math.floor((this._target-this._cur)/Math.min(30,Math.abs(this._target-this._cur)))},enumerable:!1,configurable:!0}),e.prototype.update=function(t){1/t<cc.game.getFrameRate()/2?this.label.string=this._target+"":(this._cur!=this._target&&(this._cur+=this._offset,this._offset>0&&this._cur>this._target&&(this._cur=this._target),this._offset<0&&this._cur<this._target&&(this._cur=this._target)),this.label.string=this._cur+"")},s([c],e)}(r.default));o.default=h,cc._RF.pop()},{"../framwork/BaseUI":"BaseUI"}],PlayerModel:[function(t,e){"use strict";cc._RF.push(e,"e6cf5CUh5NBNoHlA1MZ7aF5","PlayerModel"),t("../Script/event/ModuleEventEnum"),cc.Class({extends:cc.Component,properties:{},initConfig:function(){},isLoginInterOpen:function(){},isClickCountLimit:function(t){if(!this.funcParams)return!1;if(!this.funcParams[14])return!1;for(var e=this.funcParams[14].split(","),o=0;o<e.length;o++)if(e[o]==String(t))return!0;return!1},checkItem:function(t){for(var e=0;e!=t.length;)t[e].navout_cnt>0?t.splice(e,1):e++},getResultRecommondRandomCount:function(){return this.funcParams&&this.funcParams[15]?Number(this.funcParams[15]):0},getInterstiRecommondRandomCount:function(){return this.funcParams&&this.funcParams[16]?Number(this.funcParams[16]):0},getBottomRecommondRandomCount:function(){return this.funcParams&&this.funcParams[17]?Number(this.funcParams[17]):0},getBannerRecommondRandomCount:function(t){if(!this.funcParams||!this.funcParams[18])return 0;null==this.virBannerList&&(this.virBannerList=this.funcParams[18].split(","));var e=[];e=e.concat(t);for(var o=0;o!=this.virBannerList.length;){var n=parseInt(this.virBannerList[o]),i=e.splice(0,n);if(this.checkItem(i),console.log("checklist is : ",i),o++,0!=i.length)return i}return parseInt(this.virBannerList[o-1])},getRecommondCount:function(){return this.funcParams&&this.funcParams[12]?Number(this.funcParams[12]):9},getRecommondType:function(){return!!this.funcList&&!(!this.funcList[12]||"1"!=this.funcList[12])},checkVirBannerShow:function(){},isIconRandomOrder:function(t){var e=17;switch(t){case"result":e=15;break;case"interstitial":e=16;break;case"bottom":e=17;break;case"banner":e=18}return!!this.funcList&&!(!this.funcList[e]||"1"!=this.funcList[e])},addFuncOpenList:function(t){for(var e in console.log("func opens:",t),this.funcList={},this.funcParams={},t)this.funcList[t[e].func_id]=t[e].is_open,this.funcParams[t[e].func_id]=t[e].func_params},checkVersion:function(t){this.verisonValue=Number(t)},checkFuncOpen:function(t,e){if(!t)return!!this.funcList;if(this.funcList&&this.funcList[t]&&"1"==this.funcList[t]){if(e){var o=this.funcParams[t].split(",");for(var n in o)if(o[n]==String(e))return!0;return!1}return!0}return!1},dealAdOrder:function(t){t.ad_push_order?(this.adPushOrder=t.ad_push_order,this.headOrderIds=null==this.adPushOrder[1]||""==this.adPushOrder[1]?null:this.adPushOrder[1],this.loopOrderIds=null==this.adPushOrder[2]||""==this.adPushOrder[2]?null:this.adPushOrder[2]):this.adPushOrder=null},onLoad:function(){}}),cc._RF.pop()},{"../Script/event/ModuleEventEnum":"ModuleEventEnum"}],PlayerState:[function(t,e,o){"use strict";cc._RF.push(e,"b53b7ni5atIEL+JwJlqLaQE","PlayerState"),Object.defineProperty(o,"__esModule",{value:!0}),cc._RF.pop()},{}],PoolMgr:[function(t,e,o){"use strict";cc._RF.push(e,"47121gOvhBACYUKpowrObp+","PoolMgr");var n=this&&this.__decorate||function(t,e,o,n){var i,s=arguments.length,r=s<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(r=(s<3?i(r):s>3?i(e,o,r):i(e,o))||r);return s>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var i=cc._decorator,s=i.ccclass,r=(i.property,function(){function t(){this.pools={},this.prefabs={},this.pre_bullets=[]}var e;return e=t,t.Instance=function(){return null==e._instance&&(e._instance=new e),e._instance},t.prototype.loadPrefabs=function(){},t.prototype.initPool=function(t,e,o){this.prefabs[t]=e,this.pools[t]=new cc.NodePool;for(var n=0;n<o;++n)this.pools[t].put(cc.instantiate(e))},t.prototype.get=function(t){if(null==this.pools[t])return cc.error("\u6ca1\u6709"+t),null;if(this.pools[t].size()>0){var e=this.pools[t].get(),o=e.getChildByName("spine");return o&&(o.getComponent(sp.Skeleton).paused=!1),e}return cc.instantiate(this.prefabs[t])},t.prototype.put=function(t,e){this.pools[t].put(e)},t._instance=null,e=n([s],t)}());o.default=r,cc._RF.pop()},{}],Prop:[function(t,e,o){"use strict";cc._RF.push(e,"b83bbWEuKJFnr8JeRW8aFq1","Prop");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=this&&this.__decorate||function(t,e,o,n){var i,s=arguments.length,r=s<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(r=(s<3?i(r):s>3?i(e,o,r):i(e,o))||r);return s>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=t("../framwork/BaseUI"),a=t("../utils/Utils"),c=cc._decorator,h=c.ccclass,l=(c.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.isOver=!1,e}return i(e,t),e.prototype.initType=function(){var t=a.default.getRndInteger(1,5);a.default.setSpriteAssets(this.node.getComponent(cc.Sprite),"fruit"+t)},e.prototype.onBeginContact=function(t,e,o){if(cc.find("Canvas").getComponent("GameModel").isGameStart&&("bird"==o.node.group||"egg"==o.node.group)){if(this.isOver)return;this.isOver=!0,cc.systemEvent.emit("addscore",{pos:this.node.position,node:this.node}),e.node.destroy()}},s([h],e)}(r.default));o.default=l,cc._RF.pop()},{"../framwork/BaseUI":"BaseUI","../utils/Utils":"Utils"}],Sensor:[function(t,e,o){"use strict";cc._RF.push(e,"bea5bvKxKdC+Y0Hxmzg5qoa","Sensor");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=this&&this.__decorate||function(t,e,o,n){var i,s=arguments.length,r=s<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(r=(s<3?i(r):s>3?i(e,o,r):i(e,o))||r);return s>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=t("../framwork/BaseUI"),a=cc._decorator,c=a.ccclass,h=(a.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type=-1,e}return i(e,t),e.prototype.onLoad=function(){this.type=-1},e.prototype.onBeginContact=function(){},e.prototype.initType=function(t){this.type=t},e.prototype.emitEvent=function(){cc.systemEvent.emit("DOACT",this.type)},e.prototype.start=function(){},s([c],e)}(r.default));o.default=h,cc._RF.pop()},{"../framwork/BaseUI":"BaseUI"}],Shake:[function(t,e,o){"use strict";cc._RF.push(e,"776856yN0hDUJ9tpRE0AmLJ","Shake");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=this&&this.__decorate||function(t,e,o,n){var i,s=arguments.length,r=s<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(r=(s<3?i(r):s>3?i(e,o,r):i(e,o))||r);return s>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(o,"__esModule",{value:!0}),o.Shake=void 0;var r=cc._decorator,a=r.ccclass,c=(r.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._initial_x=0,e._initial_y=0,e._strength_x=0,e._strength_y=0,e}var o;return i(e,t),o=e,e.create=function(t,e,n){var i=new o;return i.initWithDuration(t,e,n),i},e.prototype.initWithDuration=function(t,e,o){return cc.ActionInterval.prototype.initWithDuration.apply(this,arguments),this._strength_x=e,this._strength_y=o,!0},e.prototype.fgRangeRand=function(t,e){return Math.random()*(e-t)+t},e.prototype.update=function(){var t=this.fgRangeRand(-this._strength_x,this._strength_x),e=this.fgRangeRand(-this._strength_y,this._strength_y);this.getTarget().setPosition(t+this._initial_x,e+this._initial_y)},e.prototype.startWithTarget=function(t){cc.ActionInterval.prototype.startWithTarget.apply(this,arguments),this._initial_x=t.x,this._initial_y=t.y},e.prototype.stop=function(){this.getTarget().setPosition(new cc.Vec2(this._initial_x,this._initial_y)),cc.ActionInterval.prototype.stop.apply(this)},o=s([a],e)}(cc.ActionInterval));o.Shake=c,cc._RF.pop()},{}],Singleton:[function(t,e,o){"use strict";cc._RF.push(e,"6ab77tNm3tNhp5gNq5QAZBD","Singleton"),Object.defineProperty(o,"__esModule",{value:!0});var n=function(){function t(){}return t.Instance=function(){return this.instance||(this.instance=new this),this.instance},t}();o.default=n,cc._RF.pop()},{}],Thorn:[function(t,e,o){"use strict";cc._RF.push(e,"a0bb9cezy1CwbT8WRmU8dy5","Thorn");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=this&&this.__decorate||function(t,e,o,n){var i,s=arguments.length,r=s<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(r=(s<3?i(r):s>3?i(e,o,r):i(e,o))||r);return s>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=t("../framwork/BaseUI"),a=t("../utils/Utils"),c=cc._decorator,h=c.ccclass,l=(c.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.setReverse=function(t){this.node.angle=t?180:0},e.prototype.onLoad=function(){a.default.setSpriteAssets(this.node.getComponent(cc.Sprite),"thorn")},e.prototype.start=function(){},e.prototype.onBeginContact=function(){},s([h],e)}(r.default));o.default=l,cc._RF.pop()},{"../framwork/BaseUI":"BaseUI","../utils/Utils":"Utils"}],TweenPool:[function(t,e,o){"use strict";cc._RF.push(e,"a6885ldzr1Lfo0Z4iK1jdhx","TweenPool"),Object.defineProperty(o,"__esModule",{value:!0}),o.TweenPool=void 0;var n=function(){function t(){this._tweens=[],this._isPlay=!1}return t.prototype.add=function(t){this._tweens.push(t)},t.prototype.clear=function(){var t;this._isPlay=!1,null===(t=this._tweens)||void 0===t||t.forEach(function(t){return t.stop()}),this._tweens=[]},t.prototype.start=function(){var t=this;if(!this._isPlay&&this._tweens.length>0){var e=this._tweens.shift();e.then(cc.callFunc(function(){t._isPlay=!1,t.start()})),this._isPlay=!0,e.start()}},t}();o.TweenPool=n,cc._RF.pop()},{}],UserMsg:[function(t,e,o){"use strict";cc._RF.push(e,"19d10qVZLZMboDLwRs2Iqrv","UserMsg");var n=this&&this.__decorate||function(t,e,o,n){var i,s=arguments.length,r=s<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(r=(s<3?i(r):s>3?i(e,o,r):i(e,o))||r);return s>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(o,"__esModule",{value:!0}),o.UserMsg=void 0;var i=t("./User"),s=cc._decorator,r=s.ccclass,a=(s.property,function(){function t(){}return t.setLoadHall=function(t){t.user?this.user.initData(t.user):this.user=null},t.user=new i.User,t.jwt="eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJ1aWQiOjYyMTA4MCwidG9rZW4iOiIzNjJkOGU3MTA0ZGEwNThmNzU5NmJmMWQ2ZDJiMjlkYjFmODcyOTQ4In0.hTnus5F_ycqTriBDlhIJB_YIFmCsQcXo1P5ceh5ERdE",t.gameType=0,t.gameLevel=0,t.gameLevelTotal=0,n([r],t)}());o.UserMsg=a,cc._RF.pop()},{"./User":"User"}],User:[function(t,e,o){"use strict";cc._RF.push(e,"6ab51mxonFC263ftDu+uJDh","User"),Object.defineProperty(o,"__esModule",{value:!0}),o.User=void 0;var n=function(){function t(){this.accountstatus=0,this.car1=0,this.car2=0,this.city="",this.coin=0,this.country="",this.createtime=0,this.headimgurl="",this.huaban1=0,this.huaban2=0,this.id=0,this.mache=0,this.motuo1=0,this.motuo2=0,this.nickname="",this.phone=0,this.province="",this.score=0,this.sex=1,this.shangji=0,this.unionid="",this.updatetime=0,this.usecar="",this.usezhuangban="",this.xcx_openid="",this.zhuangban1=0,this.zhuangban2=0,this.zhuangban3=0}return t.prototype.initData=function(t){t.accountstatus?this.accountstatus=t.accountstatus:this.accountstatus=this.accountstatus,t.car1?this.car1=t.car1:this.car1=this.car1,t.car2?this.car2=t.car2:this.car2=this.car2,t.city?this.city=t.city:this.city=this.city,t.coin?this.coin=t.coin:this.coin=this.coin,t.country?this.country=t.country:this.country=this.country,t.createtime?this.createtime=t.createtime:this.createtime=this.createtime,t.headimgurl?this.headimgurl=t.headimgurl:this.headimgurl=this.headimgurl,t.huaban1?this.huaban1=t.huaban1:this.huaban1=this.huaban1,t.huaban2?this.huaban2=t.huaban2:this.huaban2=this.huaban2,t.id?this.id=t.id:this.id=this.id,t.mache?this.mache=t.mache:this.mache=this.mache,t.motuo1?this.motuo1=t.motuo1:this.motuo1=this.motuo1,t.motuo2?this.motuo2=t.motuo2:this.motuo2=this.motuo2,t.nickname?this.nickname=t.nickname:this.nickname=this.nickname,t.phone?this.phone=t.phone:this.phone=this.phone,t.province?this.province=t.province:this.province=this.province,t.score?this.score=t.score:this.score=this.score,t.sex?this.sex=t.sex:this.sex=this.sex,t.shangji?this.shangji=t.shangji:this.shangji=this.shangji,t.unionid?this.unionid=t.unionid:this.unionid=this.unionid,t.updatetime?this.updatetime=t.updatetime:this.updatetime=this.updatetime,t.usecar?this.usecar=t.usecar:this.usecar=this.usecar,t.usezhuangban?this.usezhuangban=t.usezhuangban:this.usezhuangban=this.usezhuangban,t.xcx_openid?this.xcx_openid=t.xcx_openid:this.xcx_openid=this.xcx_openid,t.zhuangban1?this.zhuangban1=t.zhuangban1:this.zhuangban1=this.zhuangban1,t.zhuangban2?this.zhuangban2=t.zhuangban2:this.zhuangban2=this.zhuangban2,t.zhuangban3?this.zhuangban3=t.zhuangban3:this.zhuangban3=this.zhuangban3},t}();o.User=n,cc._RF.pop()},{}],Utils:[function(t,e,o){"use strict";cc._RF.push(e,"ff748PS7+hEIIiRCFvCwbSy","Utils"),Object.defineProperty(o,"__esModule",{value:!0}),o.EFLY_TYPE=void 0;var n=t("./Shake"),i=t("../framwork/BaseUI"),s=t("./BigNumber");(function(t){t[t["\u91d1\u5e01"]=0]="\u91d1\u5e01",t[t["\u4f53\u529b"]=1]="\u4f53\u529b",t[t["\u94bb\u77f3"]=2]="\u94bb\u77f3"})(o.EFLY_TYPE||(o.EFLY_TYPE={}));var r=function(){function t(){}return t.GetPrefab=function(t,e,o){void 0===e&&(e=null),void 0===o&&(o=null),cc.loader.loadRes(t,cc.Prefab,function(t,n){e&&e.apply(o,[n])})},t.createUI=function(t,e,o){return void 0===e&&(e=null),void 0===o&&(o=null),new Promise(function(n,i){cc.loader.loadRes(t,cc.Prefab,function(s,r){if(s)return console.error(s),void i();null==e&&(e=cc.find("Canvas"));var a=t.lastIndexOf("/"),c=t.substr(a+1,t.length-a);if(e.getComponentInChildren(c))console.log("\u91cd\u590dUI\u8df3\u8fc7");else{var h=cc.instantiate(r);h.opacity=0,h.runAction(cc.sequence(cc.delayTime(.01),cc.callFunc(function(){h.opacity=255}))),h.parent=e,o&&o(h),n(h)}})})},t.createPrefab=function(t,e,o,n){return void 0===e&&(e=null),void 0===o&&(o=null),void 0===n&&(n=null),new Promise(function(i,s){cc.loader.loadRes(t,cc.Prefab,function(t,r){if(t)return console.error(t),void s();null==e&&(e=cc.find("Canvas"));var a=cc.instantiate(r);a.opacity=0,a.runAction(cc.sequence(cc.delayTime(.01),cc.callFunc(function(){a.opacity=255}))),a.parent=e,n&&(a.position=n),o&&o(a),i(a)})})},t.isTimeInToday=function(t){var e=new Date;e.setHours(0,0,0,0);var o=e.getTime();e.setDate(e.getDate()+1);var n=e.getTime();return t>=o&&t<n},t.closeAllUI=function(){for(var t=cc.find("Canvas"),e=0;e<t.childrenCount;++e){var o=t.children[e].getComponent(i.default);o&&o.closeUI()}},t.getRandom=function(t,e){return Math.random()*(e-t)+t},t.getRandomInt=function(t,e){return Math.floor(Math.random()*(e-t))+t},t.getRndInteger=function(t,e){return Math.floor(Math.random()*(e-t+1))+t},t.seedRandomInt=function(e,o){return t.getRandomInt(e,o)},t.formatNumber=function(t,e){return void 0===e&&(e=1),t=Math.floor(t),s.default.getLargeString(t)},t.getPowNum=function(t){return Math.pow(10,t)},t.setServerTime=function(e){t.timeOffset=e-(new Date).getTime(),cc.log("timeOffset:",t.timeOffset)},t.getServerTime=function(){return(new Date).getTime()+t.timeOffset},t.getTime=function(){return Math.round(parseInt(new Date+"")/1e3)},t.limit=function(t,e,o){return Math.min(o,Math.max(e,t))},t.Shake=function(t,e,o){var i=cc.find("Canvas/Main Camera");i.x=0,i.y=0,i.stopAllActions(),i.runAction(n.Shake.create(t,e,o))},t.addClickEvent=function(t,e,o,n,i){var s=new cc.Component.EventHandler;s.target=e,s.component=o,s.handler=n,i&&(s.customEventData=i);var r=t.getComponent(cc.Button).clickEvents;r.length>0?cc.warn("\u6309\u94ae\u5df2\u7ecf\u5b58\u5728\u7ed1\u5b9a\uff0c\u8df3\u8fc7\u81ea\u52a8\u7ed1\u5b9a",t.name):(console.log(t.name,e.name,o),r.push(s))},t.ShowLoading=function(){cc.find("loadingLayer").active=!0},t.HideLoading=function(){cc.find("loadingLayer").active=!1},t.getQueryString=function(t){var e=new RegExp("(^|&)"+t+"=([^&]*)(&|$)","i"),o=window.location.search.substr(1).match(e);return null!=o?unescape(o[2]):null},t.getTimeStrByS=function(t){(t=Math.floor(t))<0&&(t=0);var e=Math.floor(t/3600/24);t-=86400*e;var o=Math.floor(t/3600);t-=3600*o;var n,i=Math.floor(t/60);n=i>9?""+i:"0"+i;var s;return s=(t-=60*i)>9?""+t:"0"+t,e>0?e+"\u5929"+o+"\u65f6"+i+"\u5206":o>0?(o>9?""+o:"0"+o)+":"+n:n+":"+s},t.formatCoin=function(t){return t=Math.floor(t),s.default.getLargeString(t)},t.loadRes=function(t,e){return new Promise(function(o,n){cc.loader.loadRes(t,e,function(e,i){e?(cc.error(t,e),n(null)):o(i)})})},t.load=function(t){return new Promise(function(e,o){cc.loader.load({url:t,type:"png"},function(n,i){if(n)cc.error(t,n),o(null);else{var s=new cc.SpriteFrame(i);e(s)}})})},t.weight=function(t){for(var e=0,o=0;o<t.length;++o)e+=t[o];if(e<=0)return-1;var n=Math.round(Math.random()*Number.MAX_VALUE)%e;for(o=0;o<t.length;++o){if(n<t[o])return o;n-=t[o]}return-1},t.fixFloat=function(t,e){void 0===e&&(e=2);var o=100*e;return Math.floor(t*o)/o},t.moveN1toN2=function(t,e){t.position=t.parent.convertToNodeSpaceAR(e.parent.convertToWorldSpaceAR(e.position))},t.convertNodeSpaceAR=function(t,e){return t.parent.convertToNodeSpaceAR(e.parent.convertToWorldSpaceAR(e.position))},t.localConvertWorldPointAR=function(t){return t?t.convertToWorldSpaceAR(cc.v2(0,0)):null},t.localConvertWorldPoint=function(t){return t?t.convertToWorldSpace(cc.v2(0,0)):null},t.worldConvertLocalPointAR=function(t,e){return t?t.convertToNodeSpaceAR(e):null},t.worldConvertLocalPoint=function(t,e){return t?t.convertToNodeSpace(e):null},t.convetOtherNodeSpace=function(t,e){if(!t||!e)return null;var o=this.localConvertWorldPoint(t);return this.worldConvertLocalPoint(e,o)},t.convetOtherNodeSpaceAR=function(t,e){if(!t||!e)return null;var o=this.localConvertWorldPointAR(t);return this.worldConvertLocalPointAR(e,o)},t.setSpriteAssets=function(t,e){window.platform.getRes(e).then(function(e){t.spriteFrame=new cc.SpriteFrame(e),t.node.getComponent(cc.Widget)&&t.node.getComponent(cc.Widget).updateAlignment()})},t.showSuccess=function(t,e){cc.loader.loadRes("prefab/item/success",cc.Prefab,function(o,n){if(o)return cc.log("success\u52a0\u8f7d\u5931\u8d25");var i=cc.instantiate(n);i.getComponent("success").show(t),i.parent=cc.find("Canvas"),i.x=e.x,i.y=e.y,i.zIndex=19999})},t.showFail=function(t,e){cc.loader.loadRes("prefab/item/fail",cc.Prefab,function(o,n){if(o)return cc.log("fail\u52a0\u8f7d\u5931\u8d25");var i=cc.instantiate(n);i.getComponent("fail").show(t),i.parent=cc.find("Canvas"),i.x=e.x,i.y=e.y,i.zIndex=19999})},t.timeOffset=0,t}();o.default=r,cc._RF.pop()},{"../framwork/BaseUI":"BaseUI","./BigNumber":"BigNumber","./Shake":"Shake"}],addScore:[function(t,e,o){"use strict";cc._RF.push(e,"76119QmsfxKeZhLLJ9NX3mC","addScore");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=this&&this.__decorate||function(t,e,o,n){var i,s=arguments.length,r=s<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(r=(s<3?i(r):s>3?i(e,o,r):i(e,o))||r);return s>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=t("../framwork/BaseUI"),a=t("../utils/Utils"),c=cc._decorator,h=c.ccclass,l=(c.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.init=function(){a.default.setSpriteAssets(this.node.getComponent(cc.Sprite),"+5"),this.anim()},e.prototype.anim=function(){var t=this;cc.tween(this.node).call(function(){t.node.opacity=80}).by(.5,{y:70,opacity:255},{easing:"sineOut"}).delay(.5).by(.5,{y:70,opacity:0},{easing:"sineIn"}).call(function(){t.node.removeFromParent(),t.node.destroy()}).start()},s([h],e)}(r.default));o.default=l,cc._RF.pop()},{"../framwork/BaseUI":"BaseUI","../utils/Utils":"Utils"}],fail:[function(t,e,o){"use strict";cc._RF.push(e,"dd128g/5e5JZJmjAR1HqkIg","fail");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=this&&this.__decorate||function(t,e,o,n){var i,s=arguments.length,r=s<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(r=(s<3?i(r):s>3?i(e,o,r):i(e,o))||r);return s>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=t("../framwork/BaseUI"),a=cc._decorator,c=a.ccclass,h=(a.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.show=function(t){cc.find("Canvas").getComponent("GameModel").isEndless?this.GetText("lab_title").string="\u603b\u5206:"+t.gameScore:this.GetText("lab_title").string="\u603b\u5206:"+t.gameScore+"\u661f\u661f:"+t.gameGrade},e.prototype.onLoad=function(){this.startAnim()},e.prototype.onRepeat=function(){cc.systemEvent.emit("RESET_GAME"),this.onClose()},e.prototype.onClose=function(){this.node.destroy()},s([c],e)}(r.default));o.default=h,cc._RF.pop()},{"../framwork/BaseUI":"BaseUI"}],gameScene:[function(t,e,o){"use strict";cc._RF.push(e,"e1b90/rohdEk4SdmmEZANaD","gameScene");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=this&&this.__decorate||function(t,e,o,n){var i,s=arguments.length,r=s<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(r=(s<3?i(r):s>3?i(e,o,r):i(e,o))||r);return s>3&&r&&Object.defineProperty(e,o,r),r},r=this&&this.__awaiter||function(t,e,o,n){return new(o||(o=Promise))(function(i,s){function r(t){try{c(n.next(t))}catch(e){s(e)}}function a(t){try{c(n.throw(t))}catch(e){s(e)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(r,a)}c((n=n.apply(t,e||[])).next())})},a=this&&this.__generator||function(t,e){var o,n,i,s,r={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(t){return function(e){return c([t,e])}}function c(s){if(o)throw new TypeError("Generator is already executing.");for(;r;)try{if(o=1,n&&(i=2&s[0]?n.return:s[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,s[1])).done)return i;switch(n=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return r.label++,{value:s[1],done:!1};case 5:r.label++,n=s[1],s=[0];continue;case 7:s=r.ops.pop(),r.trys.pop();continue;default:if(!(i=(i=r.trys).length>0&&i[i.length-1])&&(6===s[0]||2===s[0])){r=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){r.label=s[1];break}if(6===s[0]&&r.label<i[1]){r.label=i[1],i=s;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(s);break}i[2]&&r.ops.pop(),r.trys.pop();continue}s=e.call(t,r)}catch(a){s=[6,a],n=0}finally{o=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var c=t("./EventEmit"),h=t("./framwork/BaseUI"),l=t("./item/addScore"),u=t("./item/Bird"),d=t("./item/Egg"),p=t("./item/homePanel"),f=t("./item/top"),g=t("./utils/AnalyticsUtilities"),_=t("./utils/AudioMgr"),m=t("./utils/CollectAnimation"),y=t("./utils/Utils"),b=cc._decorator,v=b.ccclass,C=(b.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.moveSpeed=0,e._eggPool=[],e._obstaclePool=[],e._spObPool=[],e._totalGroundLength=0,e._allObstacleNumber=0,e._dis=0,e._beginPosY=0,e._speed=0,e._crateEggTimeDis=0,e._createBulletTimeDis=0,e._endStageDeleteEggTimeDis=0,e._underLineNumber=0,e._topLineNumber=0,e._birdPosX=0,e._birdPosY=0,e._nowObstacleNumber=0,e._needCreateObstacle=!1,e._mapConfig=[],e._topObConfig=[],e._scoreCoefficient=0,e._nowLvScore=0,e.kuaiNum=0,e.showHeartAnimState=!1,e._obstacleConfig=null,e._randomNum=null,e.touchEventNode=null,e.bg=null,e.camera=null,e.speedMax=15,e.topMaxPos=0,e.birdPrefab=null,e.eggPrefab=null,e.grassPrefab=null,e.groundPrefab=null,e.propPrefab=null,e.spObstaclePrefab=null,e.thornPrefab=null,e.sensorPrefab=null,e.addScorePrefab=null,e.homePanelPrefab=null,e.bird_diciPrefab=null,e.deadPrefab=null,e.topPrefab=null,e.bird_block1=null,e.bird_block2=null,e.bird_block3=null,e.bird_block4=null,e.bird_block5=null,e.propScore=0,e._touchStart=!1,e._birdLead=null,e._groundPool=null,e._grassPool=null,e._thornPool=null,e._eggNodePool=null,e._bulletPool=null,e._spObNodePool=null,e._gameOver=!1,e._nowGroundLength=0,e._mapConfigIndex=0,e._startBullet=!1,e._perfectCount=0,e._perfectCountDisTime=0,e._lastPerfectTime=0,e._bangNumber=0,e._startEndStage=!1,e._endStageLastDeleteEggTime=0,e._backGameCount=0,e._isWin=!1,e._showResult=!1,e._atkObstacleNumer=0,e._showAniCount=0,e._mapBeginPox=0,e.spObsIndex=0,e.grassIndex=0,e.propNum=1,e.propList=[],e.topPrefabPool=[],e.startTopPosX=0,e._mapTopBeginPox=-cc.winSize.width-100,e._lastCreateBulletTime=0,e._lastCreateEggTime=0,e.textIndex=0,e._homePanel=null,e.heart=null,e.score=0,e.leftScore=0,e.fen=0,e.speedMi=0,e}return i(e,t),e.prototype.onLoad=function(){cc.game.setFrameRate(59),cc.director.getPhysicsManager().enabled=!0,cc.view.enableAntiAlias(!1),window.goldCollectAnimation=new m.default,g.default.logEvent("on_game_start"),this.node.getComponent("PlayerModel").initConfig(),this.node.getComponent("GameModel").initConfig(),this.initView(),this.initPool(),this.onEvent(),console.log("\u7a97\u53e3\u5c3a\u5bf8",cc.winSize)},e.prototype.initView=function(){var t=this;y.default.setSpriteAssets(this.GetSprite("background"),"bg"),window.platform.getRes("particle").then(function(e){t.GetGameObject("bird_beijing").getComponent(cc.ParticleSystem).spriteFrame=new cc.SpriteFrame(e)})},e.prototype.initModel=function(){this.camera=this.GetGameObject("Main Camera"),this.bg=this.GetGameObject("background"),this.touchEventNode=this.GetGameObject("touchEvent"),y.default.setSpriteAssets(this.GetSprite("progressbar_bg"),"progressbar_bg"),y.default.setSpriteAssets(this.GetSprite("progressbar"),"progressbar"),y.default.setSpriteAssets(this.GetSprite("star1"),"star"),y.default.setSpriteAssets(this.GetSprite("star2"),"star"),y.default.setSpriteAssets(this.GetSprite("star3"),"star"),y.default.setSpriteAssets(this.GetSprite("scoreboard"),"scoreboard"),y.default.setSpriteAssets(this.GetSprite("levelboard"),"levelboard"),this._obstacleConfig=this.node.getComponent("GameModel")._obstacleConfig,this.moveSpeed=300,this._eggPool=[],this._obstaclePool=[],this._spObPool=[],this._totalGroundLength=0,this._allObstacleNumber=this.score_speed().obsNum,this._dis=80,cc.winSize.height<1340?(this._beginPosY=-cc.winSize.height/2-4*this._dis+40,this.topMaxPos=cc.winSize.height/2-this.topPrefab.data.height/2+this._dis):(this._beginPosY=-(cc.winSize.height/2+this._dis-42),this.topMaxPos=cc.winSize.height/2-this.topPrefab.data.height/2),this.node.getComponent("GameModel").isEndless?this._speed=4:Math.floor(this.node.getComponent("GameModel")._level)+3>this.speedMax?this._speed=this.speedMax:this._speed=3+Math.floor(this.node.getComponent("GameModel")._level),this._crateEggTimeDis=200,this._createBulletTimeDis=120,this._endStageDeleteEggTimeDis=300,this._randomNum=this._obstacleConfig.length,this._underLineNumber=5,this._topLineNumber=3,this._birdPosX=-cc.winSize.width/2+150,this._birdPosY=-cc.winSize.height/2+this._dis*(this._underLineNumber+1)+50,this._nowObstacleNumber=0,this._needCreateObstacle=!0,this._mapConfig=[],this._topObConfig=[],this._scoreCoefficient=0,this._nowLvScore=0,this.kuaiNum=0,this.showHeartAnimState=!1},e.prototype.onEvent=function(){cc.systemEvent.on("LONGRECOMMEND_SHOW_RESULT",this.showResultPanel,this),cc.systemEvent.on("START_GAME",this.startGame,this),cc.systemEvent.on("GAME_OVER",this.gameOver,this),cc.systemEvent.on("BACK_GAME",this.backGame,this),cc.systemEvent.on("BACK_GAME_COUNTDOWN_OVER",this.backGameCountDownOver,this),cc.systemEvent.on("TOUCH_START",this.onTouchStart,this),cc.systemEvent.on("TOUCH_MOVE",this.onTouchMove,this),cc.systemEvent.on("TOUCH_END",this.onTouchEnd,this),cc.systemEvent.on("CHANGE_GRAVITYSCALE",this.changeGravity,this),cc.systemEvent.on("RESET_GAME",this.resetMap,this),cc.systemEvent.on("PERFECT",this.showPerfect,this),cc.systemEvent.on("DOACT",this.CheckObstacleDoAct,this),cc.systemEvent.on("ADD_ATK_NUMBER",this.addAtkNumber,this),cc.systemEvent.on("SHOW_DEAD",this.showDead,this),cc.systemEvent.on("CONFIG_LOAD_SUCCESS",this.loadConfigCall,this),cc.systemEvent.on("addscore",this.addscore,this)},e.prototype.addscore=function(t){this.propScore+=5,this.touchEventNode.getComponent(c.default).updateXing(this.fen_level());for(var e=0;e<this.propList.length;e++)this.propList[e]==t.node&&this.propList.splice(e,1);var o=cc.instantiate(this.addScorePrefab);o.getComponent(l.default).init(),o.setPosition(t.pos),o.parent=this.node,o.zIndex=4,window.platform.getRes("GetProps","audio").then(function(t){_.default.Instance().playSFX(t)})},e.prototype.loadConfigCall=function(){var t=this;cc.loader.loadRes("prefab/item/bird",cc.Prefab,function(e,o){if(e)return cc.log("bird\u8d44\u6e90\u52a0\u8f7d\u5931\u8d25"),void window.platform.showMsg("\u8d44\u6e90\u52a0\u8f7d\u5931\u8d25");t.birdPrefab=o,cc.loader.loadRes("prefab/item/egg",cc.Prefab,function(e,o){if(e)return cc.log("egg\u8d44\u6e90\u52a0\u8f7d\u5931\u8d25"),void window.platform.showMsg("\u8d44\u6e90\u52a0\u8f7d\u5931\u8d25");t.eggPrefab=o,cc.loader.loadRes("prefab/item/grass",cc.Prefab,function(e,o){if(e)return cc.log("grass\u8d44\u6e90\u52a0\u8f7d\u5931\u8d25"),void window.platform.showMsg("\u8d44\u6e90\u52a0\u8f7d\u5931\u8d25");t.grassPrefab=o,cc.loader.loadRes("prefab/item/ground",cc.Prefab,function(e,o){if(e)return cc.log("ground\u8d44\u6e90\u52a0\u8f7d\u5931\u8d25"),void window.platform.showMsg("\u8d44\u6e90\u52a0\u8f7d\u5931\u8d25");t.groundPrefab=o,cc.loader.loadRes("prefab/item/prop",cc.Prefab,function(e,o){if(e)return cc.log("prop\u8d44\u6e90\u52a0\u8f7d\u5931\u8d25"),void window.platform.showMsg("\u8d44\u6e90\u52a0\u8f7d\u5931\u8d25");t.propPrefab=o,cc.loader.loadRes("prefab/item/spObstacle",cc.Prefab,function(e,o){if(e)return cc.log("spObstacle\u8d44\u6e90\u52a0\u8f7d\u5931\u8d25"),void window.platform.showMsg("\u8d44\u6e90\u52a0\u8f7d\u5931\u8d25");t.spObstaclePrefab=o,cc.loader.loadRes("prefab/item/thorn",cc.Prefab,function(e,o){if(e)return cc.log("thorn\u8d44\u6e90\u52a0\u8f7d\u5931\u8d25"),void window.platform.showMsg("\u8d44\u6e90\u52a0\u8f7d\u5931\u8d25");t.thornPrefab=o,cc.loader.loadRes("prefab/item/sensor",cc.Prefab,function(e,o){if(e)return cc.log("sensor\u8d44\u6e90\u52a0\u8f7d\u5931\u8d25"),void window.platform.showMsg("\u8d44\u6e90\u52a0\u8f7d\u5931\u8d25");t.sensorPrefab=o,cc.loader.loadRes("prefab/item/addScore",cc.Prefab,function(e,o){if(e)return cc.log("addScore\u8d44\u6e90\u52a0\u8f7d\u5931\u8d25"),void window.platform.showMsg("\u8d44\u6e90\u52a0\u8f7d\u5931\u8d25");t.addScorePrefab=o,cc.loader.loadRes("prefab/item/homePanel",cc.Prefab,function(e,o){if(e)return cc.log("addScore\u8d44\u6e90\u52a0\u8f7d\u5931\u8d25"),void window.platform.showMsg("\u8d44\u6e90\u52a0\u8f7d\u5931\u8d25");t.homePanelPrefab=o,cc.loader.loadRes("prefab/item/bird_dici",cc.Prefab,function(e,o){if(e)return cc.log("bird_dici\u8d44\u6e90\u52a0\u8f7d\u5931\u8d25"),void window.platform.showMsg("\u8d44\u6e90\u52a0\u8f7d\u5931\u8d25");t.bird_diciPrefab=o,cc.loader.loadRes("prefab/item/dead",cc.Prefab,function(e,o){if(e)return cc.log("dead\u8d44\u6e90\u52a0\u8f7d\u5931\u8d25"),void window.platform.showMsg("\u8d44\u6e90\u52a0\u8f7d\u5931\u8d25");t.deadPrefab=o,cc.loader.loadRes("prefab/item/top",cc.Prefab,function(e,o){if(e)return cc.log("top\u8d44\u6e90\u52a0\u8f7d\u5931\u8d25"),void window.platform.showMsg("\u8d44\u6e90\u52a0\u8f7d\u5931\u8d25");t.topPrefab=o,window.platform.getRes("bird_block1").then(function(e){t.bird_block1=e,window.platform.getRes("bird_block2").then(function(e){t.bird_block2=e,window.platform.getRes("bird_block3").then(function(e){t.bird_block3=e,window.platform.getRes("bird_block4").then(function(e){t.bird_block4=e,window.platform.getRes("bird_block5").then(function(e){t.bird_block5=e,t.initModel(),t.resetMap(),cc.systemEvent.emit("START_GAME")})})})})})})})})})})})})})})})})})})},e.prototype.onTouchStart=function(){this._touchStart=!0,this.createEgg()},e.prototype.onTouchMove=function(){},e.prototype.onTouchEnd=function(){this._touchStart=!1},e.prototype.showDead=function(){var t=cc.instantiate(this.deadPrefab);t.active=!0,this.node.addChild(t)},e.prototype.CheckObstacleDoAct=function(t){this.node.getComponent("GameModel").isGameStart&&("END_STAGE"!=t||this.startEndStage())},e.prototype.addAtkNumber=function(){this._atkObstacleNumer++},e.prototype.startEndStage=function(){this._startEndStage||(this._startEndStage=!0)},e.prototype.showPerfect=function(){if(cc.log("\u5b8c\u7f8e\u901a\u8fc7"),!this._startBullet){var t=this.node.getComponent("GameModel").getLocalTime();t-this._lastPerfectTime<this._perfectCountDisTime||(cc.systemEvent.emit("SHOW_PERFECT_ICON"),this._perfectCount++,this._lastPerfectTime=t,this._perfectCount>=3&&this.startBullet())}},e.prototype.offEvent=function(){cc.systemEvent.off("LONGRECOMMEND_SHOW_RESULT",this.showResultPanel,this),cc.systemEvent.off("START_GAME",this.startGame,this),cc.systemEvent.off("GAME_OVER",this.gameOver,this),cc.systemEvent.off("BACK_GAME",this.backGame,this),cc.systemEvent.off("BACK_GAME_COUNTDOWN_OVER",this.backGameCountDownOver,this),cc.systemEvent.off("TOUCH_START",this.onTouchStart,this),cc.systemEvent.off("TOUCH_MOVE",this.onTouchMove,this),cc.systemEvent.off("TOUCH_END",this.onTouchEnd,this),cc.systemEvent.off("CHANGE_GRAVITYSCALE",this.changeGravity,this),cc.systemEvent.off("RESET_GAME",this.resetMap,this),cc.systemEvent.off("PERFECT",this.showPerfect,this),cc.systemEvent.off("DOACT",this.CheckObstacleDoAct,this),cc.systemEvent.off("ADD_ATK_NUMBER",this.addAtkNumber,this),cc.systemEvent.off("SHOW_DEAD",this.showDead,this),cc.systemEvent.off("CONFIG_LOAD_SUCCESS",this.loadConfigCall,this),cc.systemEvent.off("addscore",this.addscore,this)},e.prototype.showResultPanel=function(t,e){void 0===e&&(e=!0),console.log("\u6e38\u620f\u5931\u8d25");var o;o=this.node.getComponent("GameModel").isEndless?{gameScore:this.score+this.propScore,gameWin:0,gameGrade:0}:{gameScore:this.score+this.propScore,gameWin:0,gameGrade:this.fen_level()},window.platform.submitGameScore(o)&&cc.log("\u4eba\u4eba\u79c0\u63a5\u53e3\u8fd4\u56detrue"),window.platform.getRes("fail","audio").then(function(t){_.default.Instance().playSFX(t)})},e.prototype.startGame=function(){_.default.Instance().setBGMVolume(75),this.speedUpBgParticle();for(var t=0;t<this._eggPool.length;t++){var e=this._eggPool[t];if(e&&e._parent){var o=y.default.getRndInteger(1,5);e.getComponent(d.default).setSpriteFrmeFir(this["bird_block"+o]),e.getComponent("Egg").changeNormal(),this._eggNodePool.put(e)}}this._eggPool=[];for(var n=0,i=this._obstaclePool;n<i.length;n++)(a=i[n])&&a._parent&&(a.active=!0);for(var s=0,r=this._spObPool;s<r.length;s++){var a;(a=r[s])&&a._parent&&(a.active=!0)}this.node.getComponent("GameModel").deleteEnercy(),this.touchEventNode.getComponent("EventEmit").onStartGameState(),this.node.getComponent("GameModel").isGameStart=!0,this._birdLead&&(this._birdLead.y=this._beginPosY+5*this._dis+this._birdLead.height/2-40,this._birdLead.getComponent(u.default).showTrailing(),this._birdLead.getComponent("Bird").changeNormalIcon())},e.prototype.speedUpBgParticle=function(){this.GetGameObject("bird_beijing").getComponent(cc.ParticleSystem).gravity=cc.v2(-1e3,0)},e.prototype.initPool=function(){return r(this,void 0,void 0,function(){var t,e,o,n,i,s,r;return a(this,function(a){switch(a.label){case 0:return this._groundPool=new cc.NodePool,this._grassPool=new cc.NodePool,this._thornPool=new cc.NodePool,this._eggNodePool=new cc.NodePool,this._bulletPool=new cc.NodePool,this._spObNodePool=new cc.NodePool,[4,this.GetPrefab("prefab/item/thorn")];case 1:for(t=a.sent(),s=0;s<12;s++)e=cc.instantiate(t),this._thornPool.put(e);return[4,this.GetPrefab("prefab/item/egg")];case 2:for(o=a.sent(),s=0;s<12;s++)n=cc.instantiate(o),this._eggNodePool.put(n);return[4,this.GetPrefab("prefab/item/bullet")];case 3:for(i=a.sent(),s=0;s<12;s++)r=cc.instantiate(i),this._bulletPool.put(r);return[2]}})})},e.prototype.resetMap=function(){_.default.Instance().setBGMVolume(100),this.node.getComponent("GameModel")._trialBirdSkin=null;for(var t=0;t<this._eggPool.length;t++){var e=this._eggPool[t];e&&e._parent&&this._eggNodePool.put(e)}this._eggPool=[];for(var o=0,n=this._obstaclePool;o<n.length;o++)(r=n[o])&&r._parent&&("ground"==r.group?r.getComponent("Ground")&&r.getComponent("Ground")._enable?this._groundPool.put(r):r.destroy():"grass"==r.group?r.getComponent("Grass")&&r.getComponent("Grass")._enable?(r.getComponent("Grass").stopAct(),this._grassPool.put(r)):r.destroy():"thorn"==r.group?this._thornPool.put(r):r.destroy());this._obstaclePool=[];for(var i=0,s=this._spObPool;i<s.length;i++){var r;(r=s[i])&&r._parent&&this._spObNodePool.put(r)}for(var a=0;a<this.topPrefabPool.length;a++)this.topPrefabPool[a]&&this.topPrefabPool[a].parent&&this.topPrefabPool[a].destroy;for(this.topPrefabPool=[],a=0;a<this.propList.length;a++)this.propList[a].destroy();this.propList=[],console.log("\u9053\u5177",this.propList),this._homePanel&&this._homePanel.getComponent(p.default).closeAnim(),this.createTopPrefab(),this._spObPool=[],this._needCreateObstacle=!0,this.touchEventNode.x=0,this.bg.x=this.touchEventNode.x,this.touchEventNode.zIndex=9,this.camera.x=0,this._gameOver=!1,this._totalGroundLength=0,this._nowGroundLength=0,this._nowObstacleNumber=0,this._mapConfig=[],this._topObConfig=[],this._mapConfigIndex=0,this.node.getComponent("GameModel").isEndless?this._speed=4:Math.floor(this.node.getComponent("GameModel")._level)+3>this.speedMax?this._speed=this.speedMax:this._speed=3+Math.floor(this.node.getComponent("GameModel")._level),console.log(this._speed),this._startBullet=!1,this._perfectCount=0,this._perfectCountDisTime=150,this._lastPerfectTime=0,this._bangNumber=0,this._startEndStage=!1,this._endStageLastDeleteEggTime=0,this.spObsIndex=0,this.grassIndex=0,this.propNum=1,this.kuaiNum=0,this.score=0,this.leftScore=0,this.fen=0,this.speedMi=0,this.propScore=0,this.topPrefabPool=[],this.propList=[],this.startTopPosX=0,this._mapTopBeginPox=-cc.winSize.width-100,this._backGameCount=1,this._isWin=!1,this._showResult=!1,this.showHeartAnimState=!1,this.node.getComponent("GameModel")._lastMapConfig&&this.node.getComponent("GameModel")._lastMapConfig.length&&this.node.getComponent("GameModel")._lastMapConfig.length>0?(this._mapConfig=this.node.getComponent("GameModel")._lastMapConfig,this._topObConfig=this.node.getComponent("GameModel")._lastTopObConfig):(this.createMapConfig(),console.log("this._mapConfig",this._mapConfig),this.node.getComponent("GameModel")._lastTopObConfig=this._topObConfig,this.node.getComponent("GameModel").setLastMapConfig(this._mapConfig)),this.calculationTotalLength(),this._nowLvScore=0,this._scoreCoefficient=this.getScroeCoefficient(),this._atkObstacleNumer=0,this._showAniCount=0,this.createMap(),this.createBird(),this.resetBgParticle()},e.prototype.resetBgParticle=function(){this.GetGameObject("bird_beijing").getComponent(cc.ParticleSystem).gravity=cc.v2(-30,0)},e.prototype.createBird=function(t){return void 0===t&&(t=null),r(this,void 0,void 0,function(){var t;return a(this,function(){return this._birdLead?(this._birdLead.getComponent("Bird")._invincible=!1,this._birdLead.getComponent("Bird")._isAlive=!0,this._birdLead.getComponent("Bird").hideTrailing(),this._birdLead.getComponent("Bird").changeNormalIcon(),this._birdLead.angle=0,this._birdLead.x=-cc.winSize.width/2-150,this._birdLead.y=this._beginPosY+5*this._dis,this._birdLead.zIndex=3,this._birdLead.getComponent(cc.RigidBody).fixedRotation=!0,this._birdLead.getComponent("Bird").setSpeed(0),cc.tween(this._birdLead).to(.5,{x:0}).start(),this.node.getComponent("GameModel").isGameStart||(this._birdLead.x=this.touchEventNode.x),[2]):((t=cc.instantiate(this.birdPrefab)).x=-cc.winSize.width/2-150,t.y=this._beginPosY+5*this._dis,this.node.addChild(t),t.angle=0,t.zIndex=3,t.getComponent(cc.RigidBody).fixedRotation=!0,t.getComponent("Bird").setSpeed(0),this._birdLead=t,this._birdLead.getComponent("Bird").hideTrailing(),this._birdLead.getComponent("Bird")._invincible=!1,this._birdLead.getComponent("Bird").changeNormalIcon(),cc.tween(t).to(.5,{x:0}).start(),this.node.getComponent("GameModel").isGameStart||(this._birdLead.x=this.touchEventNode.x),[2])})})},e.prototype.addSpeed=function(){this._speed=this.speedMax},e.prototype.getScroeCoefficient=function(){var t=this.node.getComponent("GameModel")._level;return Number(t)<=10?1.2:Number(t)<=20?1.6:Number(t)<=40?2.2:Number(t)<=50?2.8:4},e.prototype.createMapConfig=function(){if(!(this._nowObstacleNumber>=this._allObstacleNumber)){var t=Math.floor(Math.random()*this._randomNum);if(this._obstacleConfig[t]){if(this._nowObstacleNumber+=1,this._mapConfig.push(t),t>=-1&&t<=8){var e={_obId:-1};if(Math.floor(100*Math.random())>50){var o=Math.floor(8*Math.random());8==o&&(o=7),5==t?o>1&&o<=5&&(o=-1):4==t?o>2&&o<=5&&(o=-1):3==t?o>3&&o<=5&&(o=-1):2==t&&o>3&&o<=5&&(o=-1),e._obId=o}var n=Math.floor(4*Math.random())*this._dis;e._dis=n,Math.random()<.5&&(e._dis=-n),this._topObConfig.push(e)}else this._topObConfig.push({_obId:-1,_dis:0});return this.createMapConfig()}}},e.prototype.calculationTotalLength=function(){for(var t=0,e=0,o=this._mapConfig;e<o.length;e++){var n=o[e];t+=this.calculationObstacleLength(this._obstacleConfig[Number(n)])}this._totalGroundLength=t*this._dis,console.log("\u5730\u56fe\u957f\u5ea6:===>",this._totalGroundLength)},e.prototype.calculationObstacleLength=function(t){var e=0;if(t)for(var o=String(t.obstacle).split(","),n=0;n<o.length;n++){var i=o[n];0==Number(i)||-1==Number(i)?e++:e+=3}return e},e.prototype.createMap=function(t){void 0===t&&(t=null),this._mapBeginPox=-cc.winSize.width/2+0,this.createBeginPanel(this._mapBeginPox,this._beginPosY),this.createObstacle(this._obstacleConfig[this._mapConfig[this._mapConfigIndex]],this._mapBeginPox,this._beginPosY,!0);for(var e=0,o=this._obstaclePool;e<o.length;e++)(s=o[e])&&s._parent&&s.y>this._birdPosY&&s.x<this.touchEventNode.x+cc.winSize.width/2&&(s.active=!1);for(var n=0,i=this._spObPool;n<i.length;n++){var s;(s=i[n])&&s._parent&&s.y>this._birdPosY&&s.x<this.touchEventNode.x+cc.winSize.width/2+50&&(s.active=!1)}},e.prototype.createBeginPanel=function(t,e){for(var o=t,n=0;n<11;n++)this.createZheDangOb(o,e,1),this.createZheDangOb(o,e+this._dis,1),this.createZheDangOb(o,e+2*this._dis,1),this.createZheDangOb(o,e+3*this._dis,1),o+=this._dis;for(n=0;n<11;n++)this.createGrass(t,e+4*this._dis,null,null),t+=this._dis;this._mapBeginPox+=11*this._dis},e.prototype.createZheDangOb=function(t,e,o,n){void 0===n&&(n=null);var i=null;i=this._spObNodePool.size()>0?this._spObNodePool.get():cc.instantiate(this.spObstaclePrefab),this.spObsIndex++,i.name="ob"+this.spObsIndex,i.x=t,i.y=e,cc.director.getScene().getChildByName("Canvas").addChild(i),i.getComponent("spObstacle").initType(o),i.zIndex=2,this._spObPool.push(i)},e.prototype.createGrass=function(t,e,o,n,i,s,r){void 0===o&&(o=null),void 0===n&&(n=null),void 0===i&&(i=null),void 0===s&&(s=null),void 0===r&&(r=null);var a=null;return this.createProp(t,e,n,s),this.grassIndex++,(a=this._grassPool.size()>0?this._grassPool.get():cc.instantiate(this.grassPrefab)).x=t,a.y=e,a.name="grass"+this.grassIndex,a.zIndex=2,this.node.addChild(a),a.getComponent("Grass")._isPerfect=!1,a.getComponent("Grass")._actType=-1,a.getComponent("Grass").changeNormalIcon(),o&&a.getComponent("Grass").addPerfect(),n&&a.getComponent("Grass").addAct(n,i,s),r&&a.getComponent("Grass").repeatAct(8,s),this._obstaclePool.push(a),a},e.prototype.createProp=function(t,e,o,n){void 0===n&&(n=null),this.kuaiNum++;var i,s=this.score_speed().porpNum,r=Math.floor(this._totalGroundLength/s)*this.propNum,a=y.default.getRndInteger(1,100),c=0;if(o)h=Math.floor((this.topMaxPos-this.topPrefab.data.height/2-(n+this._dis))/this._dis),c=e+n+y.default.getRndInteger(1,h)*this._dis+20;else{var h=Math.floor((this.topMaxPos-this.topPrefab.data.height/2-(e+this._dis))/this._dis);c=e+y.default.getRndInteger(1,h)*this._dis}this.node.getComponent("GameModel").isEndless?this.kuaiNum%20==0&&a>=50&&(this.propNum++,(i=cc.instantiate(this.propPrefab)).getComponent("Prop").initType(),i.x=t,i.y=c,i.parent=this.node,i.zIndex=3,this.propList.push(i)):t>=r-this._dis/2&&t<=r+this._dis/2&&this.propNum<s+1&&(this.propNum++,(i=cc.instantiate(this.propPrefab)).getComponent("Prop").initType(),i.x=t,i.y=c,i.parent=this.node,i.zIndex=3,this.propList.push(i))},e.prototype.createObstacle=function(t,e,o,n){if(this._needCreateObstacle&&t){var i=String(t.obstacle).split(","),s=this.calculationObstacleLength(t);s>0&&(this.createDownGround(s,e,o),this.createTopPrefab(),this.createDetailObstacle(i,e,o+4*this._dis)),n&&(this._nowGroundLength+=s*this._dis),this._mapConfigIndex++,this._mapBeginPox+=s*this._dis}},e.prototype.createTopPrefab=function(){return r(this,void 0,void 0,function(){var t,e,o;return a(this,function(){for(t=0;t<2;t++)e=null,o=cc.instantiate(this.topPrefab),(e=cc.instantiate(o)).getComponent(f.default).init(),e.x=this.startTopPosX,e.y=this.topMaxPos,cc.director.getScene().getChildByName("Canvas").addChild(e),e.zIndex=2,this.topPrefabPool.push(e),this.startTopPosX+=cc.winSize.width;return[2]})})},e.prototype.createDownGround=function(t,e,o){for(var n=0;n<t;n++)this.createZheDangOb(e,o,1),this.createZheDangOb(e,o+this._dis,1),this.createZheDangOb(e,o+2*this._dis,1),this.createZheDangOb(e,o+3*this._dis,1),e+=this._dis},e.prototype.createTopObstacle=function(t,e,o){for(var n=e,i=0;i<t;i++)this.createZheDangOb(n,o,1),this.createZheDangOb(n,o-this._dis,1),this.createZheDangOb(n,o-2*this._dis,1),n+=this._dis},e.prototype.deleteObByPosX=function(t,e){for(var o=0,n=this._spObPool;o<n.length;o++){var i=n[o];"ob56"==i.name&&console.log("=====>",null!=i,null!=i._parent,i.y<e,i.x,t),i&&i._parent&&i.y<e&&Math.abs(i.x-t)<=5&&this._spObNodePool.put(i)}},e.prototype.genAGround=function(t,e,o,n,i,s){return void 0===o&&(o=null),void 0===n&&(n=null),void 0===i&&(i=null),void 0===s&&(s=null),r(this,void 0,void 0,function(){var r;return a(this,function(){return r=null,(r=this._groundPool.size()>0?this._groundPool.get():cc.instantiate(this.groundPrefab)).x=t,r.y=e,cc.director.getScene().getChildByName("Canvas").addChild(r),r.getComponent("Ground")._isPerfect=!1,r.getComponent("Ground")._actType=-1,r.getComponent("Ground").changeNormalIcon(),o&&r.getComponent("Ground").addPerfect(),n&&r.getComponent("Ground").addAct(n,i,s),r.zIndex=2,this._obstaclePool.push(r),[2,r]})})},e.prototype.createThron=function(t,e,o){return void 0===o&&(o=null),r(this,void 0,void 0,function(){var n;return a(this,function(){return n=null,(n=this._thornPool.size()>0?this._thornPool.get():cc.instantiate(this.thornPrefab)).x=t,n.y=e,n.zIndex=2,this.node.addChild(n),n.getComponent("Thorn").setReverse(o),this._obstaclePool.push(n),[2]})})},e.prototype.createSensor=function(t,e,o){return r(this,void 0,void 0,function(){var n;return a(this,function(){return(n=cc.instantiate(this.sensorPrefab)).x=t,n.y=e,n.zIndex=2,cc.director.getScene().getChildByName("Canvas").addChild(n),o&&n.getComponent("Sensor").initType(o),this._obstaclePool.push(n),[2]})})},e.prototype.createDetailObstacle=function(t,e,o,n){void 0===n&&(n=null);var i=e,s=this.node.getComponent("GameModel").getLocalTime(),r=this._dis;n&&(r=-this._dis);for(var a=0,c=t;a<c.length;a++){var h=c[a];switch(Number(h)){case-1:this.deleteObByPosX(e,o),this.createProp(e,o,!1),e+=this._dis;break;case 0:n||this.createGrass(e,o),e+=this._dis;break;case 1:n?this._topObConfig[this._mapConfigIndex]&&(i=e+Number(this._topObConfig[this._mapConfigIndex]._dis)):i=e;for(var l=0;l<3;l++)this.genAGround(i,o),i+=this._dis;if(n)e+=3*this._dis;else for(l=0;l<3;l++)l<=1?this.createGrass(e,o+r,!0):this.createGrass(e,o+r),e+=this._dis;break;case 2:for(n?this._topObConfig[this._mapConfigIndex]&&(i=e+Number(this._topObConfig[this._mapConfigIndex]._dis)):i=e,l=0;l<3;l++)this.genAGround(i,o),this.genAGround(i,o+r),i+=this._dis;if(n)e+=3*this._dis;else for(l=0;l<3;l++)l<=1?this.createGrass(e,o+2*r,!0):this.createGrass(e,o+2*r),e+=this._dis;break;case 3:for(n?this._topObConfig[this._mapConfigIndex]&&(i=e+Number(this._topObConfig[this._mapConfigIndex]._dis)):i=e,l=0;l<3;l++)this.genAGround(i,o),this.genAGround(i,o+r),this.genAGround(i,o+2*r),i+=this._dis;if(n)e+=3*this._dis;else for(l=0;l<3;l++)l<=1?this.createGrass(e,o+3*r,!0):this.createGrass(e,o+3*r),e+=this._dis;break;case 4:for(n?this._topObConfig[this._mapConfigIndex]&&(i=e+Number(this._topObConfig[this._mapConfigIndex]._dis)):i=e,l=0;l<3;l++)this.genAGround(i,o),this.genAGround(i,o+r),this.genAGround(i,o+2*r),this.genAGround(i,o+3*r),i+=this._dis;if(n)e+=3*this._dis;else for(l=0;l<3;l++)l<=1?this.createGrass(e,o+4*r,!0):this.createGrass(e,o+4*r),e+=this._dis;break;case 5:for(n?this._topObConfig[this._mapConfigIndex]&&(i=e+Number(this._topObConfig[this._mapConfigIndex]._dis)):i=e,l=0;l<3;l++)this.genAGround(i,o),this.genAGround(i,o+r),this.genAGround(i,o+2*r),this.genAGround(i,o+3*r),this.genAGround(i,o+4*r),i+=this._dis;if(!n)for(l=0;l<3;l++)l<=1?this.createGrass(e,o+5*r,!0):this.createGrass(e,o+5*r),e+=this._dis;break;case 6:if(i=e,!n)for(l=0;l<3;l++)this.createGrass(i,o),i+=this._dis;for(n?this._topObConfig[this._mapConfigIndex]&&(i=e+Number(this._topObConfig[this._mapConfigIndex]._dis)):i=e,l=0;l<3;l++)n?this.createThron(i,o+r/2+35,n):this.createThron(i,o+r/2+25),i+=50,e+=this._dis;break;case 7:if(i=e,!n)for(l=0;l<3;l++)this.createGrass(i,o),i+=this._dis;for(n?this._topObConfig[this._mapConfigIndex]&&(i=e+Number(this._topObConfig[this._mapConfigIndex]._dis)):i=e,l=0;l<4;l++)n?this.createThron(i,o+r/2+35,!0):this.createThron(i,o+r/2+25),i+=50,l<3&&(e+=this._dis);break;case 8:if(i=e,!n)for(l=0;l<3;l++)this.createGrass(i,o),i+=this._dis;for(n?this._topObConfig[this._mapConfigIndex]&&(i=e+Number(this._topObConfig[this._mapConfigIndex]._dis)):i=e,l=0;l<6;l++)n?this.createThron(i,o+r/2+35,!0):this.createThron(i,o+r/2+25),i+=50,l<3&&(e+=this._dis);break;case 9:for(i=e,l=0;l<3;l++)this.genAGround(i,o),this.genAGround(i,o+r),i+=this._dis;for(l=0;l<3;l++)l<=1?this.createGrass(e,o+5*r+22,!0):this.createGrass(e,o+5*r+22),e+=this._dis;break;case 10:for(i=e,l=0;l<3;l++)this.genAGround(i,o),this.genAGround(i,o+r),this.genAGround(i,o+4*r+24),this.genAGround(i,o+5*r+24),i+=this._dis;for(l=0;l<3;l++)l<=1?this.createGrass(e,o+6*r+20,!0):this.createGrass(e,o+6*r+20),e+=this._dis;break;case 11:for(i=e,l=0;l<3;l++)this.genAGround(i,o),this.genAGround(i,o+r),this.genAGround(i,o+2*r),i+=this._dis;for(l=0;l<3;l++)l<=1?this.createGrass(e,o+6*r+22,!0):this.createGrass(e,o+6*r+22),e+=this._dis;break;case 12:for(i=e,this.createSensor(i-4*this._dis,o+r,s),l=0;l<3;l++)this.genAGround(i,this.topMaxPos-this.topPrefab.data.height/2-this._dis/2),this.genAGround(i,this.topMaxPos-this.topPrefab.data.height/2-this._dis/2*3),i+=this._dis;for(l=0;l<3;l++)this.createGrass(e,o),e+=this._dis;break;case 13:for(i=e,l=0;l<3;l++)this.genAGround(i,o),this.genAGround(i,o+r),this.genAGround(i,o+2*r),this.genAGround(i,o+6*r+22),this.genAGround(i,o+7*r+22),i+=this._dis;for(l=0;l<3;l++)l<=1?this.createGrass(e,o+8*r+22,!0):this.createGrass(e,o+8*r+22),e+=this._dis;break;case 14:for(i=e,s=this.node.getComponent("GameModel").getLocalTime(),this.createSensor(i-4*this._dis,o+r,s),l=0;l<3;l++)this.genAGround(i,o),this.genAGround(i,o+r),this.genAGround(i,o+2*r),i+=this._dis;for(l=0;l<3;l++)l<=1?this.createGrass(e,o+3*r,!0,s,1,3*this._dis+6):this.createGrass(e,o+3*r,!1,s,1,3*this._dis+6),e+=this._dis;break;case 15:for(i=e,s=this.node.getComponent("GameModel").getLocalTime(),this.createSensor(i-4*this._dis,o+r,s),l=0;l<3;l++)this.genAGround(i,o),this.genAGround(i,o+r),this.genAGround(i,o+2*r),this.genAGround(i,o+5*r,!1,s,1,1*this._dis+2),this.genAGround(i,o+3*r,!1,s,1,1*this._dis+2),this.genAGround(i,o+4*r,!1,s,1,1*this._dis+2),this.genAGround(i,o+6*r,!1,s,1,2*this._dis+4),this.genAGround(i,o+7*r,!1,s,1,2*this._dis+4),i+=this._dis;for(l=0;l<3;l++)l<=1?this.createGrass(e,o+8*r,!0,s,1,2*this._dis+4):this.createGrass(e,o+8*r,!1,s,1,2*this._dis+4),e+=this._dis;break;case 16:for(i=e,s=this.node.getComponent("GameModel").getLocalTime(),this.createSensor(i-4*this._dis,o+r,s),l=0;l<3;l++)this.genAGround(i,o),this.genAGround(i,o+r),this.genAGround(i,o+2*r,!1,s,1,2*this._dis+4),this.genAGround(i,o+3*r,!1,s,1,2*this._dis+4),i+=this._dis;for(l=0;l<3;l++)l<=1?this.createGrass(e,o+4*r,!0,s,1,2*this._dis+4):this.createGrass(e,o+4*r,!1,s,1,2*this._dis+4),e+=this._dis;break;case 17:for(i=e,s=this.node.getComponent("GameModel").getLocalTime(),this.createSensor(i-4*this._dis,o+r,s),l=0;l<3;l++)this.genAGround(i,cc.winSize.height/2-208-this._dis/2),this.genAGround(i,cc.winSize.height/2-208-this._dis/2*3),this.genAGround(i,cc.winSize.height/2-208-this._dis/2*5),i+=this._dis;for(l=0;l<3;l++)this.createGrass(e,o),e+=this._dis;break;case 18:i=e;var u=o+8*r+40;for(l=0;l<3;l++)this.createGrass(i,u),u-=this._dis,i+=this._dis;for(l=0;l<3;l++)this.createGrass(e,o),e+=this._dis;break;case 19:for(n?this._topObConfig[this._mapConfigIndex]&&(i=e+Number(this._topObConfig[this._mapConfigIndex]._dis)):i=e,l=0;l<3;l++)this.genAGround(i,o),this.genAGround(i,o+r),this.genAGround(i,o+2*r),this.genAGround(i,o+3*r),i+=this._dis;if(n)e+=3*this._dis;else for(l=0;l<3;l++)this.createThron(e,o+5*r-20),l<=1?this.createGrass(e,o+4*r,!0):this.createGrass(e,o+4*r),e+=this._dis;break;case 20:for(i=e,this.createGrass(e,o+4*r,!0,s,1,null,2*this._dis+4),l=0;l<3;l++)this.createGrass(e,o),e+=this._dis;break;case 21:for(i=e,l=0;l<3;l++)this.genAGround(i,this.topMaxPos-this.topPrefab.data.height/2-this._dis/2),this.genAGround(i,this.topMaxPos-this.topPrefab.data.height/2-this._dis/2*3),this.genAGround(i,this.topMaxPos-this.topPrefab.data.height/2-this._dis/2*5),i+=this._dis;for(l=0;l<3;l++)this.createGrass(e,o),e+=this._dis}}},e.prototype.gameOver=function(){if(!this._gameOver){this._isWin=!1,this.node.getComponent("GameModel")._nowScore=0,this.node.getComponent("GameModel")._lastBangX=this._birdLead.x,this.node.getComponent("GameModel")._lastBangY=this._birdLead.y,this.node.getComponent("GameModel").saveData(),console.log("\u6e38\u620f\u7ed3\u675f"),this.node.getComponent("GameModel").isGameStart=!1,this._gameOver=!0,this._startBullet=!1,this._birdLead.getComponent("Bird").changeBangIcon(),this._birdLead.getComponent("Bird").setSpeed(-300),this._birdLead.getComponent(cc.RigidBody).fixedRotation=!1;for(var t=0,e=this._eggPool;t<e.length;t++){var o=e[t];o&&o._parent&&o.getComponent(cc.RigidBody)&&(o.getComponent(cc.RigidBody).linearDamping=4)}this.shakeScreen(),this.showResult(!1)}},e.prototype.shakeScreen=function(){var t=cc.ActionInterval.extend({_initial_x:0,_initial_y:0,_strength_x:0,_strength_y:0,create:function(e,o,n){var i=new t;return i.initWithDuration(e,o,n),i},initWithDuration:function(t,e,o){return cc.ActionInterval.prototype.initWithDuration.apply(this,arguments),this._strength_x=e,this._strength_y=o,!0},fgRangeRand:function(t,e){return Math.random()*(e-t)+t},update:function(){var t=this.fgRangeRand(-this._strength_x,this._strength_x),e=this.fgRangeRand(-this._strength_y,this._strength_y);this.getTarget().setPosition(t+this._initial_x,e+this._initial_y)},startWithTarget:function(t){cc.ActionInterval.prototype.startWithTarget.apply(this,arguments),this._initial_x=t.x,this._initial_y=t.y},stop:function(){this.getTarget().setPosition(new cc.Vec2(this._initial_x,this._initial_y)),cc.ActionInterval.prototype.stop.apply(this)}}),e=(new t).create(.2,10,10);this.camera.runAction(e)},e.prototype.showResult=function(t){if(!this._showResult){this._showResult=!0;var e=this.touchEventNode.getComponent("EventEmit").getProgress(),o=Number((100*e).toFixed(0))<0?0:(100*e).toFixed(0),n={getScore:this._nowLvScore,bestScore:this.node.getComponent("GameModel")._bestScore,isShowBackGame:this._backGameCount,progress:e,num:o,isWin:null,level:null};n.isWin=t,n.level=this.node.getComponent("GameModel")._level,n.isWin?(n.level--,this.node.getComponent("GameModel").addBirdByLv(),this.node.getComponent("GameModel").getResultCount()%3==0?this.showGamePage(n):this.showResultPanel(n),this.node.getComponent("GameModel").addResultCount()):this.showResultPanel(n)}},e.prototype.showGamePage=function(t){var e=this;cc.loader.loadRes("pfb/moreGame/GamePage",cc.Prefab,function(o,n){if(!o){var i=cc.instantiate(n);cc.director.getScene().getChildByName("Canvas").addChild(i),i.x=e.touchEventNode.x,i.y=e.touchEventNode.y,i.width=cc.winSize.width,i.height=cc.winSize.height,console.log(),i.zIndex=1999,i.getComponent("GamePage").onCloseFun=function(){e.showResultPanel(t,!1)}}})},e.prototype.backGame=function(){this._backGameCount=0;for(var t=0;t<this._eggPool.length;t++){var e=this._eggPool[t];e&&e._parent&&this._eggNodePool.put(e)}this._eggPool=[],this.createBird(),this._birdLead.getComponent(cc.RigidBody).gravityScale=0,this._birdLead.x=this.node.getComponent("GameModel")._lastBangX,this._birdLead.y=this._birdPosY+100},e.prototype.backGameCountDownOver=function(){this._gameOver=!1,this._perfectCount=0,this._startBullet=!1,this._showResult=!1,this._isWin=!1,this.startBullet(),this.touchEventNode.getComponent("EventEmit").clearPrefectIcon(),this.node.getComponent("GameModel").isGameStart=!0,this._birdLead.getComponent(cc.RigidBody).gravityScale=4},e.prototype.startBullet=function(){this._startBullet=!0,this._birdLead.getComponent("Bird")._invincible=!0,this._lastCreateBulletTime=0,setTimeout(function(){this._birdLead.getComponent("Bird")._invincible=!1,this._startBullet=!1,this._perfectCount=0,cc.systemEvent.emit("CLEAR_PERFECT_ICON"),this.resetBg(),this.guang.node.active=!0;var t=cc.sequence(cc.fadeTo(.1,170),cc.delayTime(.05),cc.fadeOut(.1));this.guang.node.runAction(t)}.bind(this),5e3)},e.prototype.createEgg=function(){return r(this,void 0,void 0,function(){var t,e;return a(this,function(){return this.node.getComponent("GameModel").isGameStart?this.touchEventNode.x-this._birdLead.x<cc.winSize.width/2-Math.abs(this._birdPosX)?[2]:this._startEndStage?[2]:this.canCreateEgg()?this._birdLead.y+this._birdLead.height>this.topMaxPos-this.topPrefab.data.height/2?[2]:this._birdLead.x<10?[2]:(window.platform.getRes("hit","audio").then(function(t){_.default.Instance().playSFX(t)}),t=null,t=this._eggNodePool.size()>0?this._eggNodePool.get():cc.instantiate(this.eggPrefab),this.textIndex++,t.name="egg"+this.textIndex,e=y.default.getRndInteger(1,5),t.getComponent(d.default).setSpriteFrmeFir(this["bird_block"+e]),t.getComponent(d.default).setDiCi(this.bird_diciPrefab),this.node.addChild(t),t.zIndex=2,this._birdLead.y+=this._dis,t.y=this._birdLead.y-this._dis,t.x=this._birdLead.x,t.scale=.8,t.runAction(cc.sequence(cc.scaleTo(.2,1.1),cc.scaleTo(.1,1))),t.getComponent(d.default).changeNormal(),t.getChildByName("bird_huichen").active=!1,this._birdLead&&this._birdLead.getComponent("Bird")._invincible&&this.node.getComponent("GameModel").addCash(1),this._lastCreateEggTime=this.node.getComponent("GameModel").getLocalTime(),this._eggPool.push(t),this.changeGravity(),[2]):[2]:[2]})})},e.prototype.canCreateEgg=function(){var t=this.checkEffectiveEggCount();if(this.getObCountByPosX(this._birdLead.x),t>=12)return!1;for(var e=0,o=this._obstaclePool;e<o.length;e++){var n=o[e];if(n&&n._parent&&n.y>this._birdLead.y&&Math.abs(n.y-this._birdLead.y)<=this._birdLead.height+5&&Math.abs(n.x-this._birdLead.x)<this._birdLead.width)return!1}return!0},e.prototype.checkEffectiveEggCount=function(){for(var t=0,e=0,o=this._eggPool;e<o.length;e++){var n=o[e];n&&n._parent&&Math.abs(n.x-this._birdLead.x)<this._dis/2&&t++}return t},e.prototype.getObCountByPosX=function(t){for(var e=0,o=0,n=this._obstaclePool;o<n.length;o++){var i=n[o];i&&i._parent&&i.y>-cc.winSize.height/2+5*this._dis&&i.y<cc.winSize.height/2-3*this._dis&&Math.abs(i.x-t)<this._dis&&e++}return e},e.prototype.changeGravity=function(t){void 0===t&&(t=0);for(var e=0,o=0,n=this._eggPool;o<n.length;o++){var i=n[o];if(i&&i._parent){var s=6-.5*e;s<=4&&(s=6),e++,i.getComponent(cc.RigidBody)&&(i.getComponent(cc.RigidBody).gravityScale=s)}}},e.prototype.onTouchStartGame=function(t,e){g.default.logEvent("click_start_game"),1==Number(e)?this.node.getComponent("GameModel").isEndless=!1:this.node.getComponent("GameModel").isEndless=!0,this.node.getComponent("GameModel").isEndless?this._speed=4:Math.floor(this.node.getComponent("GameModel")._level)+3>this.speedMax?this._speed=this.speedMax:this._speed=3+Math.floor(this.node.getComponent("GameModel")._level),cc.systemEvent.emit("START_GAME")},e.prototype.checkEffectiveEgg=function(){for(var t=0,e=this._eggPool;t<e.length;t++){var o=e[t];if(o&&o._parent&&Math.abs(o.x-this._birdLead.x)<this._dis/2)return!0}return!1},e.prototype.endStageFunc=function(){for(var t=this,e=function(e){if(e&&e._parent&&Math.abs(e.x-o._birdLead.x)<o._dis/2)return o._endStageLastDeleteEggTime=o.node.getComponent("GameModel").getLocalTime(),e.runAction(cc.sequence(cc.scaleTo(.2,.7),cc.callFunc(function(){t._eggNodePool.put(e)}))),{value:void 0}},o=this,n=0,i=this._eggPool;n<i.length;n++){var s=e(i[n]);if("object"==typeof s)return s.value}},e.prototype.createHomePanel=function(){return r(this,void 0,void 0,function(){var t;return a(this,function(){return this._needCreateObstacle?(this._needCreateObstacle=!1,this.createSensor(this._mapBeginPox+100,this._beginPosY+2*this._dis,"END_STAGE"),this.createEndPanel(this._mapBeginPox,this._beginPosY),t=null,this._homePanel?t=this._homePanel:(t=cc.instantiate(this.homePanelPrefab),cc.director.getScene().getChildByName("Canvas").addChild(t),this._homePanel=t),t.getComponent(p.default).init(),t.getChildByName("heart")&&(this.heart=t.getChildByName("heart")),t.active=!0,t.x=this._mapBeginPox,t.y=this._beginPosY+4.5*this._dis,[2]):[2]})})},e.prototype.createEndPanel=function(t,e){for(var o=t,n=0;n<28;n++)this.createZheDangOb(o,e,1),this.createZheDangOb(o,e+this._dis,1),this.createZheDangOb(o,e+2*this._dis,1),this.createZheDangOb(o,e+3*this._dis,1),o+=this._dis;for(n=0;n<28;n++)this.createGrass(t,e+4*this._dis),t+=this._dis;this._mapBeginPox+=12*this._dis},e.prototype.createBullet=function(){return r(this,void 0,void 0,function(){var t,e;return a(this,function(o){switch(o.label){case 0:return t=null,[4,this.GetPrefab("prefab/item/bullet")];case 1:return e=o.sent(),(t=this._bulletPool.size()>0?this._bulletPool.get():cc.instantiate(e)).x=this._birdLead.x+this._birdLead.width,t.y=this._birdLead.y,t.zIndex=2,cc.director.getScene().getChildByName("Canvas").addChild(t),t.getComponent("Bullet").setPool(this._bulletPool),t.getComponent("Bullet").setBird(this._birdLead),this._lastCreateBulletTime=this.node.getComponent("GameModel").getLocalTime(),[2]}})})},e.prototype.createBang=function(t,e){return r(this,void 0,void 0,function(){var o,n;return a(this,function(i){switch(i.label){case 0:return[4,this.GetPrefab("prefab/item/bird")];case 1:return o=i.sent(),n=cc.instantiate(o),cc.director.getScene().getChildByName("Canvas").addChild(n),this._obstaclePool.push(n),n.zIndex=2,this._bangNumber=1,n.x=t-5,n.y=e,n.opacity=180,n.getComponent("Bird").setBang(),[2]}})})},e.prototype.deleteObstaclePool=function(){for(var t=0;t<this._obstaclePool.length;t++){var e=this._obstaclePool[t];e&&e._parent&&(e.x<this.touchEventNode.x-cc.winSize.width?("ground"==e.group?e.getComponent("Ground")&&e.getComponent("Ground")._enable?this._groundPool.put(e):e.destroy():"grass"==e.group?e.getComponent("Grass")&&e.getComponent("Grass")._enable?this._grassPool.put(e):e.destroy():"thorn"==e.group?this._thornPool.put(e):e.destroy(),this._obstaclePool.splice(t,1)):"sensor"==e.group&&e.x-this._birdLead.x<this._birdLead.width&&e.getComponent("Sensor").emitEvent())}},e.prototype.deleteTopAndDownOb=function(){for(var t=0;t<this._spObPool.length;t++)(o=this._spObPool[t])&&o._parent&&o.x<this.touchEventNode.x-cc.winSize.width&&(this._spObNodePool.put(o),this._spObPool.splice(t,1));for(var e=0;e<this.topPrefabPool.length;e++){var o;(o=this.topPrefabPool[e])&&o.x<this.touchEventNode.x-cc.winSize.width&&(this.topPrefabPool[e].removeFromParent(),this.topPrefabPool.splice(e,1))}},e.prototype.deleteEgg=function(){for(var t=0;t<this._eggPool.length;t++){var e=this._eggPool[t];e&&e._parent&&(this.camera.x-e.x>cc.winSize.width||e.y<-cc.winSize.height/2-e.height/2)&&(this._eggNodePool.put(e),this._eggPool.splice(t,1),this.changeGravity())}},e.prototype.update=function(){var t=this;if(this.node.getComponent("GameModel").isGameStart){if(this._birdLead.y<-cc.winSize.height/2&&this.gameOver(),this._touchStart&&(this.node.getComponent("GameModel").getLocalTime(),this._lastCreateEggTime,this._crateEggTimeDis),this._startEndStage&&(this._startBullet=!1,this._speed=5,this.touchEventNode.getComponent("EventEmit").changeScoreLabel("100%"),this.node.getComponent("GameModel").getLocalTime()-this._endStageLastDeleteEggTime>this._endStageDeleteEggTimeDis&&this.endStageFunc()),this._startBullet&&(this.node.getComponent("GameModel").getLocalTime(),this._lastCreateBulletTime,this._createBulletTimeDis),this._nowGroundLength-this._birdLead.x<cc.winSize.width&&(this.node.getComponent("GameModel").isEndless?(this._mapConfigIndex==this._mapConfig.length-3&&this._mapConfig.push(y.default.getRndInteger(0,19)),this._obstacleConfig[this._mapConfig[this._mapConfigIndex]]||console.log("this._mapConfigIndex",this._mapConfig[this._mapConfigIndex],this._obstacleConfig),this.createObstacle(this._obstacleConfig[this._mapConfig[this._mapConfigIndex]],this._mapBeginPox,this._beginPosY,!0)):this._mapConfigIndex<this._mapConfig.length?this.createObstacle(this._obstacleConfig[this._mapConfig[this._mapConfigIndex]],this._mapBeginPox,this._beginPosY,!0):this.createHomePanel()),this.deleteObstaclePool(),this.deleteTopAndDownOb(),this.deleteEgg(),this.node.getComponent("GameModel").isEndless)this._speed<this.speedMax&&(this.speedMi+=.1,this.speedMi>=40&&(this._speed+=.005)),this.leftScore+=.3,this.leftScore>=10&&(this.score++,this.leftScore=0),this.touchEventNode.getComponent(c.default).updateScore(this.score,this.propScore);else if(this._birdLead.x<=this._totalGroundLength){if(this._birdLead.x>0){var e=Number(this._birdLead.x);this._speed<this.speedMax&&(this.speedMi+=.1,this.speedMi>=40&&(this._speed+=.005));var o=this.score_speed().length,n=Math.floor(Number(Number(e/this._totalGroundLength).toFixed(2))/(1/o)),i=Math.floor(n-this.leftScore);this.score+=i,this.leftScore=n,this.touchEventNode.getComponent("EventEmit").changeProgress(Number(e/this._totalGroundLength).toFixed(2),this.score,this.propScore);var s=this.touchEventNode.getComponent("EventEmit").getProgress(),r=Number((100*s).toFixed(0))<0?0:(100*s).toFixed(0);this.touchEventNode.getComponent("EventEmit").changeScoreLabel(r+"%"),this.touchEventNode.getComponent(c.default).updateXing(this.fen_level())}}else this.touchEventNode.getComponent("EventEmit").changeProgress(1),this.touchEventNode.getComponent(c.default).updateXing(this.fen_level());if(this._homePanel&&this._homePanel.x-this.touchEventNode.x<=-365){var a=this.node.getComponent("GameModel");return a._lastMapConfig=[],a._lastTopObConfig=[],a._lastBangX=null,a._lastBangY=null,a._level++,a._nowScore+=this._nowLvScore,a.updateBestScore(),a.isGameStart=!1,this._startBullet=!1,this._gameOver=!0,void(this._isWin=!0)}for(var h=0;h<this._eggPool.length;h++){var l=this._eggPool[h];l&&l._parent&&!l._isStop&&(l.x+=this._speed)}this.camera.x+=this._speed,this.touchEventNode.x+=this._speed,this.bg.x=this.touchEventNode.x,Math.abs(this.touchEventNode.x-this._birdLead.x)>=cc.winSize.width/2-Math.abs(this._birdPosX)&&(this._birdLead.x=this.touchEventNode.x+Math.abs(this._birdPosX)-cc.winSize.width/2)}else this._gameOver?this._isWin&&(this.checkEffectiveEgg()?this.node.getComponent("GameModel").getLocalTime()-this._endStageLastDeleteEggTime>this._endStageDeleteEggTimeDis&&this.endStageFunc():this.showHeartAnimState||(console.log("\u603b\u957f\u5ea6",this.score_speed().length,"\u5206\u6570",this.score,"\u78b0\u5230\u7684\u9053\u5177\u6570\u91cf",this.propScore/5,"\u603b\u9053\u5177\u6570\u91cf",this.propNum-1,"\u751f\u6210\u9053\u5177\u8c03\u7528\u6b21\u6570",this.kuaiNum),this.node.getComponent("GameModel").isGameStart=!1,this.showHeartAnimState=!0,this.node.runAction(cc.sequence(cc.callFunc(function(){t.node.getChildByName("homePanel").getComponent(p.default).playAnim()}),cc.delayTime(1.2),cc.callFunc(function(){var e={gameScore:t.score+t.propScore,gameWin:1,gameGrade:t.fen_level()};window.platform.submitGameScore(e),window.platform.getRes("success","audio").then(function(t){_.default.Instance().playSFX(t)})}))))):this._birdLead&&(this._birdLead.x=this.touchEventNode.x)},e.prototype.fen_level=function(){var t=this.score+this.propScore,e=this.score_speed().length;return t>=1.5*e?3:t>=1.25*e?2:t>=1*e?1:0},e.prototype.score_speed=function(){var t=this.node.getComponent("GameModel")._level;return 1==t?{length:30,obsNum:5,porpNum:5}:2==t?{length:50,obsNum:10,porpNum:10}:3==t?{length:80,obsNum:20,porpNum:10}:4==t?{length:100,obsNum:30,porpNum:15}:5==t?{length:120,obsNum:40,porpNum:15}:6==t?{length:120,obsNum:50,porpNum:20}:7==t?{length:150,obsNum:60,porpNum:20}:8==t?{length:150,obsNum:60,porpNum:25}:9==t?{length:150,obsNum:70,porpNum:25}:10==t?{length:180,obsNum:70,porpNum:30}:11==t?{length:180,obsNum:80,porpNum:35}:t>=12?{length:180,obsNum:8,porpNum:40}:void 0},e.prototype.showAni=function(){return r(this,void 0,void 0,function(){var t,e,o;return a(this,function(n){switch(n.label){case 0:return 0==this._backGameCount?[2]:this.node.getComponent("GameModel").isGameStart?[3,4]:this._showAniCount<=2?(this._showAniCount++,t=null,[4,this.GetPrefab("prefab/item/egg")]):[3,2];case 1:return e=n.sent(),this._eggNodePool.size()>0?(t=this._eggNodePool.get()).getChildByName("bird_huichen").active=!1:t=cc.instantiate(e),o=y.default.getRndInteger(1,5),t.getComponent(d.default).setSpriteFrmeFir(this["bird_block"+o]),this.node.addChild(t),t.zIndex=2,this._birdLead.y+=this._dis,t.y=this._birdLead.y-this._dis,t.x=this._birdLead.x,t.getComponent("Egg").changeNormal(),t.scale=.8,t.runAction(cc.sequence(cc.scaleTo(.2,1.1),cc.scaleTo(.1,1))),this._eggPool.push(t),[3,3];case 2:this.waitAni(),n.label=3;case 3:setTimeout(function(){this.showAni()}.bind(this),1e3),n.label=4;case 4:return[2]}})})},e.prototype.waitAni=function(){for(var t=0,e=null,o=0,n=this._eggPool;o<n.length;o++){var i=n[o];i&&i._parent?e?i.y<e.y&&(e=i):e=i:t++}this._eggNodePool.put(e),t==this._eggPool.length&&(this._showAniCount=0)},s([v],e)}(h.default));o.default=C,cc._RF.pop()},{"./EventEmit":"EventEmit","./framwork/BaseUI":"BaseUI","./item/Bird":"Bird","./item/Egg":"Egg","./item/addScore":"addScore","./item/homePanel":"homePanel","./item/top":"top","./utils/AnalyticsUtilities":"AnalyticsUtilities","./utils/AudioMgr":"AudioMgr","./utils/CollectAnimation":"CollectAnimation","./utils/Utils":"Utils"}],homePanel:[function(t,e,o){"use strict";cc._RF.push(e,"b933b5zoPFPmbetUn9dHQC/","homePanel");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=this&&this.__decorate||function(t,e,o,n){var i,s=arguments.length,r=s<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(r=(s<3?i(r):s>3?i(e,o,r):i(e,o))||r);return s>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=t("../framwork/BaseUI"),a=t("../utils/Utils"),c=cc._decorator,h=c.ccclass,l=(c.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.init=function(){var t=this.GetSprite("home_1-01"),e=this.GetSprite("xian"),o=this.GetSprite("muniao"),n=this.GetSprite("love1"),i=this.GetSprite("love2"),s=this.GetSprite("love3");a.default.setSpriteAssets(t,"house"),a.default.setSpriteAssets(e,"line"),a.default.setSpriteAssets(o,"bird2"),a.default.setSpriteAssets(n,"love1"),a.default.setSpriteAssets(i,"love1"),a.default.setSpriteAssets(s,"love1")},e.prototype.playAnim=function(){var t=this.GetGameObject("love1"),e=this.GetGameObject("love2"),o=this.GetGameObject("love3");cc.tween(t).delay(.5).call(function(){t.scale=0,t.active=!0}).to(.2,{scale:1.1},{easing:"sineOut"}).to(.08,{scale:1},{easing:"sineOut"}).start(),cc.tween(e).delay(.8).call(function(){e.scale=0,e.active=!0}).to(.2,{scale:1.1},{easing:"sineOut"}).to(.08,{scale:1},{easing:"sineOut"}).start(),cc.tween(o).delay(1.1).call(function(){o.scale=0,o.active=!0}).to(.2,{scale:1.1},{easing:"sineOut"}).to(.08,{scale:1},{easing:"sineOut"}).start()},e.prototype.closeAnim=function(){this.node.active=!1;var t=this.GetGameObject("love1"),e=this.GetGameObject("love2"),o=this.GetGameObject("love3");t.stopAllActions(),e.stopAllActions(),o.stopAllActions(),t.active=!1,e.active=!1,o.active=!1},s([h],e)}(r.default));o.default=l,cc._RF.pop()},{"../framwork/BaseUI":"BaseUI","../utils/Utils":"Utils"}],spObstacle:[function(t,e,o){"use strict";cc._RF.push(e,"43ba5kJG6lPdLptA7aZdFKg","spObstacle");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=this&&this.__decorate||function(t,e,o,n){var i,s=arguments.length,r=s<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(r=(s<3?i(r):s>3?i(e,o,r):i(e,o))||r);return s>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=t("../framwork/BaseUI"),a=t("../utils/Utils"),c=cc._decorator,h=c.ccclass,l=(c.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._type=null,e}return i(e,t),e.prototype.initType=function(t){this._type=t,1==this._type?a.default.setSpriteAssets(this.node.getComponent(cc.Sprite),"block"):2==this._type&&a.default.setSpriteAssets(this.node.getComponent(cc.Sprite),"blockgreen")},e.prototype.onLoad=function(){cc.systemEvent.on("UPDATE_SELECT_SCENE",this.updateUI,this),this._type=-1},e.prototype.updateUI=function(){this.initType(this._type)},e.prototype.start=function(){},s([h],e)}(r.default));o.default=l,cc._RF.pop()},{"../framwork/BaseUI":"BaseUI","../utils/Utils":"Utils"}],success:[function(t,e,o){"use strict";cc._RF.push(e,"ec0a57nApBKT7gmHUsXwKmJ","success");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=this&&this.__decorate||function(t,e,o,n){var i,s=arguments.length,r=s<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(r=(s<3?i(r):s>3?i(e,o,r):i(e,o))||r);return s>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=t("../framwork/BaseUI"),a=cc._decorator,c=a.ccclass,h=(a.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.show=function(t){cc.find("Canvas").getComponent("GameModel").isEndless?this.GetText("lab_title").string="\u603b\u5206:"+t.gameScore:this.GetText("lab_title").string="\u603b\u5206:"+t.gameScore+"\u661f\u661f:"+t.gameGrade},e.prototype.onLoad=function(){this.startAnim()},e.prototype.onNext=function(){cc.systemEvent.emit("RESET_GAME"),cc.systemEvent.emit("START_GAME"),this.onClose()},e.prototype.onClose=function(){this.node.destroy()},s([c],e)}(r.default));o.default=h,cc._RF.pop()},{"../framwork/BaseUI":"BaseUI"}],top:[function(t,e,o){"use strict";cc._RF.push(e,"564a5ai9zNOcr0sovPRrdxS","top");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=this&&this.__decorate||function(t,e,o,n){var i,s=arguments.length,r=s<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(r=(s<3?i(r):s>3?i(e,o,r):i(e,o))||r);return s>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=t("../framwork/BaseUI"),a=t("../utils/Utils"),c=cc._decorator,h=c.ccclass,l=(c.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.init=function(){a.default.setSpriteAssets(this.node.getComponent(cc.Sprite),"top")},s([h],e)}(r.default));o.default=l,cc._RF.pop()},{"../framwork/BaseUI":"BaseUI","../utils/Utils":"Utils"}]},{},["Config","EventEmit","GameModel","PlayerModel","GameConst","GameEvent","ModuleEventEnum","BaseUI","MsgHints","User","UserMsg","gameScene","Bird","Bullet","Egg","Grass","Ground","Prop","Sensor","Thorn","addScore","fail","homePanel","spObstacle","success","top","PlayerState","PoolMgr","Singleton","TweenPool","GameSystem","AnalyticsUtilities","AudioMgr","BigNumber","CollectAnimation","GameInfo","HTTP","MConfig","NumberRoll","Shake","Utils"]);